(self.webpackChunkwebshop=self.webpackChunkwebshop||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},3018:(t,e,n)=>{"use strict";n.d(e,{deG:()=>Xe,tb:()=>Ga,AFp:()=>Fa,ip1:()=>Ma,CZH:()=>La,hGG:()=>Mu,z2F:()=>Tu,sBO:()=>zs,Sil:()=>Xa,_Vd:()=>gs,EJc:()=>za,SBq:()=>bs,qLn:()=>dr,vpe:()=>ba,gxx:()=>$i,tBr:()=>bn,XFs:()=>N,OlP:()=>Ye,zs3:()=>uo,ZZ4:()=>Vs,aQg:()=>js,soG:()=>Ha,YKP:()=>ea,v3s:()=>xu,h0i:()=>ta,PXZ:()=>wu,R0b:()=>nu,FiY:()=>wn,Lbi:()=>qa,g9A:()=>ja,Qsj:()=>Ss,FYo:()=>_s,JOm:()=>mr,Tiy:()=>Es,q3G:()=>ar,tp0:()=>_n,EAV:()=>ku,Rgc:()=>Js,dDg:()=>cu,DyG:()=>tn,q4F:()=>Is,GfV:()=>Ts,s_b:()=>ra,ifc:()=>F,eFA:()=>_u,G48:()=>vu,Gpc:()=>g,X6Q:()=>yu,_c5:()=>Pu,VLi:()=>fu,c2e:()=>Ba,zSh:()=>Qi,wAp:()=>es,vHH:()=>v,EiD:()=>or,mCW:()=>Gn,qzn:()=>Nn,JVY:()=>Pn,pB0:()=>Fn,eBb:()=>Mn,L6k:()=>Rn,LAX:()=>Ln,cg1:()=>Yo,Tjo:()=>Du,kL8:()=>Xo,yhl:()=>Dn,dqk:()=>G,sIi:()=>vo,CqO:()=>Po,QGY:()=>No,F4k:()=>Do,RDi:()=>It,AaK:()=>f,z3N:()=>kn,qOj:()=>lo,TTD:()=>wt,_Bn:()=>fs,xp6:()=>Xr,uIk:()=>_o,ekj:()=>jo,Suo:()=>Da,Xpm:()=>X,lG2:()=>st,Yz7:()=>S,cJS:()=>C,oAB:()=>rt,Yjl:()=>at,Y36:()=>Eo,_UZ:()=>Oo,qZA:()=>Ao,TgZ:()=>xo,EpF:()=>ko,n5z:()=>$e,Ikx:()=>Ko,LFG:()=>mn,$8M:()=>Qe,NdJ:()=>Ro,CRH:()=>Pa,oxw:()=>Fo,Q6J:()=>To,iGM:()=>Na,MAs:()=>Co,CHM:()=>Bt,LSH:()=>ur,kYT:()=>it,YNc:()=>So,_uU:()=>zo,Oqu:()=>Zo,hij:()=>$o});var r=n(9765),i=n(5319),o=n(7574),s=n(6682),a=n(2441),u=n(1307);function c(){return new r.xQ}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function f(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(f).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function d(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=l({__forward_ref__:l});function g(t){return t.__forward_ref__=g,t.toString=function(){return f(this())},t}function m(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===g}class v extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function b(t){return"string"==typeof t?t:null==t?"":String(t)}function w(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():b(t)}function _(t,e){const n=e?` in ${e}`:"";throw new v("201",`No provider for ${w(t)} found${n}`)}function S(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function C(t){return{providers:t.providers||[],imports:t.imports||[]}}function E(t){return T(t,x)||T(t,O)}function T(t,e){return t.hasOwnProperty(e)?t[e]:null}function I(t){return t&&(t.hasOwnProperty(A)||t.hasOwnProperty(k))?t[A]:null}const x=l({"\u0275prov":l}),A=l({"\u0275inj":l}),O=l({ngInjectableDef:l}),k=l({ngInjectorDef:l});var N=(()=>((N=N||{})[N.Default=0]="Default",N[N.Host=1]="Host",N[N.Self=2]="Self",N[N.SkipSelf=4]="SkipSelf",N[N.Optional=8]="Optional",N))();let D;function P(t){const e=D;return D=t,e}function R(t,e,n){const r=E(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==e?e:void _(f(t),"Injector")}function M(t){return{toString:t}.toString()}var L=(()=>((L=L||{})[L.OnPush=0]="OnPush",L[L.Default=1]="Default",L))(),F=(()=>((F=F||{})[F.Emulated=0]="Emulated",F[F.None=2]="None",F[F.ShadowDom=3]="ShadowDom",F))();const V="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,j="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,G=V||q||U||j,B={},H=[],z=l({"\u0275cmp":l}),Z=l({"\u0275dir":l}),$=l({"\u0275pipe":l}),K=l({"\u0275mod":l}),Q=l({"\u0275loc":l}),J=l({"\u0275fac":l}),W=l({__NG_ELEMENT_ID__:l});let Y=0;function X(t){return M(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===L.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||H,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||F.Emulated,id:"c",styles:t.styles||H,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Y++,n.inputs=ot(t.inputs,e),n.outputs=ot(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(tt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(et):null,n})}function tt(t){return ut(t)||function(t){return t[Z]||null}(t)}function et(t){return function(t){return t[$]||null}(t)}const nt={};function rt(t){return M(()=>{const e={type:t.type,bootstrap:t.bootstrap||H,declarations:t.declarations||H,imports:t.imports||H,exports:t.exports||H,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(nt[t.id]=t.type),e})}function it(t,e){return M(()=>{const n=ct(t,!0);n.declarations=e.declarations||H,n.imports=e.imports||H,n.exports=e.exports||H})}function ot(t,e){if(null==t)return B;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const st=X;function at(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[z]||null}function ct(t,e){const n=t[K]||null;if(!n&&!0===e)throw new Error(`Type ${f(t)} does not have '\u0275mod' property.`);return n}const lt=20,ht=10;function ft(t){return Array.isArray(t)&&"object"==typeof t[1]}function dt(t){return Array.isArray(t)&&!0===t[1]}function pt(t){return 0!=(8&t.flags)}function gt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function yt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty(J)?t[J]:null}class bt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function wt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ct),St}function St(){const t=Et(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===B)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ct(t,e,n,r){const i=Et(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:B,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new bt(u&&u.currentValue,e,s===B),t[r]=e}function Et(t){return t.__ngSimpleChanges__||null}let Tt;function It(t){Tt=t}function xt(t){return!!t.listen}wt.ngInherit=!0;const At={createRenderer:(t,e)=>void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0};function Ot(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return Ot(e[t])}function Nt(t,e){return Ot(e[t.index])}function Dt(t,e){return t.data[e]}function Pt(t,e){const n=e[t];return ft(n)?n:n[0]}function Rt(t){return 4==(4&t[2])}function Mt(t){return 128==(128&t[2])}function Lt(t,e){return null==e?null:t[e]}function Ft(t){t[18]=0}function Vt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ut={lFrame:oe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function jt(){return Ut.bindingsEnabled}function qt(){return Ut.lFrame.lView}function Gt(){return Ut.lFrame.tView}function Bt(t){return Ut.lFrame.contextLView=t,t[8]}function Ht(){let t=zt();for(;null!==t&&64===t.type;)t=t.parent;return t}function zt(){return Ut.lFrame.currentTNode}function Zt(t,e){const n=Ut.lFrame;n.currentTNode=t,n.isParent=e}function $t(){return Ut.lFrame.isParent}function Kt(){return Ut.isInCheckNoChangesMode}function Qt(t){Ut.isInCheckNoChangesMode=t}function Jt(){return Ut.lFrame.bindingIndex++}function Wt(t,e){const n=Ut.lFrame;n.bindingIndex=n.bindingRootIndex=t,Yt(e)}function Yt(t){Ut.lFrame.currentDirectiveIndex=t}function Xt(){return Ut.lFrame.currentQueryIndex}function te(t){Ut.lFrame.currentQueryIndex=t}function ee(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ne(t,e,n){if(n&N.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=ee(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Ut.lFrame=ie();return r.currentTNode=e,r.lView=t,!0}function re(t){const e=ie(),n=t[1];Ut.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ie(){const t=Ut.lFrame,e=null===t?null:t.child;return null===e?oe(t):e}function oe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function se(){const t=Ut.lFrame;return Ut.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ae=se;function ue(){const t=se();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ce(){return Ut.lFrame.selectedIndex}function le(t){Ut.lFrame.selectedIndex=t}function he(){const t=Ut.lFrame;return Dt(t.tView,t.selectedIndex)}function fe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function de(t,e,n){me(t,e,3,n)}function pe(t,e,n,r){(3&t[2])===n&&me(t,e,n,r)}function ge(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function me(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(ye(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ye(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const ve=-1;class be{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function we(t,e,n){const r=xt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Se(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function _e(t){return 3===t||4===t||6===t}function Se(t){return 64===t.charCodeAt(0)}function Ce(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ee(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ee(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Te(t){return t!==ve}function Ie(t){return 32767&t}function xe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ae=!0;function Oe(t){const e=Ae;return Ae=t,e}let ke=0;function Ne(t,e){const n=Pe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,De(r.data,t),De(e,null),De(r.blueprint,null));const i=Re(t,e),o=t.injectorIndex;if(Te(i)){const t=Ie(i),n=xe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function De(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Pe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Re(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return ve;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ve}function Me(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(W)&&(r=n[W]),null==r&&(r=n[W]=ke++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Le(t,e,n){if(n&N.Optional)return t;_(e,"NodeInjector")}function Fe(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],o=P(void 0);try{return i?i.get(e,r,n&N.Optional):R(e,r,n&N.Optional)}finally{P(o)}}return Le(r,e,n)}function Ve(t,e,n,r=N.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(W)?t[W]:void 0;return"number"==typeof e?e>=0?255&e:je:e}(n);if("function"==typeof o){if(!ne(e,t,r))return r&N.Host?Le(i,n,r):Fe(e,n,r,i);try{const t=o(r);if(null!=t||r&N.Optional)return t;_(n)}finally{ae()}}else if("number"==typeof o){let i=null,s=Pe(t,e),a=ve,u=r&N.Host?e[16][6]:null;for((-1===s||r&N.SkipSelf)&&(a=-1===s?Re(t,e):e[s+8],a!==ve&&ze(r,!1)?(i=e[1],s=Ie(a),e=xe(a,e)):s=-1);-1!==s;){const t=e[1];if(He(o,s,t.data)){const t=qe(s,e,n,i,r,u);if(t!==Ue)return t}a=e[s+8],a!==ve&&ze(r,e[1].data[s+8]===u)&&He(o,s,e)?(i=t,s=Ie(a),e=xe(a,e)):s=-1}}}return Fe(e,n,r,i)}const Ue={};function je(){return new Ze(Ht(),qt())}function qe(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ge(a,s,n,null==r?gt(a)&&Ae:r!=s&&0!=(3&a.type),i&N.Host&&o===a);return null!==u?Be(e,s,u,a):Ue}function Ge(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&yt(t)&&t.type===n)return u}return null}function Be(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof be){const s=i;s.resolving&&function(t,e){throw new v("200",`Circular dependency in DI detected for ${t}`)}(w(o[n]));const a=Oe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?P(s.injectImpl):null;ne(t,r,N.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&P(u),Oe(a),s.resolving=!1,ae()}}return i}function He(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function ze(t,e){return!(t&N.Self||t&N.Host&&e)}class Ze{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ve(this._tNode,this._lView,t,void 0,e)}}function $e(t){return M(()=>{const e=t.prototype.constructor,n=e[J]||Ke(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[J]||Ke(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ke(t){return y(t)?()=>{const e=Ke(m(t));return e&&e()}:vt(t)}function Qe(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(_e(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Ht(),t)}const Je="__parameters__";function We(t,e,n){return M(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Je)?t[Je]:Object.defineProperty(t,Je,{value:[]})[Je];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Ye{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=S({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xe=new Ye("AnalyzeForEntryComponents"),tn=Function;function en(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),en(r,e)):e!==t&&e.push(r)}return e}function nn(t,e){t.forEach(t=>Array.isArray(t)?nn(t,e):e(t))}function rn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function on(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function sn(t,e,n){let r=un(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function an(t,e){const n=un(t,e);if(n>=0)return t[1|n]}function un(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const cn={},ln=/\n/gm,hn="__source",fn=l({provide:String,useValue:l});let dn;function pn(t){const e=dn;return dn=t,e}function gn(t,e=N.Default){if(void 0===dn)throw new Error("inject() must be called from an injection context");return null===dn?R(t,void 0,e):dn.get(t,e&N.Optional?null:void 0,e)}function mn(t,e=N.Default){return(D||gn)(m(t),e)}function yn(t){const e=[];for(let n=0;n<t.length;n++){const r=m(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(mn(t,n))}else e.push(mn(r))}return e}function vn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const bn=vn(We("Inject",t=>({token:t})),-1),wn=vn(We("Optional"),8),_n=vn(We("SkipSelf"),4);let Sn;function Cn(t){var e;return(null===(e=function(){if(void 0===Sn&&(Sn=null,G.trustedTypes))try{Sn=G.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Sn}())||void 0===e?void 0:e.createHTML(t))||t}class En{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Tn extends En{getTypeName(){return"HTML"}}class In extends En{getTypeName(){return"Style"}}class xn extends En{getTypeName(){return"Script"}}class An extends En{getTypeName(){return"URL"}}class On extends En{getTypeName(){return"ResourceURL"}}function kn(t){return t instanceof En?t.changingThisBreaksApplicationSecurity:t}function Nn(t,e){const n=Dn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Dn(t){return t instanceof En&&t.getTypeName()||null}function Pn(t){return new Tn(t)}function Rn(t){return new In(t)}function Mn(t){return new xn(t)}function Ln(t){return new An(t)}function Fn(t){return new On(t)}class Vn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Cn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Un{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Cn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Cn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const jn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,qn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Gn(t){return(t=String(t)).match(jn)||t.match(qn)?t:"unsafe:"+t}function Bn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Hn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const zn=Bn("area,br,col,hr,img,wbr"),Zn=Bn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$n=Bn("rp,rt"),Kn=Hn($n,Zn),Qn=Hn(zn,Hn(Zn,Bn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Hn($n,Bn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kn),Jn=Bn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Wn=Bn("srcset"),Yn=Hn(Jn,Wn,Bn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xn=Bn("script,style,template");class tr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Qn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Xn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Yn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Jn[o]&&(s=Gn(s)),Wn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Gn(t.trim())).join(", ")),this.buf.push(" ",e,'="',rr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Qn.hasOwnProperty(e)&&!zn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(rr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const er=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nr=/([^\#-~ |!])/g;function rr(t){return t.replace(/&/g,"&amp;").replace(er,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(nr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ir;function or(t,e){let n=null;try{ir=ir||function(t){const e=new Un(t);return function(){try{return!!(new window.DOMParser).parseFromString(Cn(""),"text/html")}catch(t){return!1}}()?new Vn(e):e}(t);let r=e?String(e):"";n=ir.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=ir.getInertBodyElement(r)}while(r!==o);return Cn((new tr).sanitizeChildren(sr(n)||n))}finally{if(n){const t=sr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function sr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ar=(()=>((ar=ar||{})[ar.NONE=0]="NONE",ar[ar.HTML=1]="HTML",ar[ar.STYLE=2]="STYLE",ar[ar.SCRIPT=3]="SCRIPT",ar[ar.URL=4]="URL",ar[ar.RESOURCE_URL=5]="RESOURCE_URL",ar))();function ur(t){const e=function(){const t=qt();return t&&t[12]}();return e?e.sanitize(ar.URL,t)||"":Nn(t,"URL")?kn(t):Gn(b(t))}function cr(t,e){t.__ngContext__=e}function lr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function hr(t){return t.ngOriginalError}function fr(t,...e){t.error(...e)}class dr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||fr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?function(t){return t.ngDebugContext}(t)||this._findContext(hr(t)):null}_findOriginalError(t){let e=hr(t);for(;e&&hr(e);)e=hr(e);return e}}const pr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(G))();function gr(t){return t instanceof Function?t():t}var mr=(()=>((mr=mr||{})[mr.Important=1]="Important",mr[mr.DashCase=2]="DashCase",mr))();function yr(t,e){return(void 0)(t,e)}function vr(t){const e=t[3];return dt(e)?e[3]:e}function br(t){return _r(t[13])}function wr(t){return _r(t[4])}function _r(t){for(;null!==t&&!dt(t);)t=t[4];return t}function Sr(t,e,n,r,i){if(null!=r){let o,s=!1;dt(r)?o=r:ft(r)&&(s=!0,r=r[0]);const a=Ot(r);0===t&&null!==n?null==i?Or(e,n,a):Ar(e,n,a,i||null,!0):1===t&&null!==n?Ar(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Nr(t,e);r&&function(t,e,n,r){xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Ot(n)&&Sr(e,t,r,o,i);for(let s=ht;s<n.length;s++){const i=n[s];Fr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Cr(t,e,n){return xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Er(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Vt(i,-1)),n.splice(r,1)}function Tr(t,e){if(t.length<=ht)return;const n=ht+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Er(o,r),e>0&&(t[n-1][4]=r[4]);const s=on(t,ht+e);Fr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ir(t,e){if(!(256&e[2])){const n=e[11];xt(n)&&n.destroyNode&&Fr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return xr(t[1],t);for(;e;){let n=null;if(ft(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ft(e)&&xr(e[1],e),e=e[3];null===e&&(e=t),ft(e)&&xr(e[1],e),n=e&&e[4]}e=n}}(e)}}function xr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof be)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Ot(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&xt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&dt(e[3])){n!==e[3]&&Er(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Ar(t,e,n,r,i){xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Or(t,e,n){xt(t)?t.appendChild(e,n):e.appendChild(n)}function kr(t,e,n,r,i){null!==r?Ar(t,e,n,r,i):Or(t,e,n)}function Nr(t,e){return xt(t)?t.parentNode(e):e.parentNode}function Dr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===F.None||e===F.Emulated)return null}return Nt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Nt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)kr(o,i,n[a],s,!1);else kr(o,i,n,s,!1)}function Pr(t,e){if(null!==e){const n=e.type;if(3&n)return Nt(e,t);if(4&n)return Mr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Pr(t,n);{const n=t[e.index];return dt(n)?Mr(-1,n):Ot(n)}}if(32&n)return yr(e,t)()||Ot(t[e.index]);{const n=Rr(t,e);return null!==n?Array.isArray(n)?n[0]:Pr(vr(t[16]),n):Pr(t,e.next)}}return null}function Rr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Mr(t,e){const n=ht+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Pr(t,r)}return e[7]}function Lr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&cr(Ot(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Lr(t,e,n.child,r,i,o,!1),Sr(e,t,i,a,o);else if(32&u){const s=yr(n,r);let u;for(;u=s();)Sr(e,t,i,u,o);Sr(e,t,i,a,o)}else 16&u?Vr(t,e,r,n,i,o):Sr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Fr(t,e,n,r,i,o){Lr(n,r,t.firstChild,e,i,o,!1)}function Vr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Sr(e,t,i,a[u],o);else Lr(t,e,a,s[3],i,o,!0)}function Ur(t,e,n){xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function jr(t,e,n){xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function qr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Gr="ng-template";function Br(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==qr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Hr(t){return 4===t.type&&t.value!==Gr}function zr(t,e,n){return e===(4!==t.type||n?t.value:Gr)}function Zr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(_e(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!zr(t,u,n)||""===u&&1===e.length){if($r(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Br(t.attrs,c,n)){if($r(r))return!1;s=!0}continue}const l=Kr(8&r?"class":u,i,Hr(t),n);if(-1===l){if($r(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==qr(e,c,0)||2&r&&c!==t){if($r(r))return!1;s=!0}}}}else{if(!s&&!$r(r)&&!$r(u))return!1;if(s&&$r(u))continue;s=!1,r=u|1&r}}return $r(r)||s}function $r(t){return 0==(1&t)}function Kr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Qr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Zr(t,e[r],n))return!0;return!1}function Jr(t,e){return t?":not("+e.trim()+")":e}function Wr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||$r(s)||(e+=Jr(o,i),i=""),r=s,o=o||!$r(r);n++}return""!==i&&(e+=Jr(o,i)),e}const Yr={};function Xr(t){ti(Gt(),qt(),ce()+t,Kt())}function ti(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&de(e,r,n)}else{const r=t.preOrderHooks;null!==r&&pe(e,r,0,n)}le(n)}function ei(t,e){return t<<17|e<<2}function ni(t){return t>>17&32767}function ri(t){return 2|t}function ii(t){return(131068&t)>>2}function oi(t,e){return-131069&t|e<<2}function si(t){return 1|t}function ai(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];te(i),n.contentQueries(2,e[o],o)}}}function ui(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ft(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function ci(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=zt(),s=$t(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Ut.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Ut.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Zt(o,!0),o}function li(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function hi(t,e,n){re(e);try{const r=t.viewQuery;null!==r&&ji(1,r,n);const i=t.template;null!==i&&pi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ai(t,e),t.staticViewQueries&&ji(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Mi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ue()}}function fi(t,e,n,r){const i=e[2];if(256==(256&i))return;re(e);const o=Kt();try{Ft(e),Ut.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&pi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&de(e,n,null)}else{const n=t.preOrderHooks;null!==n&&pe(e,n,0,null),ge(e,0)}if(function(t){for(let e=br(t);null!==e;e=wr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Vt(r,1),n[2]|=1024}}}(e),function(t){for(let e=br(t);null!==e;e=wr(e))for(let t=ht;t<e.length;t++){const n=e[t],r=n[1];Mt(n)&&fi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ai(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&de(e,n)}else{const n=t.contentHooks;null!==n&&pe(e,n,1),ge(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)le(~r);else{const i=r,o=n[++t],s=n[++t];Wt(o,i),s(2,e[i])}}}finally{le(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Pi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&ji(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&de(e,n)}else{const n=t.viewHooks;null!==n&&pe(e,n,2),ge(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Vt(e[3],-1))}finally{ue()}}function di(t,e,n,r){const i=e[10],o=!Kt(),s=Rt(e);try{o&&!s&&i.begin&&i.begin(),s&&hi(t,e,r),fi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function pi(t,e,n,r,i){const o=ce(),s=2&r;try{le(-1),s&&e.length>lt&&ti(t,e,lt,Kt()),n(r,i)}finally{le(o)}}function gi(t,e,n){jt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ne(n,e),cr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=yt(r);o&&Oi(e,n,r);const u=Be(e,t,a,n);cr(u,e),null!==s&&ki(0,a-i,u,r,0,s),o&&(Pt(n.index,e)[8]=u)}}(t,e,n,Nt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ut.lFrame.currentDirectiveIndex;try{le(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Yt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ei(r,i)}}finally{le(-1),Yt(s)}}(t,e,n))}function mi(t,e,n=Nt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function yi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=vi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function vi(t,e,n,r,i,o,s,a,u,c){const l=lt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Yr);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function bi(t,e,n,r){const i=Gi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Bi(t).push(r,i.length-1))}function wi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function _i(t,e,n,r,i,o,s,a){const u=Nt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(zi(t,n,c,r,i),gt(e)&&function(t,e){const n=Pt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,xt(o)?o.setProperty(u,r,i):Se(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Si(t,e,n,r){let i=!1;if(jt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Qr(n,s.selectors,!1)&&(i||(i=[]),Me(Ne(n,e),t,s.type),yt(s)?(Ti(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,xi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=li(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ce(n.mergedAttrs,c.hostAttrs),Ai(t,n,e,u,c),Ii(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Hr(e)?null:Ni(n,i);o.push(c),s=wi(n,u,s),a=wi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new v("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ce(n.mergedAttrs,n.attrs),i}function Ci(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ei(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ti(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ii(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yt(e)&&(n[""]=t)}}function xi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ai(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=vt(i.type)),s=new be(o,yt(i),null);t.blueprint[r]=s,n[r]=s,Ci(t,e,0,r,li(t,n,i.hostVars,Yr),i)}function Oi(t,e,n){const r=Nt(e,t),i=yi(n),o=t[10],s=Li(t,ui(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function ki(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Ni(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Di(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Pi(t,e){const n=Pt(e,t);if(Mt(n)){const t=n[1];80&n[2]?fi(t,n,t.template,n[8]):n[5]>0&&Ri(n)}}function Ri(t){for(let n=br(t);null!==n;n=wr(n))for(let t=ht;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];fi(t,e,t.template,e[8])}else e[5]>0&&Ri(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Pt(e[n],t);Mt(r)&&r[5]>0&&Ri(r)}}function Mi(t,e){const n=Pt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),hi(r,n,n[8])}function Li(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Fi(t){for(;t;){t[2]|=64;const e=vr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Vi(t,e,n){const r=e[10];r.begin&&r.begin();try{fi(t,e,t.template,n)}catch(i){throw Hi(e,i),i}finally{r.end&&r.end()}}function Ui(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=lr(n),i=r[1];di(i,r,i.template,n)}}(t[8])}function ji(t,e,n){te(0),e(t,n)}const qi=(()=>Promise.resolve(null))();function Gi(t){return t[7]||(t[7]=[])}function Bi(t){return t.cleanup||(t.cleanup=[])}function Hi(t,e){const n=t[9],r=n?n.get(dr,null):null;r&&r.handleError(e)}function zi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Zi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=d(i,t):2==o&&(r=d(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const $i=new Ye("INJECTOR",-1);class Ki{get(t,e=cn){if(e===cn){const e=new Error(`NullInjectorError: No provider for ${f(t)}!`);throw e.name="NullInjectorError",e}return e}}const Qi=new Ye("Set Injector scope."),Ji={},Wi={};let Yi;function Xi(){return void 0===Yi&&(Yi=new Ki),Yi}function to(t,e=null,n=null,r){return new eo(t,n,e||Xi(),r)}class eo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&nn(e,n=>this.processProvider(n,t,e)),nn([t],t=>this.processInjectorType(t,[],i)),this.records.set($i,io(void 0,this));const o=this.records.get(Qi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:f(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=cn,n=N.Default){this.assertNotDestroyed();const r=pn(this),i=P(void 0);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(o=t)||"object"==typeof o&&o instanceof Ye)&&E(t);e=n&&this.injectableDefInScope(n)?io(no(t),Ji):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?Xi():this.parent).get(t,e=n&N.Optional&&e===cn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(f(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[hn]&&i.unshift(e[hn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=f(e);if(Array.isArray(e))i=e.map(f).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):f(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ln,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{P(i),pn(r)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(f(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=m(t)))return!1;let r=I(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=I(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{nn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];nn(r,t=>this.processProvider(t,n,r||H))}}this.injectorDefTypes.add(o);const a=vt(o)||(()=>new o);this.records.set(o,io(a,Ji));const u=r.providers;if(null!=u&&!s){const e=t;nn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=so(t=m(t))?t:m(t&&t.provide);const i=function(t,e,n){return oo(t)?io(void 0,t.useValue):io(ro(t),Ji)}(t);if(so(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=io(void 0,Ji,!0),e.factory=()=>yn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Ji&&(e.value=Wi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=m(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function no(t){const e=E(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof Ye)throw new Error(`Token ${f(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${f(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[x]||t[O]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function ro(t,e,n){let r;if(so(t)){const e=m(t);return vt(e)||no(e)}if(oo(t))r=()=>m(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...yn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>mn(m(t.useExisting));else{const e=m(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||no(e);r=()=>new e(...yn(t.deps))}var i;return r}function io(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function oo(t){return null!==t&&"object"==typeof t&&fn in t}function so(t){return"function"==typeof t}const ao=function(t,e,n){return function(t,e=null,n=null,r){const i=to(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class uo{static create(t,e){return Array.isArray(t)?ao(t,e,""):ao(t.providers,t.parent,t.name||"")}}function co(t,e){fe(lr(t)[1],Ht())}function lo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(yt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ho(t.inputs),e.declaredInputs=ho(t.declaredInputs),e.outputs=ho(t.outputs);const n=i.hostBindings;n&&go(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&fo(t,o),s&&po(t,s),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),yt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===lo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ce(i.hostAttrs,n=Ce(n,i.hostAttrs))}}(r)}function ho(t){return t===B?{}:t===H?[]:t}function fo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function po(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function go(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}uo.THROW_IF_NOT_FOUND=cn,uo.NULL=new Ki,uo.\u0275prov=S({token:uo,providedIn:"any",factory:()=>mn($i)}),uo.__NG_ELEMENT_ID__=-1;let mo=null;function yo(){if(!mo){const t=G.Symbol;if(t&&t.iterator)mo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(mo=n)}}}return mo}function vo(t){return!!bo(t)&&(Array.isArray(t)||!(t instanceof Map)&&yo()in t)}function bo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function wo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function _o(t,e,n,r){const i=qt();return wo(i,Jt(),e)&&(Gt(),function(t,e,n,r,i,o){const s=Nt(t,e);!function(t,e,n,r,i,o,s){if(null==o)xt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?b(o):s(o,r||"",i);xt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(he(),i,t,e,n,r)),_o}function So(t,e,n,r,i,o,s,a){const u=qt(),c=Gt(),l=t+lt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=ci(e,t,4,s||null,Lt(c,a));Si(e,n,l,Lt(c,u)),fe(e,l);const h=l.tViews=vi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Zt(h,!1);const f=u[11].createComment("");Dr(c,u,f,h),cr(f,u),Li(u,u[l]=Di(f,u,f,h)),mt(h)&&gi(c,u,h),null!=s&&mi(u,h,a)}function Co(t){return function(t,e){return t[e]}(Ut.lFrame.contextLView,lt+t)}function Eo(t,e=N.Default){const n=qt();return null===n?mn(t,e):Ve(Ht(),n,m(t),e)}function To(t,e,n){const r=qt();return wo(r,Jt(),e)&&_i(Gt(),he(),r,t,e,r[11],n,!1),To}function Io(t,e,n,r,i){const o=i?"class":"style";zi(t,n,e.inputs[o],o,r)}function xo(t,e,n,r){const i=qt(),o=Gt(),s=lt+t,a=i[11],u=i[s]=Cr(a,e,Ut.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ci(e,t,2,i,Lt(a,o));return Si(e,n,u,Lt(a,s)),null!==u.attrs&&Zi(u,u.attrs,!1),null!==u.mergedAttrs&&Zi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Zt(c,!0);const l=c.mergedAttrs;null!==l&&we(a,u,l);const h=c.classes;null!==h&&jr(a,u,h);const f=c.styles;null!==f&&Ur(a,u,f),64!=(64&c.flags)&&Dr(o,i,u,c),0===Ut.lFrame.elementDepthCount&&cr(u,i),Ut.lFrame.elementDepthCount++,mt(c)&&(gi(o,i,c),function(t,e,n){if(pt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&mi(i,c)}function Ao(){let t=Ht();$t()?Ut.lFrame.isParent=!1:(t=t.parent,Zt(t,!1));const e=t;Ut.lFrame.elementDepthCount--;const n=Gt();n.firstCreatePass&&(fe(n,t),pt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Io(n,e,qt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Io(n,e,qt(),e.stylesWithoutHost,!1)}function Oo(t,e,n,r){xo(t,e,n,r),Ao()}function ko(){return qt()}function No(t){return!!t&&"function"==typeof t.then}function Do(t){return!!t&&"function"==typeof t.subscribe}const Po=Do;function Ro(t,e,n,r){const i=qt(),o=Gt(),s=Ht();return function(t,e,n,r,i,o,s,a){const u=mt(r),c=t.firstCreatePass&&Bi(t),l=Gi(e);let h=!0;if(3&r.type||a){const f=Nt(r,e),d=a?a(f):f,p=l.length,g=a?t=>a(Ot(t[r.index])):r.index;if(xt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Lo(r,e,0,o,!1);const t=n.listen(d,i,o);l.push(o,t),c&&c.push(i,g,p,p+1)}}else o=Lo(r,e,0,o,!0),d.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,p,s)}else o=Lo(r,e,0,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,!!n,r),Ro}function Mo(t,e,n,r){try{return!1!==n(r)}catch(i){return Hi(t,i),!1}}function Lo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Pt(t.index,e):e;0==(32&e[2])&&Fi(s);let a=Mo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Mo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Fo(t=1){return function(t){return(Ut.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ut.lFrame.contextLView))[8]}(t)}function Vo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ni(o):ii(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Uo(t[a],e)&&(u=!0,t[a+1]=r?si(n):ri(n)),a=r?ni(n):ii(n)}u&&(t[n+1]=r?ri(o):si(o))}function Uo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&un(t,e)>=0}function jo(t,e){return function(t,e,n,r){const i=qt(),o=Gt(),s=function(t){const e=Ut.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ce()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Ut.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Go(n=qo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=qo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==ii(r))return t[ni(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=qo(null,t,e,n[1],r),n=Go(n,e.attrs,r),function(t,e,n,r){t[ni(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Go(r,t[o].hostAttrs,true);return Go(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ni(s),u=ii(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||un(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ni(t[a+1]);t[r+1]=ei(e,a),0!==e&&(t[e+1]=oi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ei(a,0),0!==a&&(t[a+1]=oi(t[a+1],r)),a=r;else t[r+1]=ei(u,0),0===a?a=r:t[u+1]=oi(t[u+1],r),u=r;l&&(t[r+1]=ri(t[r+1])),Vo(t,c,r,!0),Vo(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&un(o,e)>=0&&(n[r+1]=si(n[r+1]))}(e,c,t,r),s=ei(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==Yr&&wo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Ho(1==(1&c)?Bo(u,e,n,i,ii(c),s):void 0)||(Ho(o)||function(t){return 2==(2&t)}(c)&&(o=Bo(u,null,n,i,a,s)),function(t,e,n,r,i){const o=xt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,kt(ce(),n),i,o))}(o,o.data[ce()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=f(kn(t))),t}(e),true,s)}(t,e),jo}function qo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Go(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Go(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),sn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Bo(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Yr&&(l=c?H:void 0);let h=c?an(l,r):u===r?l:void 0;if(o&&!Ho(h)&&(h=an(e,r)),Ho(h)&&(a=h,s))return a;const f=t[i+1];i=s?ni(f):ii(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=an(t,r))}return a}function Ho(t){return void 0!==t}function zo(t,e=""){const n=qt(),r=Gt(),i=t+lt,o=r.firstCreatePass?ci(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return xt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Dr(r,n,s,o),Zt(o,!1)}function Zo(t){return $o("",t,""),Zo}function $o(t,e,n){const r=qt(),i=function(t,e,n,r){return wo(t,Jt(),n)?e+b(n)+r:Yr}(r,t,e,n);return i!==Yr&&function(t,e,n){const r=kt(e,t);!function(t,e,n){xt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ce(),i),$o}function Ko(t,e,n){const r=qt();return wo(r,Jt(),e)&&_i(Gt(),he(),r,t,e,r[11],n,!0),Ko}const Qo=void 0;var Jo=["en",[["a","p"],["AM","PM"],Qo],[["AM","PM"],Qo,Qo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qo,"{1} 'at' {0}",Qo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Wo={};function Yo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ts(e);if(n)return n;const r=e.split("-")[0];if(n=ts(r),n)return n;if("en"===r)return Jo;throw new Error(`Missing locale data for the locale "${t}".`)}function Xo(t){return Yo(t)[es.PluralCase]}function ts(t){return t in Wo||(Wo[t]=G.ng&&G.ng.common&&G.ng.common.locales&&G.ng.common.locales[t]),Wo[t]}var es=(()=>((es=es||{})[es.LocaleId=0]="LocaleId",es[es.DayPeriodsFormat=1]="DayPeriodsFormat",es[es.DayPeriodsStandalone=2]="DayPeriodsStandalone",es[es.DaysFormat=3]="DaysFormat",es[es.DaysStandalone=4]="DaysStandalone",es[es.MonthsFormat=5]="MonthsFormat",es[es.MonthsStandalone=6]="MonthsStandalone",es[es.Eras=7]="Eras",es[es.FirstDayOfWeek=8]="FirstDayOfWeek",es[es.WeekendRange=9]="WeekendRange",es[es.DateFormat=10]="DateFormat",es[es.TimeFormat=11]="TimeFormat",es[es.DateTimeFormat=12]="DateTimeFormat",es[es.NumberSymbols=13]="NumberSymbols",es[es.NumberFormats=14]="NumberFormats",es[es.CurrencyCode=15]="CurrencyCode",es[es.CurrencySymbol=16]="CurrencySymbol",es[es.CurrencyName=17]="CurrencyName",es[es.Currencies=18]="Currencies",es[es.Directionality=19]="Directionality",es[es.PluralCase=20]="PluralCase",es[es.ExtraData=21]="ExtraData",es))();const ns="en-US";let rs=ns;function is(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(rs=t.toLowerCase().replace(/_/g,"-"))}function os(t,e,n,r,i){if(t=m(t),Array.isArray(t))for(let o=0;o<t.length;o++)os(t[o],e,n,r,i);else{const o=Gt(),s=qt();let a=so(t)?t:m(t.provide),u=ro(t);const c=Ht(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(so(t)||!t.multi){const r=new be(u,i,Eo),d=us(a,e,i?l:l+f,h);-1===d?(Me(Ne(c,s),o,a),ss(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=us(a,e,l+f,h),p=us(a,e,l,l+f),g=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!g){Me(Ne(c,s),o,a);const l=function(t,e,n,r,i){const o=new be(t,n,Eo);return o.multi=[],o.index=e,o.componentProviders=0,as(o,i,r&&!n),o}(i?ls:cs,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),ss(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else ss(o,t,d>-1?d:p,as(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function ss(t,e,n,r){const i=so(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function as(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function us(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function cs(t,e,n,r){return hs(this.multi,[])}function ls(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Be(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),hs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],hs(i,o);return o}function hs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function fs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Gt();if(r.firstCreatePass){const i=yt(t);os(n,r.data,r.blueprint,i,!0),os(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class ds{}class ps{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${f(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class gs{}function ms(...t){}function ys(t,e){return new bs(Nt(t,e))}gs.NULL=new ps;const vs=function(){return ys(Ht(),qt())};let bs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=vs,t})();function ws(t){return t instanceof bs?t.nativeElement:t}class _s{}let Ss=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Cs(),t})();const Cs=function(){const t=qt(),e=Pt(Ht().index,t);return function(t){return t[11]}(ft(e)?e:t)};let Es=(()=>{class t{}return t.\u0275prov=S({token:t,providedIn:"root",factory:()=>null}),t})();class Ts{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Is=new Ts("12.1.3");class xs{constructor(){}supports(t){return vo(t)}create(t){return new Os(t)}}const As=(t,e)=>e;class Os{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||As}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Ps(n,r,i)?e:n,s=Ps(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!vo(t))throw new Error(`Error trying to diff '${f(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[yo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new ks(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ds),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ds),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ks{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ns{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ds{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ns,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ps(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Rs{constructor(){}supports(t){return t instanceof Map||bo(t)}create(){return new Ms}}class Ms{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||bo(t)))throw new Error(`Error trying to diff '${f(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ls(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ls{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Fs(){return new Vs([new xs])}let Vs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Fs()),deps:[[t,new _n,new wn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=S({token:t,providedIn:"root",factory:Fs}),t})();function Us(){return new js([new Rs])}let js=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Us()),deps:[[t,new _n,new wn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=S({token:t,providedIn:"root",factory:Us}),t})();function qs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Ot(o)),dt(o))for(let t=ht;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&qs(e[1],e,n,r)}const s=n.type;if(8&s)qs(t,e,n.child,r);else if(32&s){const t=yr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Rr(e,n);if(Array.isArray(t))r.push(...t);else{const n=vr(e[16]);qs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Gs{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return qs(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(dt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Tr(t,n),on(e,n))}this._attachedToViewContainer=!1}Ir(this._lView[1],this._lView)}onDestroy(t){bi(this._lView[1],this._lView,null,t)}markForCheck(){Fi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Vi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Qt(!0);try{Vi(t,e,n)}finally{Qt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Fr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Bs extends Gs{constructor(t){super(t),this._view=t}detectChanges(){Ui(this._view)}checkNoChanges(){!function(t){Qt(!0);try{Ui(t)}finally{Qt(!1)}}(this._view)}get context(){return null}}const Hs=function(t){return function(t,e,n){if(gt(t)&&!n){const n=Pt(t.index,e);return new Gs(n,n)}return 47&t.type?new Gs(e[16],e):null}(Ht(),qt(),16==(16&t))};let zs=(()=>{class t{}return t.__NG_ELEMENT_ID__=Hs,t})();const Zs=[new Rs],$s=new Vs([new xs]),Ks=new js(Zs),Qs=function(){return Xs(Ht(),qt())};let Js=(()=>{class t{}return t.__NG_ELEMENT_ID__=Qs,t})();const Ws=Js,Ys=class extends Ws{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ui(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),hi(e,n,t),new Gs(n)}};function Xs(t,e){return 4&t.type?new Ys(e,t,ys(t,e)):null}class ta{}class ea{}const na=function(){return ua(Ht(),qt())};let ra=(()=>{class t{}return t.__NG_ELEMENT_ID__=na,t})();const ia=ra,oa=class extends ia{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return ys(this._hostTNode,this._hostLView)}get injector(){return new Ze(this._hostTNode,this._hostLView)}get parentInjector(){const t=Re(this._hostTNode,this._hostLView);if(Te(t)){const e=xe(t,this._hostLView),n=Ie(t);return new Ze(e[1].data[n+8],e)}return new Ze(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=sa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ta,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new oa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ht+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ht?(e[4]=n[i],rn(n,ht+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Mr(i,o),a=n[11],u=Nr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Fr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),rn(aa(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=sa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Tr(this._lContainer,e);n&&(on(aa(this._lContainer),e),Ir(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Tr(this._lContainer,e);return n&&null!=on(aa(this._lContainer),e)?new Gs(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function sa(t){return t[8]}function aa(t){return t[8]||(t[8]=[])}function ua(t,e){let n;const r=e[t.index];if(dt(r))n=r;else{let i;if(8&t.type)i=Ot(r);else{const n=e[11];i=n.createComment("");const r=Nt(t,e);Ar(n,Nr(n,r),i,function(t,e){return xt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Di(r,e,i,t),Li(e,n)}return new oa(n,t,e)}const ca={};class la extends gs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new da(e,this.ngModule)}}function ha(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const fa=new Ye("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>pr});class da extends ds{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Wr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ha(this.componentDef.inputs)}get outputs(){return ha(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ca,i);return o!==ca||r===ca?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(_s,At),s=i.get(Es,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(xt(t))return t.selectRootElement(e,n===F.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Cr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:pr,clean:qi,playerHandler:null,flags:0},f=vi(0,null,null,1,0,null,null,null,null,null),d=ui(null,f,h,l,null,null,o,a,s,i);let p,g;re(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=ci(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Zi(a,u,!0),null!==t&&(we(i,t,u),null!==a.classes&&jr(i,t,a.classes),null!==a.styles&&Ur(i,t,a.styles)));const c=r.createRenderer(t,e),l=ui(n,yi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Me(Ne(a,n),s,e.type),Ti(s,a),xi(a,n.length,1)),Li(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)we(a,c,["ng-version",Is.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!$r(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&we(a,c,t),e&&e.length>0&&jr(a,c,e.join(" "))}if(g=Dt(f,lt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Ht();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ai(t,r,e,li(t,e,1,null),n));const i=Be(e,t,r.directiveStart,r);cr(i,e);const o=Nt(r,e);return o&&cr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Ht();e.contentQueries(1,s,t.directiveStart)}const a=Ht();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(le(a.index),Ci(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ei(e,s)),s}(t,this.componentDef,d,h,[co]),hi(f,d,null)}finally{ue()}return new pa(this.componentType,p,ys(g,d),d,g)}}class pa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Bs(r),this.componentType=t}get injector(){return new Ze(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const ga=new Map;class ma extends ta{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new la(this);const n=ct(t),r=t[Q]||null;r&&is(r),this._bootstrapComponents=gr(n.bootstrap),this._r3Injector=to(t,e,[{provide:ta,useValue:this},{provide:gs,useValue:this.componentFactoryResolver}],f(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=uo.THROW_IF_NOT_FOUND,n=N.Default){return t===uo||t===ta||t===$i?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ya extends ea{constructor(t){super(),this.moduleType=t,null!==ct(t)&&function(t){const e=new Set;!function t(n){const r=ct(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${f(e)} vs ${f(e.name)}`)}(i,ga.get(i),n),ga.set(i,n));const o=gr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new ma(this.moduleType,t)}}function va(t){return e=>{setTimeout(t,void 0,e)}}const ba=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=va(u),a&&(a=va(a)),c&&(c=va(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function wa(){return this._results[yo()]()}class _a{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=yo(),n=_a.prototype;n[e]||(n[e]=wa)}get changes(){return this._changes||(this._changes=new ba)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=en(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Sa{constructor(t){this.queryList=t,this.matches=null}clone(){return new Sa(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ca{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ca(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ra(t,e).matches&&this.queries[e].setDirty()}}class Ea{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Ta{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ta(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ia{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ia(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,xa(e,i)),this.matchTNodeWithReadOption(t,e,Ge(e,t,i,!1,!1))}else n===Js?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ge(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===bs||r===ra||r===Js&&4&e.type)this.addMatch(e.index,-2);else{const n=Ge(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function xa(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Aa(t,e,n,r){return-1===n?function(t,e){return 11&t.type?ys(t,e):4&t.type?Xs(t,e):null}(e,t):-2===n?function(t,e,n){return n===bs?ys(e,t):n===Js?Xs(e,t):n===ra?ua(e,t):void 0}(t,e,r):Be(t,t[1],n,e)}function Oa(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Aa(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function ka(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Oa(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ht;t<s.length;t++){const e=s[t];e[17]===e[3]&&ka(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];ka(n[1],n,i,r)}}}}}return r}function Na(t){const e=qt(),n=Gt(),r=Xt();te(r+1);const i=Ra(n,r);if(t.dirty&&Rt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?ka(n,e,r,[]):Oa(n,e,i,r);t.reset(o,ws),t.notifyOnChanges()}return!0}return!1}function Da(t,e,n,r){const i=Gt();if(i.firstCreatePass){const o=Ht();(function(t,e,n){null===t.queries&&(t.queries=new Ta),t.queries.track(new Ia(e,n))})(i,new Ea(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new _a(4==(4&n));bi(t,e,r,r.destroy),null===e[19]&&(e[19]=new Ca),e[19].queries.push(new Sa(r))}(i,qt(),n)}function Pa(){return t=qt(),e=Xt(),t[19].queries[e].queryList;var t,e}function Ra(t,e){return t.queries.getByIndex(e)}const Ma=new Ye("Application Initializer");let La=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ms,this.reject=ms,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(No(e))t.push(e);else if(Po(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(mn(Ma,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const Fa=new Ye("AppId"),Va={provide:Fa,useFactory:function(){return`${Ua()}${Ua()}${Ua()}`},deps:[]};function Ua(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ja=new Ye("Platform Initializer"),qa=new Ye("Platform ID"),Ga=new Ye("appBootstrapListener");let Ba=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const Ha=new Ye("LocaleId"),za=new Ye("DefaultCurrencyCode");class Za{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const $a=function(t){return new ya(t)},Ka=$a,Qa=function(t){return Promise.resolve($a(t))},Ja=function(t){const e=$a(t),n=gr(ct(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new da(n)),t},[]);return new Za(e,n)},Wa=Ja,Ya=function(t){return Promise.resolve(Ja(t))};let Xa=(()=>{class t{constructor(){this.compileModuleSync=Ka,this.compileModuleAsync=Qa,this.compileModuleAndAllComponentsSync=Wa,this.compileModuleAndAllComponentsAsync=Ya}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const tu=(()=>Promise.resolve(0))();function eu(t){"undefined"==typeof Zone?tu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class nu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ba(!1),this.onMicrotaskEmpty=new ba(!1),this.onStable=new ba(!1),this.onError=new ba(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=G.requestAnimationFrame,e=G.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(G,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ou(t),t.isCheckStableRunning=!0,iu(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ou(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return su(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),au(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return su(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),au(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,ou(t),iu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(nu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,ru,ms,ms);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const ru={};function iu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ou(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function su(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function au(t){t._nesting--,iu(t)}class uu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ba,this.onMicrotaskEmpty=new ba,this.onStable=new ba,this.onError=new ba}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let cu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nu.assertNotInAngularZone(),eu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())eu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(mn(nu))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})(),lu=(()=>{class t{constructor(){this._applications=new Map,pu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return pu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();class hu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function fu(t){pu=t}let du,pu=new hu,gu=!0,mu=!1;function yu(){return mu=!0,gu}function vu(){if(mu)throw new Error("Cannot enable prod mode after platform setup.");gu=!1}const bu=new Ye("AllowMultipleToken");class wu{constructor(t,e){this.name=t,this.token=e}}function _u(t,e,n=[]){const r=`Platform: ${e}`,i=new Ye(r);return(e=[])=>{let o=Su();if(!o||o.injector.get(bu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Qi,useValue:"platform"});!function(t){if(du&&!du.destroyed&&!du.injector.get(bu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");du=t.get(Cu);const e=t.get(ja,null);e&&e.forEach(t=>t())}(uo.create({providers:t,name:r}))}return function(t){const e=Su();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Su(){return du&&!du.destroyed?du:null}let Cu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new uu:("zone.js"===t?void 0:t)||new nu({enableLongStackTrace:yu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:nu,useValue:n}];return n.run(()=>{const e=uo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(dr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Iu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return No(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(La);return t.runInitializers(),t.donePromise.then(()=>(is(i.injector.get(Ha,ns)||ns),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Eu({},e);return function(t,e,n){const r=new ya(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Tu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${f(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(mn(uo))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function Eu(t,e){return Array.isArray(e)?e.reduce(Eu,t):Object.assign(Object.assign({},t),e)}let Tu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{nu.assertNotInAngularZone(),eu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{nu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(l,h.pipe(t=>{return(0,u.x)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.N);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ds?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ta),i=n.create(uo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(cu,null),a=s&&i.injector.get(lu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Iu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Iu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ga,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(mn(nu),mn(uo),mn(dr),mn(gs),mn(La))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function Iu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class xu{}class Au{}const Ou={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let ku=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Ou}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>Nu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Nu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(mn(Xa),mn(Au,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function Nu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Du=function(t){return null},Pu=_u(null,"core",[{provide:qa,useValue:"unknown"},{provide:Cu,deps:[uo]},{provide:lu,deps:[]},{provide:Ba,deps:[]}]),Ru=[{provide:Tu,useClass:Tu,deps:[nu,uo,dr,gs,La]},{provide:fa,deps:[nu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:La,useClass:La,deps:[[new wn,Ma]]},{provide:Xa,useClass:Xa,deps:[]},Va,{provide:Vs,useFactory:function(){return $s},deps:[]},{provide:js,useFactory:function(){return Ks},deps:[]},{provide:Ha,useFactory:function(t){return is(t=t||"undefined"!=typeof $localize&&$localize.locale||ns),t},deps:[[new bn(Ha),new wn,new _n]]},{provide:za,useValue:"USD"}];let Mu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(mn(Tu))},t.\u0275mod=rt({type:t}),t.\u0275inj=C({providers:Ru}),t})()},57:(t,e,n)=>{"use strict";n.d(e,{hO:()=>I,xv:()=>b,Dh:()=>v,HU:()=>d,GT:()=>y,sI:()=>E,on:()=>_,ss:()=>p,pX:()=>m,yq:()=>S});var r=n(7771),i=n(3637),o=n(3342),s=n(3101),a=n(309),u=n(3018),c=n(2329);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe((0,s.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),b=new u.OlP("angularfire2.app.nameOrConfig"),w=new u.GfV("6.1.5");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const S=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:_,deps:[v,u.R0b,[new u.FiY,b]]};let I=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",w.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[T]}),t})()},9759:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var r,i,o=n(4762),s=n(4685),a=n(6034),u=n(300),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.r3)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.28",void 0),t.registerVersion("fire-js","")}(w);const _=w},6034:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u});var r=n(4762),i=n(4685),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=(0,r.XA)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},300:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>s,Yd:()=>h,Ub:()=>f,Am:()=>d});var o=[],s=(()=>(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(s||(s={})),s))(),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},4685:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>w,r3:()=>C,Sg:()=>u,ne:()=>E,p$:()=>o,ZB:()=>s,m9:()=>x,z$:()=>c,jU:()=>f,ru:()=>d,d:()=>g,w1:()=>m,uI:()=>l,UG:()=>h,b$:()=>p,G6:()=>v,Mn:()=>y});var r=n(4762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function o(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return c().indexOf("Electron/")>=0}function m(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return c().indexOf("MSAppHost/")>=0}function v(){return!h()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var b=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,w.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),w=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?_(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new b(i,a,r);return u},t}();function _(t,e){return t.replace(S,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var S=/\{\$([^}]+)}/g;function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E(t,e){var n=new T(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var T=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function I(){}function x(t){return t&&t._delegate?t._delegate:t}},2329:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(9759),i="8.8.0";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},7574:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(7393),i=n(9181),o=n(6490),s=n(6554),a=n(4487),u=n(2494);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},6490:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(2494),i=n(4449);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},9765:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(7574),i=n(7393),o=n(5319),s=n(7971),a=n(8858),u=n(9181);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},8858:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(5319);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},7393:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(9105),i=n(6490),o=n(5319),s=n(9181),a=n(2494),u=n(4449);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},5319:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(9796),i=n(1555),o=n(9105);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if((0,o.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof s?c(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof s?t=t.concat(c(h.errors)):t.push(h)}}}if(t)throw new s(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var u;function c(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>u});var r=n(7393),i=n(7574),o=n(7444);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,o.s)(t)(e)}catch(r){e.error(r)}return n}},2441:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(9765),i=n(7574),o=n(5319),s=n(1307);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.w.EMPTY)),t}refCount(){return(0,s.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},9193:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>o});var r=n(7574);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},4402:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(7574),i=n(7444),o=n(5319),s=n(6554),a=n(4087),u=n(377),c=n(4072),l=n(9489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},6693:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(7574),i=n(5015),o=n(4087);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},6682:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(7574),i=n(4869),o=n(3282),s=n(6693);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},5917:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(4869),i=n(6693),o=n(4087);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},8002:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(7393);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},3282:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var r=n(9773),i=n(4487);function o(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},9773:(t,e,n)=>{"use strict";n.d(e,{zg:()=>s});var r=n(8002),i=n(4402),o=n(5345);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(7393),i=n(9193),o=n(5917),s=n(7574);class a{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return t=this.error,new s.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new a("N",t):a.undefinedValueNotification}static createError(t){return new a("E",void 0,t)}static createComplete(){return a.completeNotification}}function u(t,e=0){return function(n){return n.lift(new c(t,e))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1307:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(7393);function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},3101:(t,e,n)=>{"use strict";n.d(e,{R:()=>p});var r=n(7574);let i=1;const o=Promise.resolve(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(6465),l=n(6102);const h=new class extends l.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}});var f=n(9796);class d extends r.y{constructor(t,e=0,n=h){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,f.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(t,e=0,n=h){return new d(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(d.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new d(e,this.delay,this.scheduler).subscribe(t)}}},3342:(t,e,n)=>{"use strict";n.d(e,{b:()=>s});var r=n(7393);function i(){}var o=n(9105);function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,o.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},4087:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(7574),i=n(5319);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(5319);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},6102:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},3637:(t,e,n)=>{"use strict";n.d(e,{z:()=>i});var r=n(6465);const i=new(n(6102).v)(r.o)},7771:(t,e,n)=>{"use strict";n.d(e,{c:()=>s,N:()=>o});var r=n(6465),i=n(6102);const o=new class extends i.v{}(class extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),s=o},377:(t,e,n)=>{"use strict";n.d(e,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4449:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},4487:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},9796:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},9489:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},9105:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},1555:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},4072:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},4869:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},7444:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(5015),i=n(4449),o=n(377),s=n(6554),a=n(9489),u=n(4072),c=n(1555);const l=t=>{if(t&&"function"==typeof t[s.L])return l=t,t=>{const e=l[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},5015:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},2236:(t,e,n)=>{"use strict";var r=n(3018);let i=null;function o(){return i}const s=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l((0,r.LFG)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(s).location;return new b((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(m),r.LFG(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new _((0,r.LFG)(m),(0,r.LFG)(a))}function C(t){return t.replace(/\/index.html$/,"")}var E=(()=>((E=E||{})[E.Zero=0]="Zero",E[E.One=1]="One",E[E.Two=2]="Two",E[E.Few=3]="Few",E[E.Many=4]="Many",E[E.Other=5]="Other",E))();const T=r.kL8;class I{}let x=(()=>{class t extends I{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(T(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class A{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let O=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Gd){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new A(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new k(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new k(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class k{constructor(t,e){this.record=t,this.view=e}}let N=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new D,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){P("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){P("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class D{constructor(){this.$implicit=null,this.ngIf=null}}function P(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}let R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:I,useClass:x}]}),t})(),M=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new L((0,r.LFG)(s),window)}),t})();class L{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=F(this.window.history)||F(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(Gd){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Gd){return!1}}}function F(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class V extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new V,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(j=j||document.querySelector("base"),j?j.getAttribute("href"):null);return null==e?null:function(t){U=U||document.createElement("a"),U.setAttribute("href",t);const e=U.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){j=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let U,j=null;const q=new r.OlP("TRANSITION_ID"),G=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[q,s,r.zs3],multi:!0}];class B{static init(){(0,r.VLi)(new B)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let H=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const z=new r.OlP("EventManagerPlugins");let Z=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(z),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class ${constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let K=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Q=(()=>{class t extends K{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(J),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(J))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function J(t){o().remove(t)}const W={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Y=/%COMP%/g;function X(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?X(t,i,n):(i=i.replace(Y,t),n.push(i))}return n}function tt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let et=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new nt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new rt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new it(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=X(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Z),r.LFG(Q),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class nt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(W[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=W[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=W[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,tt(n)):this.eventManager.addEventListener(t,e,tt(n))}}class rt extends nt{constructor(t,e,n,r){super(t),this.component=n;const i=X(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Y,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Y,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class it extends nt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=X(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ot=(()=>{class t extends ${constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const st=["alt","control","meta","shift"],at={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ut={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ct={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let lt=(()=>{class t extends ${constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(st.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ut.hasOwnProperty(e)&&(e=ut[e]))}return at[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),st.forEach(r=>{r!=n&&(0,ct[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ht=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){V.makeCurrent(),B.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),ft=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:z,useClass:ot,multi:!0,deps:[s,r.R0b,r.Lbi]},{provide:z,useClass:lt,multi:!0,deps:[s]},[],{provide:et,useClass:et,deps:[Z,Q,r.AFp]},{provide:r.FYo,useExisting:et},{provide:K,useExisting:Q},{provide:Q,useClass:Q,deps:[s]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:Z,useClass:Z,deps:[z,r.R0b]},{provide:class{},useClass:H,deps:[]},[]];let dt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:q,useExisting:r.AFp},G]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:ft,imports:[R,r.hGG]}),t})();"undefined"!=typeof window&&window;var pt=n(57),gt=n(3637),mt=n(7574),yt=n(4402),vt=n(5917),bt=n(3282);function wt(...t){return(0,bt.J)(1)((0,vt.of)(...t))}var _t=n(4869);function St(...t){const e=t[t.length-1];return(0,_t.K)(e)?(t.pop(),n=>wt(t,n,e)):e=>wt(t,e)}var Ct=n(7393);function Et(){return t=>t.lift(new Tt)}class Tt{call(t,e){return e.subscribe(new It(t))}}class It extends Ct.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var xt=n(8002);function At(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Ot(t,e,n))}}class Ot{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new kt(t,this.accumulator,this.seed,this.hasSeed))}}class kt extends Ct.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class Nt{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Dt(t,this.compare,this.keySelector))}}class Dt extends Ct.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function Pt(t,e){return function(n){return n.lift(new Rt(t,e))}}class Rt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Mt(t,this.predicate,this.thisArg))}}class Mt extends Ct.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var Lt=n(309),Ft=n(2329),Vt=n(9759),Ut=n(4762),jt=n(4685),qt=n(300),Gt=function(t,e){return(Gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Bt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ht,zt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Zt=Zt||{},$t=zt||self;function Kt(){}function Qt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Jt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Wt="closure_uid_"+(1e9*Math.random()>>>0),Yt=0;function Xt(t,e,n){return t.call.apply(t.bind,arguments)}function te(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ee(t,e,n){return(ee=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xt:te).apply(null,arguments)}function ne(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function re(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ie(){this.s=this.s,this.o=this.o}var oe={};ie.prototype.s=!1,ie.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Wt)&&t[Wt]||(t[Wt]=++Yt)}(this);delete oe[t]}},ie.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var se=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ae=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ue(t){return Array.prototype.concat.apply([],arguments)}function ce(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function le(t){return/^[\s\xa0]*$/.test(t)}var he,fe=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function de(t,e){return-1!=t.indexOf(e)}function pe(t,e){return t<e?-1:t>e?1:0}t:{var ge=$t.navigator;if(ge){var me=ge.userAgent;if(me){he=me;break t}}he=""}function ye(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ve(t){var e={};for(var n in t)e[n]=t[n];return e}var be="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function we(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<be.length;o++)n=be[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _e(t){return _e[" "](t),t}_e[" "]=Kt;var Se,Ce,Ee=de(he,"Opera"),Te=de(he,"Trident")||de(he,"MSIE"),Ie=de(he,"Edge"),xe=Ie||Te,Ae=de(he,"Gecko")&&!(de(he.toLowerCase(),"webkit")&&!de(he,"Edge"))&&!(de(he,"Trident")||de(he,"MSIE"))&&!de(he,"Edge"),Oe=de(he.toLowerCase(),"webkit")&&!de(he,"Edge");function ke(){var t=$t.document;return t?t.documentMode:void 0}t:{var Ne="",De=(Ce=he,Ae?/rv:([^\);]+)(\)|;)/.exec(Ce):Ie?/Edge\/([\d\.]+)/.exec(Ce):Te?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ce):Oe?/WebKit\/(\S+)/.exec(Ce):Ee?/(?:Version)[ \/]?(\S+)/.exec(Ce):void 0);if(De&&(Ne=De?De[1]:""),Te){var Pe=ke();if(null!=Pe&&Pe>parseFloat(Ne)){Se=String(Pe);break t}}Se=Ne}var Re={};var Me=$t.document&&Te&&(ke()||parseInt(Se,10))||void 0,Le=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{$t.addEventListener("test",Kt,e),$t.removeEventListener("test",Kt,e)}catch(n){}return t}();function Fe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Ve(t,e){if(Fe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ae){t:{try{_e(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ue[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ve.Z.h.call(this)}}Fe.prototype.h=function(){this.defaultPrevented=!0},re(Ve,Fe);var Ue={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),qe=0;function Ge(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++qe,this.ca=this.fa=!1}function Be(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function He(t){this.src=t,this.g={},this.h=0}function ze(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=se(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Be(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Ze(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}He.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=Ze(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new Ge(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var $e="closure_lm_"+(1e6*Math.random()|0),Ke={};function Qe(t,e,n,r,i){if(r&&r.once)return We(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Qe(t,e[o],n,r,i);return null}return n=on(n),t&&t[je]?t.N(e,n,Jt(r)?!!r.capture:!!r,i):Je(t,e,n,!1,r,i)}function Je(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Jt(i)?!!i.capture:!!i,a=nn(t);if(a||(t[$e]=a=new He(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=en;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Le||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(tn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function We(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)We(t,e[o],n,r,i);return null}return n=on(n),t&&t[je]?t.O(e,n,Jt(r)?!!r.capture:!!r,i):Je(t,e,n,!0,r,i)}function Ye(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ye(t,e[o],n,r,i);else r=Jt(r)?!!r.capture:!!r,n=on(n),t&&t[je]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Ze(o=t.g[e],n,r,i))&&(Be(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=nn(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ze(e,n,r,i)),(n=-1<t?e[t]:null)&&Xe(n))}function Xe(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[je])ze(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=nn(e))?(ze(n,t),0==n.h&&(n.src=null,e[$e]=null)):Be(t)}}}function tn(t){return t in Ke?Ke[t]:Ke[t]="on"+t}function en(t,e){if(t.ca)t=!0;else{e=new Ve(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Xe(t),t=n.call(r,e)}return t}function nn(t){return(t=t[$e])instanceof He?t:null}var rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function on(t){return"function"==typeof t?t:(t[rn]||(t[rn]=function(e){return t.handleEvent(e)}),t[rn])}function sn(){ie.call(this),this.i=new He(this),this.P=this,this.I=null}function an(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Fe(e,t);else if(e instanceof Fe)e.target=e.target||t;else{var i=e;we(e=new Fe(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=un(s,r,!0,e)&&i}if(i=un(s=e.g=t,r,!0,e)&&i,i=un(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=un(s=e.g=n[o],r,!1,e)&&i}function un(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&ze(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}re(sn,ie),sn.prototype[je]=!0,sn.prototype.removeEventListener=function(t,e,n,r){Ye(this,t,e,n,r)},sn.prototype.M=function(){if(sn.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Be(n[r]);delete e.g[t],e.h--}}this.I=null},sn.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},sn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var cn=$t.JSON.stringify;function ln(){var t=vn,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var hn,fn=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=dn.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),dn=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new pn},function(t){return t.reset()}),pn=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function gn(t){$t.setTimeout(function(){throw t},0)}function mn(t,e){hn||function(){var t=$t.Promise.resolve(void 0);hn=function(){t.then(bn)}}(),yn||(hn(),yn=!0),vn.add(t,e)}var yn=!1,vn=new fn;function bn(){for(var t;t=ln();){try{t.h.call(t.g)}catch(n){gn(n)}var e=dn;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}yn=!1}function wn(t,e){sn.call(this),this.h=t||1,this.g=e||$t,this.j=ee(this.kb,this),this.l=Date.now()}function _n(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Sn(t,e,n){if("function"==typeof t)n&&(t=ee(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ee(t.handleEvent,t)}return 2147483647<Number(e)?-1:$t.setTimeout(t,e||0)}function Cn(t){t.g=Sn(function(){t.g=null,t.i&&(t.i=!1,Cn(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}re(wn,sn),(Ht=wn.prototype).da=!1,Ht.S=null,Ht.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),an(this,"tick"),this.da&&(_n(this),this.start()))}},Ht.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ht.M=function(){wn.Z.M.call(this),_n(this),delete this.g};var En=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Gt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Cn(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(ie);function Tn(t){ie.call(this),this.h=t,this.g={}}re(Tn,ie);var In=[];function xn(t,e,n,r){Array.isArray(n)||(n&&(In[0]=n.toString()),n=In);for(var i=0;i<n.length;i++){var o=Qe(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function An(t){ye(t.g,function(t,e){this.g.hasOwnProperty(e)&&Xe(t)},t),t.g={}}function On(){this.g=!0}function kn(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return cn(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Tn.prototype.M=function(){Tn.Z.M.call(this),An(this)},Tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},On.prototype.Aa=function(){this.g=!1},On.prototype.info=function(){};var Nn={},Dn=null;function Pn(){return Dn=Dn||new sn}function Rn(t){Fe.call(this,Nn.Ma,t)}function Mn(t){var e=Pn();an(e,new Rn(e,t))}function Ln(t,e){Fe.call(this,Nn.STAT_EVENT,t),this.stat=e}function Fn(t){var e=Pn();an(e,new Ln(e,t))}function Vn(t,e){Fe.call(this,Nn.Na,t),this.size=e}function Un(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){t()},e)}Nn.Ma="serverreachability",re(Rn,Fe),Nn.STAT_EVENT="statevent",re(Ln,Fe),Nn.Na="timingevent",re(Vn,Fe);var jn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},qn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Gn(){}function Bn(){}Gn.prototype.h=null;var Hn,zn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Zn(){Fe.call(this,"d")}function $n(){Fe.call(this,"c")}function Kn(){}function Qn(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Tn(this),this.P=Wn,this.W=new wn(t=xe?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}re(Zn,Fe),re($n,Fe),re(Kn,Gn),Kn.prototype.g=function(){return new XMLHttpRequest},Kn.prototype.i=function(){return{}},Hn=new Kn;var Wn=45e3,Yn={},Xn={};function tr(t,e,n){t.K=1,t.v=Cr(yr(e)),t.s=n,t.U=!0,er(t,null)}function er(t,e){t.F=Date.now(),or(t),t.A=yr(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Lr(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Jn,t.g=Fi(t.l,n?e:null,!t.s),0<t.O&&(t.L=new En(ee(t.Ia,t,t.g),t.O)),xn(t.V,t.g,"readystatechange",t.gb),e=t.H?ve(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Mn(1),function(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.u,t.A,t.m,t.X,t.s)}function nr(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function rr(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=ir(t,n))==Xn){4==e&&(t.o=4,Fn(14),i=!1),kn(t.j,t.m,null,"[Incomplete Response]");break}if(r==Yn){t.o=4,Fn(15),kn(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}kn(t.j,t.m,r,null),lr(t,r)}nr(t)&&r!=Xn&&r!=Yn&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Fn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Oi(e),e.L=!0,Fn(11))):(kn(t.j,t.m,n,"[Invalid Chunked Response]"),cr(t),ur(t))}function ir(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Xn:(n=Number(e.substring(n,r)),isNaN(n)?Yn:(r+=1)+n>e.length?Xn:(e=e.substr(r,n),t.C=r+n,e))}function or(t){t.Y=Date.now()+t.P,sr(t,t.P)}function sr(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Un(ee(t.eb,t),e)}function ar(t){t.B&&($t.clearTimeout(t.B),t.B=null)}function ur(t){0==t.l.G||t.I||Di(t.l,t)}function cr(t){ar(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,_n(t.W),An(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function lr(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Br(n.i,t)))if(n.I=t.N,!t.J&&Br(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Ni(n),wi(n)}Ai(n),Fn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Un(ee(n.ab,n),6e3));if(1>=Gr(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Ri(n,11)}else if((t.J||n.g==t)&&Ni(n),!le(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(de(l,"spdy")||de(l,"quic")||de(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Hr(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Sr(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=Li(r,r.H?r.la:null,r.W),d.J){zr(r.i,d);var p=d,g=r.K;g&&p.setTimeout(g),p.B&&(ar(p),or(p)),r.g=d}else xi(r);0<n.l.length&&Ci(n)}else"stop"!=o[0]&&"close"!=o[0]||Ri(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Ri(n,7):bi(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Mn(4)}catch(o){}}function hr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Qt(t)||"string"==typeof t)ae(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Qt(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Qt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function fr(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof fr)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function dr(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];pr(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)pr(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function pr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ht=Qn.prototype).setTimeout=function(t){this.P=t},Ht.gb=function(t){t=t.target;var e=this.L;e&&3==pi(t)?e.l():this.Ia(t)},Ht.Ia=function(t){try{if(t==this.g)t:{var e=pi(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||xe||this.g&&(this.h.h||this.g.ga()||gi(this.g)))){this.I||4!=e||7==n||Mn(8==n||0>=r?3:2),ar(this);var i=this.g.ba();this.N=i;e:if(nr(this)){var o=gi(this.g);t="";var s=o.length,a=4==pi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){cr(this),ur(this);var u="";break e}this.h.i=new $t.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!le(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Fn(12),cr(this),ur(this);break t}kn(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,lr(this,i)}this.U?(rr(this,e,u),xe&&this.i&&3==e&&(xn(this.V,this.W,"tick",this.fb),this.W.start())):(kn(this.j,this.m,u,null),lr(this,u)),4==e&&cr(this),this.i&&!this.I&&(4==e?Di(this.l,this):(this.i=!1,or(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Fn(12)):(this.o=0,Fn(13)),cr(this),ur(this)}}}catch(e){}},Ht.fb=function(){if(this.g){var t=pi(this.g),e=this.g.ga();this.C<e.length&&(ar(this),rr(this,t,e),this.i&&4!=t&&or(this))}},Ht.cancel=function(){this.I=!0,cr(this)},Ht.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Mn(3),Fn(17)),cr(this),this.o=2,ur(this)):sr(this,this.Y-t)},(Ht=fr.prototype).R=function(){dr(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Ht.T=function(){return dr(this),this.g.concat()},Ht.get=function(t,e){return pr(this.h,t)?this.h[t]:e},Ht.set=function(t,e){pr(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Ht.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var gr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mr(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof mr){this.g=void 0!==e?e:t.g,vr(this,t.j),this.s=t.s,br(this,t.i),wr(this,t.m),this.l=t.l,e=t.h;var n=new Dr;n.i=e.i,e.g&&(n.g=new fr(e.g),n.h=e.h),_r(this,n),this.o=t.o}else t&&(n=String(t).match(gr))?(this.g=!!e,vr(this,n[1]||"",!0),this.s=Er(n[2]||""),br(this,n[3]||"",!0),wr(this,n[4]),this.l=Er(n[5]||"",!0),_r(this,n[6]||"",!0),this.o=Er(n[7]||"")):(this.g=!!e,this.h=new Dr(null,this.g))}function yr(t){return new mr(t)}function vr(t,e,n){t.j=n?Er(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function br(t,e,n){t.i=n?Er(e,!0):e}function wr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function _r(t,e,n){e instanceof Dr?(t.h=e,function(t,e){e&&!t.j&&(Pr(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Rr(this,e),Lr(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=Tr(e,kr)),t.h=new Dr(e,t.g))}function Sr(t,e,n){t.h.set(e,n)}function Cr(t){return Sr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Er(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Tr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ir),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ir(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}mr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Tr(e,xr,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Tr(e,xr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Tr(n,"/"==n.charAt(0)?Or:Ar,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Tr(n,Nr)),t.join("")};var xr=/[#\/\?@]/g,Ar=/[#\?:]/g,Or=/[#\?]/g,kr=/[#\?@]/g,Nr=/#/g;function Dr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Pr(t){t.g||(t.g=new fr,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Rr(t,e){Pr(t),e=Fr(t,e),pr(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,pr((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&dr(t)))}function Mr(t,e){return Pr(t),e=Fr(t,e),pr(t.g.h,e)}function Lr(t,e,n){Rr(t,e),0<n.length&&(t.i=null,t.g.set(Fr(t,e),ce(n)),t.h+=n.length)}function Fr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Ht=Dr.prototype).add=function(t,e){Pr(this),this.i=null,t=Fr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Ht.forEach=function(t,e){Pr(this),this.g.forEach(function(n,r){ae(n,function(n){t.call(e,n,r,this)},this)},this)},Ht.T=function(){Pr(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ht.R=function(t){Pr(this);var e=[];if("string"==typeof t)Mr(this,t)&&(e=ue(e,this.g.get(Fr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=ue(e,t[n])}return e},Ht.set=function(t,e){return Pr(this),this.i=null,Mr(this,t=Fr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Ht.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Ht.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Vr=function(t,e){this.h=t,this.g=e};function Ur(t){this.l=t||jr,t=$t.PerformanceNavigationTiming?0<(t=$t.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!($t.g&&$t.g.Ea&&$t.g.Ea()&&$t.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var jr=10;function qr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Gr(t){return t.h?1:t.g?t.g.size:0}function Br(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Hr(t,e){t.g?t.g.add(e):t.h=e}function zr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Zr(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Bt(t.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ce(t.i)}function $r(){}function Kr(){this.g=new $r}function Qr(t,e,n){var r=n||"";try{hr(t,function(t,n){var i=t;Jt(t)&&(i=cn(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(ig){throw e.push(r+"type="+encodeURIComponent("_badmap")),ig}}function Jr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Wr(t){this.l=t.$b||null,this.j=t.ib||!1}function Yr(t,e){sn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Xr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ur.prototype.cancel=function(){var t,e;if(this.i=Zr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Bt(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},$r.prototype.stringify=function(t){return $t.JSON.stringify(t,void 0)},$r.prototype.parse=function(t){return $t.JSON.parse(t,void 0)},re(Wr,Gn),Wr.prototype.g=function(){return new Yr(this.l,this.j)},Wr.prototype.i=function(t){return function(){return t}}({}),re(Yr,sn);var Xr=0;function ti(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function ei(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ni(t)}function ni(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Ht=Yr.prototype).open=function(t,e){if(this.readyState!=Xr)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ni(this)},Ht.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||$t).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ht.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ei(this)),this.readyState=Xr},Ht.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==$t.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ti(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Ht.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ei(this):ni(this),3==this.readyState&&ti(this)}},Ht.Ua=function(t){this.g&&(this.response=this.responseText=t,ei(this))},Ht.Ta=function(t){this.g&&(this.response=t,ei(this))},Ht.ha=function(){this.g&&ei(this)},Ht.setRequestHeader=function(t,e){this.v.append(t,e)},Ht.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Ht.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Yr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var ri=$t.JSON.parse;function ii(t){sn.call(this),this.headers=new fr,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=oi,this.K=this.L=!1}re(ii,sn);var oi="",si=/^https?$/i,ai=["POST","PUT"];function ui(t){return"content-type"==t.toLowerCase()}function ci(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,li(t),fi(t)}function li(t){t.D||(t.D=!0,an(t,"complete"),an(t,"error"))}function hi(t){if(t.h&&void 0!==Zt&&(!t.C[1]||4!=pi(t)||2!=t.ba()))if(t.v&&4==pi(t))Sn(t.Fa,0,t);else if(an(t,"readystatechange"),4==pi(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(gr)[1]||null;if(!o&&$t.self&&$t.self.location){var s=$t.self.location.protocol;o=s.substr(0,s.length-1)}i=!si.test(o?o.toLowerCase():"")}e=i}if(e)an(t,"complete"),an(t,"success");else{t.m=6;try{var a=2<pi(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",li(t)}}finally{fi(t)}}}function fi(t,e){if(t.g){di(t);var n=t.g,r=t.C[0]?Kt:null;t.g=null,t.C=null,e||an(t,"ready");try{n.onreadystatechange=r}catch(ig){}}}function di(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&($t.clearTimeout(t.A),t.A=null)}function pi(t){return t.g?t.g.readyState:0}function gi(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case oi:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function mi(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ye(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Sr(t,e,n))}function yi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function vi(t){this.za=0,this.l=[],this.h=new On,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=yi("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=yi("baseRetryDelayMs",5e3,t),this.$a=yi("retryDelaySeedMs",1e4,t),this.Ya=yi("forwardChannelMaxRetries",2,t),this.ra=yi("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Ur(t&&t.concurrentRequestLimit),this.Ca=new Kr,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function bi(t){if(_i(t),3==t.G){var e=t.V++,n=yr(t.F);Sr(n,"SID",t.J),Sr(n,"RID",e),Sr(n,"TYPE","terminate"),Ti(t,n),(e=new Qn(t,t.h,e,void 0)).K=2,e.v=Cr(yr(n)),n=!1,$t.navigator&&$t.navigator.sendBeacon&&(n=$t.navigator.sendBeacon(e.v.toString(),"")),!n&&$t.Image&&((new Image).src=e.v,n=!0),n||(e.g=Fi(e.l,null),e.g.ea(e.v)),e.F=Date.now(),or(e)}Mi(t)}function wi(t){t.g&&(Oi(t),t.g.cancel(),t.g=null)}function _i(t){wi(t),t.u&&($t.clearTimeout(t.u),t.u=null),Ni(t),t.i.cancel(),t.m&&("number"==typeof t.m&&$t.clearTimeout(t.m),t.m=null)}function Si(t,e){t.l.push(new Vr(t.Za++,e)),3==t.G&&Ci(t)}function Ci(t){qr(t.i)||t.m||(t.m=!0,mn(t.Ha,t),t.C=0)}function Ei(t,e){var n;n=e?e.m:t.V++;var r=yr(t.F);Sr(r,"SID",t.J),Sr(r,"RID",n),Sr(r,"AID",t.U),Ti(t,r),t.o&&t.s&&mi(r,t.o,t.s),n=new Qn(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Ii(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Hr(t.i,n),tr(n,r,e)}function Ti(t,e){t.j&&hr({},function(t,n){Sr(e,n,t)})}function Ii(t,e,n){n=Math.min(t.l.length,n);var r=t.j?ee(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].h)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{Qr(l,s,"req"+c+"_")}catch(yo){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function xi(t){t.g||t.u||(t.Y=1,mn(t.Ga,t),t.A=0)}function Ai(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Un(ee(t.Ga,t),Pi(t,t.A)),t.A++,0))}function Oi(t){null!=t.B&&($t.clearTimeout(t.B),t.B=null)}function ki(t){t.g=new Qn(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=yr(t.oa);Sr(e,"RID","rpc"),Sr(e,"SID",t.J),Sr(e,"CI",t.N?"0":"1"),Sr(e,"AID",t.U),Ti(t,e),Sr(e,"TYPE","xmlhttp"),t.o&&t.s&&mi(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Cr(yr(e)),n.s=null,n.U=!0,er(n,t)}function Ni(t){null!=t.v&&($t.clearTimeout(t.v),t.v=null)}function Di(t,e){var n=null;if(t.g==e){Ni(t),Oi(t),t.g=null;var r=2}else{if(!Br(t.i,e))return;n=e.D,zr(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;an(r=Pn(),new Vn(r,n,e,i)),Ci(t)}else xi(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Gr(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Un(ee(t.Ha,t,e),Pi(t,t.C)),t.C++,0)))}(t,e)||2==r&&Ai(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ri(t,5);break;case 4:Ri(t,10);break;case 3:Ri(t,6);break;default:Ri(t,2)}}function Pi(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Ri(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=ee(t.jb,t);n||(n=new mr("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||vr(n,"https"),Cr(n)),function(t,e){var n=new On;if($t.Image){var r=new Image;r.onload=ne(Jr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ne(Jr,n,r,"TestLoadImage: error",!1,e),r.onabort=ne(Jr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ne(Jr,n,r,"TestLoadImage: timeout",!1,e),$t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Fn(2);t.G=0,t.j&&t.j.va(e),Mi(t),_i(t)}function Mi(t){t.G=0,t.I=-1,t.j&&(0==Zr(t.i).length&&0==t.l.length||(t.i.i.length=0,ce(t.l),t.l.length=0),t.j.ua())}function Li(t,e,n){var r=function(t){return t instanceof mr?yr(t):new mr(t,void 0)}(n);if(""!=r.i)e&&br(r,e+"."+r.i),wr(r,r.m);else{var i=$t.location;r=function(t,e,n,r){var i=new mr(null,void 0);return t&&vr(i,t),e&&br(i,e),n&&wr(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&ye(t.aa,function(t,e){Sr(r,e,t)}),n=t.sa,(e=t.D)&&n&&Sr(r,e,n),Sr(r,"VER",t.ma),Ti(t,r),r}function Fi(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ii(n&&t.Ba&&!t.qa?new Wr({ib:!0}):t.qa)).L=t.H,e}function Vi(){}function Ui(){if(Te&&!(10<=Number(Me)))throw Error("Environmental error: no available transport.")}function ji(t,e){sn.call(this),this.g=new vi(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!le(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!le(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Bi(this)}function qi(t){Zn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Gi(){$n.call(this),this.status=1}function Bi(t){this.g=t}(Ht=ii.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Hn.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:Hn),this.g.onreadystatechange=ee(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void ci(this,o)}t=n||"";var i=new fr(this.headers);r&&hr(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=ui,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=$t.FormData&&t instanceof $t.FormData,!(0<=se(ai,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{di(this),0<this.B&&((this.K=function(t){return Te&&function(){return t=Re,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=fe(String(Se)).split("."),n=fe("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=pe(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||pe(0==o[2].length,0==s[2].length)||pe(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ee(this.pa,this)):this.A=Sn(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){ci(this,o)}},Ht.pa=function(){void 0!==Zt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,an(this,"timeout"),this.abort(8))},Ht.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,an(this,"complete"),an(this,"abort"),fi(this))},Ht.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fi(this,!0)),ii.Z.M.call(this)},Ht.Fa=function(){this.s||(this.F||this.v||this.l?hi(this):this.cb())},Ht.cb=function(){hi(this)},Ht.ba=function(){try{return 2<pi(this)?this.g.status:-1}catch(Ce){return-1}},Ht.ga=function(){try{return this.g?this.g.responseText:""}catch(Ce){return""}},Ht.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ri(e)}},Ht.Da=function(){return this.m},Ht.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ht=vi.prototype).ma=8,Ht.G=1,Ht.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Ht.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Qn(this,this.h,t,void 0),n=this.s;if(this.P&&(n?we(n=ve(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Ii(this,e,r),Sr(i=yr(this.F),"RID",t),Sr(i,"CVER",22),this.D&&Sr(i,"X-HTTP-Session-Id",this.D),Ti(this,i),this.o&&n&&mi(i,this.o,n),Hr(this.i,e),this.Ra&&Sr(i,"TYPE","init"),this.ja?(Sr(i,"$req",r),Sr(i,"SID","null"),e.$=!0,tr(e,i,null)):tr(e,i,r),this.G=2}}else 3==this.G&&(t?Ei(this,t):0==this.l.length||qr(this.i)||Ei(this))},Ht.Ga=function(){if(this.u=null,ki(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Un(ee(this.bb,this),t)}},Ht.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Fn(10),wi(this),ki(this))},Ht.ab=function(){null!=this.v&&(this.v=null,wi(this),Ai(this),Fn(19))},Ht.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Fn(2)):(this.h.info("Failed to ping google.com"),Fn(1))},(Ht=Vi.prototype).xa=function(){},Ht.wa=function(){},Ht.va=function(){},Ht.ua=function(){},Ht.Oa=function(){},Ui.prototype.g=function(t,e){return new ji(t,e)},re(ji,sn),ji.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),mn(ee(t.hb,t,e))),Fn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Li(t,null,t.W),Ci(t)},ji.prototype.close=function(){bi(this.g)},ji.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Si(this.g,e)}else this.v?((e={}).__data__=cn(t),Si(this.g,e)):Si(this.g,t)},ji.prototype.M=function(){this.g.j=null,delete this.j,bi(this.g),delete this.g,ji.Z.M.call(this)},re(qi,Zn),re(Gi,$n),re(Bi,Vi),Bi.prototype.xa=function(){an(this.g,"a")},Bi.prototype.wa=function(t){an(this.g,new qi(t))},Bi.prototype.va=function(t){an(this.g,new Gi(t))},Bi.prototype.ua=function(){an(this.g,"b")},Ui.prototype.createWebChannel=Ui.prototype.g,ji.prototype.send=ji.prototype.u,ji.prototype.open=ji.prototype.m,ji.prototype.close=ji.prototype.close,jn.NO_ERROR=0,jn.TIMEOUT=8,jn.HTTP_ERROR=6,qn.COMPLETE="complete",Bn.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",sn.prototype.listen=sn.prototype.N,ii.prototype.listenOnce=ii.prototype.O,ii.prototype.getLastError=ii.prototype.La,ii.prototype.getLastErrorCode=ii.prototype.Da,ii.prototype.getStatus=ii.prototype.ba,ii.prototype.getResponseJson=ii.prototype.Qa,ii.prototype.getResponseText=ii.prototype.ga,ii.prototype.send=ii.prototype.ea;var Hi=jn,zi=qn,Zi=Nn,$i=Wr,Ki=Bn,Qi=ii,Ji=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Ji.o=-1;var Wi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Yi=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Ut.ZT)(e,t),e}(Error),Xi=new qt.Yd("@firebase/firestore");function to(){return Xi.logLevel}function eo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Xi.logLevel<=qt.in.DEBUG){var r=e.map(io);Xi.debug.apply(Xi,(0,Ut.ev)(["Firestore (8.8.0): "+t],r))}}function no(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Xi.logLevel<=qt.in.ERROR){var r=e.map(io);Xi.error.apply(Xi,(0,Ut.ev)(["Firestore (8.8.0): "+t],r))}}function ro(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Xi.logLevel<=qt.in.WARN){var r=e.map(io);Xi.warn.apply(Xi,(0,Ut.ev)(["Firestore (8.8.0): "+t],r))}}function io(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(ig){return t}}function oo(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.0) INTERNAL ASSERTION FAILED: "+t;throw no(e),new Error(e)}function so(t,e){t||oo()}function ao(t,e){return t}function uo(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var co=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=uo(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function lo(t,e){return t<e?-1:t>e?1:0}function ho(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function fo(t){return t+"\0"}var po=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Yi(Wi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Yi(Wi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Yi(Wi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Yi(Wi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?lo(this.nanoseconds,t.nanoseconds):lo(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),go=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new po(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function mo(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yo(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var bo=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&oo(),void 0===n?n=t.length-e:n>t.length-e&&oo(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ut.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Yi(Wi.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(bo),_o=/^[_a-zA-Z][_a-zA-Z0-9]*$/,So=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ut.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return _o.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Yi(Wi.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Yi(Wi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Yi(Wi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Yi(Wi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(bo),Co=function(){function t(t){this.fields=t,t.sort(So.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return ho(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Eo=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return lo(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Eo.EMPTY_BYTE_STRING=new Eo("");var To=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Io(t){if(so(!!t),"string"==typeof t){var e=0,n=To.exec(t);if(so(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xo(t.seconds),nanos:xo(t.nanos)}}function xo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ao(t){return"string"==typeof t?Eo.fromBase64String(t):Eo.fromUint8Array(t)}function Oo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ko(t){var e=t.mapValue.fields.__previous_value__;return Oo(e)?ko(e):e}function No(t){var e=Io(t.mapValue.fields.__local_write_time__.timestampValue);return new po(e.seconds,e.nanos)}function Do(t){return null==t}function Po(t){return 0===t&&1/t==-1/0}function Ro(t){return"number"==typeof t&&Number.isInteger(t)&&!Po(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Mo=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(wo.fromString(e))},t.fromName=function(e){return new t(wo.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===wo.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return wo.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new wo(e.slice()))},t}();function Lo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Oo(t)?4:10:oo()}function Fo(t,e){var n=Lo(t);if(n!==Lo(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return No(t).isEqual(No(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Io(t.timestampValue),r=Io(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ao(t.bytesValue).isEqual(Ao(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return xo(t.geoPointValue.latitude)===xo(e.geoPointValue.latitude)&&xo(t.geoPointValue.longitude)===xo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return xo(t.integerValue)===xo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=xo(t.doubleValue),r=xo(e.doubleValue);return n===r?Po(n)===Po(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ho(t.arrayValue.values||[],e.arrayValue.values||[],Fo);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(mo(n)!==mo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Fo(n[i],r[i])))return!1;return!0}(t,e);default:return oo()}}function Vo(t,e){return void 0!==(t.values||[]).find(function(t){return Fo(t,e)})}function Uo(t,e){var n=Lo(t),r=Lo(e);if(n!==r)return lo(n,r);switch(n){case 0:return 0;case 1:return lo(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=xo(t.integerValue||t.doubleValue),r=xo(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return jo(t.timestampValue,e.timestampValue);case 4:return jo(No(t),No(e));case 5:return lo(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ao(t),r=Ao(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=lo(n[i],r[i]);if(0!==o)return o}return lo(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=lo(xo(t.latitude),xo(e.latitude));return 0!==n?n:lo(xo(t.longitude),xo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Uo(n[i],r[i]);if(o)return o}return lo(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=lo(r[s],o[s]);if(0!==a)return a;var u=Uo(n[r[s]],i[o[s]]);if(0!==u)return u}return lo(r.length,o.length)}(t.mapValue,e.mapValue);default:throw oo()}}function jo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return lo(t,e);var n=Io(t),r=Io(e),i=lo(n.seconds,r.seconds);return 0!==i?i:lo(n.nanos,r.nanos)}function qo(t){return Go(t)}function Go(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Io(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ao(t.bytesValue).toBase64():"referenceValue"in t?Mo.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Go(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Go(t.fields[o])}return e+"}"}(t.mapValue):oo();var e}function Bo(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Ho(t){return!!t&&"integerValue"in t}function zo(t){return!!t&&"arrayValue"in t}function Zo(t){return!!t&&"nullValue"in t}function $o(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ko(t){return!!t&&"mapValue"in t}function Qo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return yo(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=Qo(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Qo(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Jo=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Ko(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Qo(e)},t.prototype.setAll=function(t){var e=this,n=So.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Qo(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Ko(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Fo(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Ko(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){yo(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Qo(this.value))},t}();function Wo(t){var e=[];return yo(t.fields,function(t,n){var r=new So([t]);if(Ko(n)){var i=Wo(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Co(e)}var Yo=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,go.min(),Jo.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Jo.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Jo.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Jo.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Jo.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Xo=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function ts(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Xo(t,e,n,r,i,o,s)}function es(t){var e=ao(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+qo(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Do(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ps(e.startAt)),e.endAt&&(n+="|ub:",n+=ps(e.endAt)),e.h=n}return e.h}function ns(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ms(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Fo(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vs(t.startAt,e.startAt)&&vs(t.endAt,e.endAt)}function rs(t){return Mo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var is=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Ut.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new os(t,n,r):"array-contains"===n?new cs(t,r):"in"===n?new ls(t,r):"not-in"===n?new hs(t,r):"array-contains-any"===n?new fs(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new ss(t,n):new as(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Uo(e,this.value)):null!==e&&Lo(this.value)===Lo(e)&&this.m(Uo(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return oo()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),os=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Mo.fromName(r.referenceValue),i}return(0,Ut.ZT)(e,t),e.prototype.matches=function(t){var e=Mo.comparator(t.key,this.key);return this.m(e)},e}(is),ss=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=us(0,n),r}return(0,Ut.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(is),as=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=us(0,n),r}return(0,Ut.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(is);function us(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Mo.fromName(t.referenceValue)})}var cs=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Ut.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return zo(e)&&Vo(e.arrayValue,this.value)},e}(is),ls=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Ut.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Vo(this.value.arrayValue,e)},e}(is),hs=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Ut.ZT)(e,t),e.prototype.matches=function(t){if(Vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Vo(this.value.arrayValue,e)},e}(is),fs=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Ut.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!zo(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Vo(e.value.arrayValue,t)})},e}(is),ds=function(t,e){this.position=t,this.before=e};function ps(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return qo(t)}).join(",")}var gs=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ms(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ys(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Mo.comparator(Mo.fromName(s.referenceValue),n.key):Uo(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function vs(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Fo(t.position[n],e.position[n]))return!1;return!0}var bs=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function ws(t,e,n,r,i,o,s,a){return new bs(t,e,n,r,i,o,s,a)}function _s(t){return new bs(t)}function Ss(t){return!Do(t.limit)&&"F"===t.limitType}function Cs(t){return!Do(t.limit)&&"L"===t.limitType}function Es(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ts(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Is(t){return null!==t.collectionGroup}function xs(t){var e=ao(t);if(null===e.p){e.p=[];var n=Ts(e),r=Es(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new gs(n)),e.p.push(new gs(So.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new gs(So.keyField(),u))}}}return e.p}function As(t){var e=ao(t);if(!e.T)if("F"===e.limitType)e.T=ts(e.path,e.collectionGroup,xs(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=xs(e);r<i.length;r++){var o=i[r];n.push(new gs(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new ds(e.endAt.position,!e.endAt.before):null,a=e.startAt?new ds(e.startAt.position,!e.startAt.before):null;e.T=ts(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Os(t,e,n){return new bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ks(t,e){return ns(As(t),As(e))&&t.limitType===e.limitType}function Ns(t){return es(As(t))+"|lt:"+t.limitType}function Ds(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+qo(e.value);var e}).join(", ")+"]"),Do(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+ps(t.startAt)),t.endAt&&(e+=", endAt: "+ps(t.endAt)),"Target("+e+")"}(As(t))+"; limitType="+t.limitType+")"}function Ps(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Mo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ys(t.startAt,xs(t),e)||t.endAt&&ys(t.endAt,xs(t),e))}(t,e)}function Rs(t){return function(e,n){for(var r=!1,i=0,o=xs(t);i<o.length;i++){var s=o[i],a=Ms(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Ms(t,e,n){var r=t.field.isKeyField()?Mo.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Uo(r,i):oo()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oo()}}function Ls(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Po(e)?"-0":e}}function Fs(t){return{integerValue:""+t}}function Vs(t,e){return Ro(e)?Fs(e):Ls(t,e)}var Us=function(){this._=void 0};function js(t,e,n){return t instanceof Bs?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Hs?zs(t,e):t instanceof Zs?$s(t,e):function(t,e){var n=Gs(t,e),r=Qs(n)+Qs(t.A);return Ho(n)&&Ho(t.A)?Fs(r):Ls(t.R,r)}(t,e)}function qs(t,e,n){return t instanceof Hs?zs(t,e):t instanceof Zs?$s(t,e):n}function Gs(t,e){return t instanceof Ks?Ho(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Bs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ut.ZT)(e,t),e}(Us),Hs=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Ut.ZT)(e,t),e}(Us);function zs(t,e){for(var n=Js(e),r=function(t){n.some(function(e){return Fo(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Zs=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Ut.ZT)(e,t),e}(Us);function $s(t,e){for(var n=Js(e),r=function(t){n=n.filter(function(e){return!Fo(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ks=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Ut.ZT)(e,t),e}(Us);function Qs(t){return xo(t.integerValue||t.doubleValue)}function Js(t){return zo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ws=function(t,e){this.field=t,this.transform=e},Ys=function(t,e){this.version=t,this.transformResults=e},Xs=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ta(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ea=function(){};function na(t,e,n){t instanceof aa?function(t,e,n){var r=t.value.clone(),i=la(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ua?function(t,e,n){if(ta(t.precondition,e)){var r=la(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(ca(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ra(t,e,n){t instanceof aa?function(t,e,n){if(ta(t.precondition,e)){var r=t.value.clone(),i=ha(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(sa(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ua?function(t,e,n){if(ta(t.precondition,e)){var r=ha(t.fieldTransforms,n,e),i=e.data;i.setAll(ca(t)),i.setAll(r),e.convertToFoundDocument(sa(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){ta(t.precondition,e)&&e.convertToNoDocument(go.min())}(t,e)}function ia(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Gs(o.transform,s||null);null!=a&&(null==n&&(n=Jo.empty()),n.set(o.field,a))}return n||null}function oa(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ho(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Hs&&e instanceof Hs||t instanceof Zs&&e instanceof Zs?ho(t.elements,e.elements,Fo):t instanceof Ks&&e instanceof Ks?Fo(t.A,e.A):t instanceof Bs&&e instanceof Bs}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function sa(t){return t.isFoundDocument()?t.version:go.min()}var aa=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,Ut.ZT)(e,t),e}(ea),ua=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,Ut.ZT)(e,t),e}(ea);function ca(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function la(t,e,n){var r=new Map;so(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,qs(s,a,n[i]))}return r}function ha(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,js(a,u,e))}return r}var fa,da,pa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Ut.ZT)(e,t),e}(ea),ga=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Ut.ZT)(e,t),e}(ea),ma=function(t){this.count=t};function ya(t){switch(t){case Wi.OK:return oo();case Wi.CANCELLED:case Wi.UNKNOWN:case Wi.DEADLINE_EXCEEDED:case Wi.RESOURCE_EXHAUSTED:case Wi.INTERNAL:case Wi.UNAVAILABLE:case Wi.UNAUTHENTICATED:return!1;case Wi.INVALID_ARGUMENT:case Wi.NOT_FOUND:case Wi.ALREADY_EXISTS:case Wi.PERMISSION_DENIED:case Wi.FAILED_PRECONDITION:case Wi.ABORTED:case Wi.OUT_OF_RANGE:case Wi.UNIMPLEMENTED:case Wi.DATA_LOSS:return!0;default:return oo()}}function va(t){if(void 0===t)return no("GRPC error has no .code"),Wi.UNKNOWN;switch(t){case fa.OK:return Wi.OK;case fa.CANCELLED:return Wi.CANCELLED;case fa.UNKNOWN:return Wi.UNKNOWN;case fa.DEADLINE_EXCEEDED:return Wi.DEADLINE_EXCEEDED;case fa.RESOURCE_EXHAUSTED:return Wi.RESOURCE_EXHAUSTED;case fa.INTERNAL:return Wi.INTERNAL;case fa.UNAVAILABLE:return Wi.UNAVAILABLE;case fa.UNAUTHENTICATED:return Wi.UNAUTHENTICATED;case fa.INVALID_ARGUMENT:return Wi.INVALID_ARGUMENT;case fa.NOT_FOUND:return Wi.NOT_FOUND;case fa.ALREADY_EXISTS:return Wi.ALREADY_EXISTS;case fa.PERMISSION_DENIED:return Wi.PERMISSION_DENIED;case fa.FAILED_PRECONDITION:return Wi.FAILED_PRECONDITION;case fa.ABORTED:return Wi.ABORTED;case fa.OUT_OF_RANGE:return Wi.OUT_OF_RANGE;case fa.UNIMPLEMENTED:return Wi.UNIMPLEMENTED;case fa.DATA_LOSS:return Wi.DATA_LOSS;default:return oo()}}(da=fa||(fa={}))[da.OK=0]="OK",da[da.CANCELLED=1]="CANCELLED",da[da.UNKNOWN=2]="UNKNOWN",da[da.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",da[da.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",da[da.NOT_FOUND=5]="NOT_FOUND",da[da.ALREADY_EXISTS=6]="ALREADY_EXISTS",da[da.PERMISSION_DENIED=7]="PERMISSION_DENIED",da[da.UNAUTHENTICATED=16]="UNAUTHENTICATED",da[da.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",da[da.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",da[da.ABORTED=10]="ABORTED",da[da.OUT_OF_RANGE=11]="OUT_OF_RANGE",da[da.UNIMPLEMENTED=12]="UNIMPLEMENTED",da[da.INTERNAL=13]="INTERNAL",da[da.UNAVAILABLE=14]="UNAVAILABLE",da[da.DATA_LOSS=15]="DATA_LOSS";var ba=function(){function t(t,e){this.comparator=t,this.root=e||_a.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_a.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_a.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new wa(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new wa(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new wa(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new wa(this.root,t,this.comparator,!0)},t}(),wa=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),_a=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw oo();if(this.right.isRed())throw oo();var t=this.left.check();if(t!==this.right.check())throw oo();return t+(this.isRed()?0:1)},t}();_a.EMPTY=null,_a.RED=!0,_a.BLACK=!1,_a.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw oo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw oo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw oo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw oo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw oo()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new _a(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Sa=function(){function t(t){this.comparator=t,this.data=new ba(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ca(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ca(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Ca=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Ea=new ba(Mo.comparator);function Ta(){return Ea}var Ia=new ba(Mo.comparator);function xa(){return Ia}var Aa=new ba(Mo.comparator);function Oa(){return Aa}var ka=new Sa(Mo.comparator);function Na(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ka,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Da=new Sa(lo);function Pa(){return Da}var Ra=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Ma.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(go.min(),r,Pa(),Ta(),Na())},t}(),Ma=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Eo.EMPTY_BYTE_STRING,n,Na(),Na(),Na())},t}(),La=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Fa=function(t,e){this.targetId=t,this.V=e},Va=function(t,e,n,r){void 0===n&&(n=Eo.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ua=function(){function t(){this.S=0,this.D=Ga(),this.C=Eo.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Na(),e=Na(),n=Na();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:oo()}}),new Ma(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Ga()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),ja=function(){function t(t){this.W=t,this.G=new Map,this.H=Ta(),this.J=qa(),this.Y=new Sa(lo)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:oo()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(rs(i))if(0===n){var o=new Mo(i.path);this.tt(e,o,Yo.newNoDocument(o,go.min()))}else so(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&rs(o.target)){var s=new Mo(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Yo.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=Na();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Ra(t,n,this.Y,this.H,r);return this.H=Ta(),this.J=qa(),this.Y=new Sa(lo),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Ua,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Sa(lo),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||eo("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Ua),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function qa(){return new ba(Mo.comparator)}function Ga(){return new ba(Mo.comparator)}var Ba={asc:"ASCENDING",desc:"DESCENDING"},Ha={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},za=function(t,e){this.databaseId=t,this.I=e};function Za(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function $a(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ka(t,e){return Za(t,e.toTimestamp())}function Qa(t){return so(!!t),go.fromTimestamp(function(t){var e=Io(t);return new po(e.seconds,e.nanos)}(t))}function Ja(t,e){return function(t){return new wo(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Wa(t){var e=wo.fromString(t);return so(_u(e)),e}function Ya(t,e){return Ja(t.databaseId,e.path)}function Xa(t,e){var n=Wa(e);if(n.get(1)!==t.databaseId.projectId)throw new Yi(Wi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Yi(Wi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Mo(ru(n))}function tu(t,e){return Ja(t.databaseId,e)}function eu(t){var e=Wa(t);return 4===e.length?wo.emptyPath():ru(e)}function nu(t){return new wo(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ru(t){return so(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function iu(t,e,n){return{name:Ya(t,e),fields:n.value.mapValue.fields}}function ou(t,e,n){var r=Xa(t,e.name),i=Qa(e.updateTime),o=new Jo({mapValue:{fields:e.fields}}),s=Yo.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function su(t,e){var n;if(e instanceof aa)n={update:iu(t,e.key,e.value)};else if(e instanceof pa)n={delete:Ya(t,e.key)};else if(e instanceof ua)n={update:iu(t,e.key,e.data),updateMask:wu(e.fieldMask)};else{if(!(e instanceof ga))return oo();n={verify:Ya(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Bs)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Hs)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Zs)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ks)return{fieldPath:e.field.canonicalString(),increment:n.A};throw oo()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ka(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:oo()}(t,e.precondition)),n}function au(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Xs.updateTime(Qa(t.updateTime)):void 0!==t.exists?Xs.exists(t.exists):Xs.none()}(e.currentDocument):Xs.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(so("REQUEST_TIME"===e.setToServerValue),n=new Bs):"appendMissingElements"in e?n=new Hs(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Zs(e.removeAllFromArray.values||[]):"increment"in e?n=new Ks(t,e.increment):oo();var r=So.fromServerFormat(e.fieldPath);return new Ws(r,n)}(t,e)}):[];if(e.update){var i=Xa(t,e.update.name),o=new Jo({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Co((t.fieldPaths||[]).map(function(t){return So.fromServerFormat(t)}))}(e.updateMask);return new ua(i,o,s,n,r)}return new aa(i,o,n,r)}if(e.delete){var a=Xa(t,e.delete);return new pa(a,n)}if(e.verify){var u=Xa(t,e.verify);return new ga(u,n)}return oo()}function uu(t,e){return{documents:[tu(t,e.path)]}}function cu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=tu(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=tu(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if($o(t.value))return{unaryFilter:{field:mu(t.field),op:"IS_NAN"}};if(Zo(t.value))return{unaryFilter:{field:mu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if($o(t.value))return{unaryFilter:{field:mu(t.field),op:"IS_NOT_NAN"}};if(Zo(t.value))return{unaryFilter:{field:mu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mu(t.field),op:gu(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:mu(t.field),direction:pu(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Do(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=fu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=fu(e.endAt)),n}function lu(t){var e=eu(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){so(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=hu(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new gs(yu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Do(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=du(n.startAt));var l=null;return n.endAt&&(l=du(n.endAt)),ws(e,i,a,s,u,"F",c,l)}function hu(t){return t?void 0!==t.unaryFilter?[bu(t)]:void 0!==t.fieldFilter?[vu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return hu(t)}).reduce(function(t,e){return t.concat(e)}):oo():[]}function fu(t){return{before:t.before,values:t.position}}function du(t){return new ds(t.values||[],!!t.before)}function pu(t){return Ba[t]}function gu(t){return Ha[t]}function mu(t){return{fieldPath:t.canonicalString()}}function yu(t){return So.fromServerFormat(t.fieldPath)}function vu(t){return is.create(yu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return oo()}}(t.fieldFilter.op),t.fieldFilter.value)}function bu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=yu(t.unaryFilter.field);return is.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=yu(t.unaryFilter.field);return is.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=yu(t.unaryFilter.field);return is.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=yu(t.unaryFilter.field);return is.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return oo()}}function wu(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function _u(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Su(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Eu(e)),e=Cu(t.get(n),e);return Eu(e)}function Cu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Eu(t){return t+"\x01\x01"}function Tu(t){var e=t.length;if(so(e>=2),2===e)return so("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),wo.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&oo(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:oo()}o=s+2}return new wo(r)}var Iu=function(t,e){this.seconds=t,this.nanoseconds=e},xu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};xu.store="owner",xu.key="owner";var Au=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Au.store="mutationQueues",Au.keyPath="userId";var Ou=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ou.store="mutations",Ou.keyPath="batchId",Ou.userMutationsIndex="userMutationsIndex",Ou.userMutationsKeyPath=["userId","batchId"];var ku=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Su(e)]},t.key=function(t,e,n){return[t,Su(e),n]},t}();ku.store="documentMutations",ku.PLACEHOLDER=new ku;var Nu=function(t,e){this.path=t,this.readTime=e},Du=function(t,e){this.path=t,this.version=e},Pu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Pu.store="remoteDocuments",Pu.readTimeIndex="readTimeIndex",Pu.readTimeIndexPath="readTime",Pu.collectionReadTimeIndex="collectionReadTimeIndex",Pu.collectionReadTimeIndexPath=["parentPath","readTime"];var Ru=function(t){this.byteSize=t};Ru.store="remoteDocumentGlobal",Ru.key="remoteDocumentGlobalKey";var Mu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Mu.store="targets",Mu.keyPath="targetId",Mu.queryTargetsIndexName="queryTargetsIndex",Mu.queryTargetsKeyPath=["canonicalId","targetId"];var Lu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Lu.store="targetDocuments",Lu.keyPath=["targetId","path"],Lu.documentTargetsIndex="documentTargetsIndex",Lu.documentTargetsKeyPath=["path","targetId"];var Fu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Fu.key="targetGlobalKey",Fu.store="targetGlobal";var Vu=function(t,e){this.collectionId=t,this.parent=e};Vu.store="collectionParents",Vu.keyPath=["collectionId","parent"];var Uu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Uu.store="clientMetadata",Uu.keyPath="clientId";var ju=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};ju.store="bundles",ju.keyPath="bundleId";var qu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};qu.store="namedQueries",qu.keyPath="name";var Gu=(0,Ut.ev)((0,Ut.ev)([],(0,Ut.ev)((0,Ut.ev)([],(0,Ut.ev)((0,Ut.ev)([],(0,Ut.ev)((0,Ut.ev)([],[Au.store,Ou.store,ku.store,Pu.store,Mu.store,xu.store,Fu.store,Lu.store]),[Uu.store])),[Ru.store])),[Vu.store])),[ju.store,qu.store]),Bu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),zu=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Zu=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&oo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),$u=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new zu,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Ju(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=ec(e.target.error);n.ft.reject(new Ju(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ju(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(eo("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Yu(e)},t}(),Ku=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,jt.z$)())&&no("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return eo("SimpleDb","Removing database:",t),Xu(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,jt.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Ut.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Ut.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(eo("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Ju(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Yi(Wi.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ju(t,n))},i.onupgradeneeded=function(t){eo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){eo("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Ut.mG)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Ut.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return(0,Ut.Jh)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=$u.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Zu.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return eo("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Qu=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Xu(this.Pt.delete())},t}(),Ju=function(t){function e(e,n){var r=this;return(r=t.call(this,Wi.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Ut.ZT)(e,t),e}(Yi);function Wu(t){return"IndexedDbTransactionError"===t.name}var Yu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(eo("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(eo("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Xu(n)},t.prototype.add=function(t){return eo("SimpleDb","ADD",this.store.name,t,t),Xu(this.store.add(t))},t.prototype.get=function(t){var e=this;return Xu(this.store.get(t)).next(function(n){return void 0===n&&(n=null),eo("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return eo("SimpleDb","DELETE",this.store.name,t),Xu(this.store.delete(t))},t.prototype.count=function(){return eo("SimpleDb","COUNT",this.store.name),Xu(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){eo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Zu(function(n,r){e.onerror=function(t){var e=ec(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Zu(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Qu(i),s=e(i.primaryKey,i.value,o);if(s instanceof Zu){var a=s.catch(function(t){return o.done(),Zu.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Zu.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Xu(t){return new Zu(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=ec(t.target.error);n(e)}})}var tc=!1;function ec(t){var e=Ku._t((0,jt.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Yi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return tc||(tc=!0,setTimeout(function(){throw r},0)),r}}return t}var nc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Ut.ZT)(e,t),e}(Hu);function rc(t,e){var n=ao(t);return Ku.It(n.Mt,e)}var ic=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&na(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&ra(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&ra(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(go.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Na())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ho(this.mutations,t.mutations,function(t,e){return oa(t,e)})&&ho(this.baseMutations,t.baseMutations,function(t,e){return oa(t,e)})},t}(),oc=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){so(e.mutations.length===r.length);for(var i=Oa(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),sc=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=go.min()),void 0===o&&(o=go.min()),void 0===s&&(s=Eo.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),ac=function(t){this.Lt=t};function uc(t,e){if(e.document)return ou(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Mo.fromSegments(e.noDocument.path),r=dc(e.noDocument.readTime),i=Yo.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Mo.fromSegments(e.unknownDocument.path);return r=dc(e.unknownDocument.version),Yo.newUnknownDocument(o,r)}return oo()}function cc(t,e,n){var r=lc(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Ya(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Za(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Pu(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=fc(e.version);return s=e.hasCommittedMutations,new Pu(null,new Nu(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=fc(e.version);return new Pu(new Du(c,l),null,null,!0,r,i)}return oo()}function lc(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function hc(t){var e=new po(t[0],t[1]);return go.fromTimestamp(e)}function fc(t){var e=t.toTimestamp();return new Iu(e.seconds,e.nanoseconds)}function dc(t){var e=new po(t.seconds,t.nanoseconds);return go.fromTimestamp(e)}function pc(t,e){for(var n=(e.baseMutations||[]).map(function(e){return au(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return au(t.Lt,e)}),o=po.fromMillis(e.localWriteTimeMs);return new ic(e.batchId,o,n,i)}function gc(t){var e,n,r=dc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?dc(t.lastLimboFreeSnapshotVersion):go.min();return void 0!==t.query.documents?(so(1===(n=t.query).documents.length),e=As(_s(eu(n.documents[0])))):e=function(t){return As(lu(t))}(t.query),new sc(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Eo.fromBase64String(t.resumeToken))}function mc(t,e){var n,r=fc(e.snapshotVersion),i=fc(e.lastLimboFreeSnapshotVersion);n=rs(e.target)?uu(t.Lt,e.target):cu(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Mu(e.targetId,es(e.target),r,o,e.sequenceNumber,i,n)}function yc(t){var e=lu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Os(e,e.limit,"L"):e}var vc=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return bc(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:dc(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return bc(t).put({bundleId:(n=e).id,createTime:fc(Qa(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return wc(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:yc(e.bundledQuery),readTime:dc(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return wc(t).put(function(t){return{name:t.name,readTime:fc(Qa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function bc(t){return rc(t,ju.store)}function wc(t){return rc(t,qu.store)}var _c=function(){function t(){this.Bt=new Sc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Zu.resolve()},t.prototype.getCollectionParents=function(t,e){return Zu.resolve(this.Bt.getEntries(e))},t}(),Sc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Sa(wo.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Sa(wo.comparator)).toArray()},t}(),Cc=function(){function t(){this.qt=new Sc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Su(i)};return Ec(t).put(o)}return Zu.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[fo(e),""],!1,!0);return Ec(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Tu(o.parent))}return n})},t}();function Ec(t){return rc(t,Vu.store)}var Tc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ic=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function xc(t,e,n){var r=t.store(Ou.store),i=t.store(ku.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){so(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=ku.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Zu.waitFor(o).next(function(){return c})}function Ac(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw oo();e=t.noDocument}return JSON.stringify(e).length}Ic.DEFAULT_COLLECTION_PERCENTILE=10,Ic.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ic.DEFAULT=new Ic(41943040,Ic.DEFAULT_COLLECTION_PERCENTILE,Ic.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ic.DISABLED=new Ic(-1,0,0);var Oc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return so(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nc(t).$t({index:Ou.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Dc(t),s=Nc(t);return s.add({}).next(function(a){so("number"==typeof a);for(var u=new ic(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return su(t.Lt,e)}),i=n.mutations.map(function(e){return su(t.Lt,e)});return new Ou(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Sa(function(t,e){return lo(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=ku.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,ku.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),Zu.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Nc(t).get(e).next(function(t){return t?(so(t.userId===n.userId),pc(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Zu.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Nc(t).$t({index:Ou.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(so(e.batchId>=r),o=pc(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Nc(t).$t({index:Ou.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nc(t).Nt(Ou.userMutationsIndex,n).next(function(t){return t.map(function(t){return pc(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=ku.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Dc(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=Tu(r[1]);if(a===n.userId&&e.path.isEqual(c))return Nc(t).get(u).next(function(t){if(!t)throw oo();so(t.userId===n.userId),o.push(pc(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Sa(lo),i=[];return e.forEach(function(e){var o=ku.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Dc(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=Tu(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Zu.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=ku.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Sa(lo);return Dc(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=Tu(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Nc(t).get(e).next(function(t){if(null===t)throw oo();so(t.userId===n.userId),r.push(pc(n.R,t))}))}),Zu.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return xc(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Zu.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Zu.resolve();var r=IDBKeyRange.lowerBound(ku.prefixForUser(e.userId)),i=[];return Dc(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=Tu(t[1]);i.push(o)}else r.done()}).next(function(){so(0===i.length)})})},t.prototype.containsKey=function(t,e){return kc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Pc(t).get(this.userId).next(function(t){return t||new Au(e.userId,-1,"")})},t}();function kc(t,e,n){var r=ku.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Dc(t).$t({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Nc(t){return rc(t,Ou.store)}function Dc(t){return rc(t,ku.store)}function Pc(t){return rc(t,Au.store)}var Rc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Mc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Rc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return go.fromTimestamp(new po(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Lc(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return so(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Lc(t).$t(function(s,a){var u=gc(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Zu.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Lc(t).$t(function(t,n){var r=gc(n);e(r)})},t.prototype.Xt=function(t){return Fc(t).get(Fu.key).next(function(t){return so(null!==t),t})},t.prototype.Zt=function(t,e){return Fc(t).put(Fu.key,e)},t.prototype.te=function(t,e){return Lc(t).put(mc(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=es(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Lc(t).$t({range:r,index:Mu.queryTargetsIndexName},function(t,n,r){var o=gc(n);ns(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Vc(t);return e.forEach(function(e){var s=Su(e.path);i.push(o.put(new Lu(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Zu.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Vc(t);return Zu.forEach(e,function(e){var o=Su(e.path);return Zu.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Vc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Vc(t),i=Na();return r.$t({range:n,kt:!0},function(t,e,n){var r=Tu(t[1]),o=new Mo(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Su(e.path),r=IDBKeyRange.bound([n],[fo(n)],!1,!0),i=0;return Vc(t).$t({index:Lu.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Lc(t).get(e).next(function(t){return t?gc(t):null})},t}();function Lc(t){return rc(t,Mu.store)}function Fc(t){return rc(t,Fu.store)}function Vc(t){return rc(t,Lu.store)}function Uc(t){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){if(t.code!==Wi.FAILED_PRECONDITION||t.message!==Bu)throw t;return eo("LocalStore","Unexpectedly lost primary lease"),[2]})})}function jc(t,e){var n=t[1],r=e[1],i=lo(t[0],e[0]);return 0===i?lo(n,r):i}var qc=function(){function t(t){this.ne=t,this.buffer=new Sa(jc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();jc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Gc=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;eo("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Ut.mG)(e,void 0,void 0,function(){var e;return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Wu(e=n.sent())?(eo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Uc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Bc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Zu.resolve(Ji.o);var r=new qc(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(eo("LruGarbageCollector","Garbage collection skipped; disabled"),Zu.resolve(Tc)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(eo("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Tc):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(eo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),to()<=qt.in.DEBUG&&eo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Zu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Hc=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Bc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return zc(t,n)},t.prototype.removeReference=function(t,e,n){return zc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return zc(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Pc(t).Ot(function(r){return kc(t,r,e).next(function(t){return t&&(n=!0),Zu.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Vc(t).delete([0,Su(s.path)])})});i.push(u)}}).next(function(){return Zu.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return zc(t,e)},t.prototype.we=function(t,e){var n,r=Vc(t),i=Ji.o;return r.$t({index:Lu.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Ji.o&&e(new Mo(Tu(n)),i),i=s,n=o):i=Ji.o}).next(function(){i!==Ji.o&&e(new Mo(Tu(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function zc(t,e){return Vc(t).put(function(t,e){return new Lu(0,Su(t.path),e)}(e,t.currentSequenceNumber))}var Zc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){yo(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return vo(this.inner)},t}(),$c=function(){function t(){this.changes=new Zc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:go.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Yo.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Zu.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Kc=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Wc(t).put(Yc(e),n)},t.prototype.removeEntry=function(t,e){var n=Wc(t),r=Yc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Wc(t).get(Yc(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Wc(t).get(Yc(e)).next(function(t){return{document:n.ye(e,t),size:Ac(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Ta();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Ta(),i=new ba(Mo.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Ac(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Zu.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Wc(t).$t({range:r},function(t,e,r){for(var s=Mo.fromSegments(t);o&&Mo.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Ta(),o=e.path.length+1,s={};if(n.isEqual(go.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=lc(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Pu.collectionReadTimeIndex}return Wc(t).$t(s,function(t,n,s){if(t.length===o){var a=uc(r.R,n);e.path.isPrefixOf(a.key.path)?Ps(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Qc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Jc(t).get(Ru.key).next(function(t){return so(!!t),t})},t.prototype.me=function(t,e){return Jc(t).put(Ru.key,e)},t.prototype.ye=function(t,e){if(e){var n=uc(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(go.min()))return n}return Yo.newInvalidDocument(t)},t}(),Qc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Zc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Ut.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Sa(function(t,e){return lo(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=cc(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Ac(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=cc(e.Ie.R,Yo.newNoDocument(o,go.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Zu.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}($c);function Jc(t){return rc(t,Ru.store)}function Wc(t){return rc(t,Pu.store)}function Yc(t){return t.path.toArray()}var Xc=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;so(n<r&&n>=0&&r<=11);var o=new $u("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(xu.store)}(t),function(t){t.createObjectStore(Au.store,{keyPath:Au.keyPath}),t.createObjectStore(Ou.store,{keyPath:Ou.keyPath,autoIncrement:!0}).createIndex(Ou.userMutationsIndex,Ou.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ku.store)}(t),tl(t),function(t){t.createObjectStore(Pu.store)}(t));var s=Zu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Lu.store),t.deleteObjectStore(Mu.store),t.deleteObjectStore(Fu.store)}(t),tl(t)),s=s.next(function(){return function(t){var e=t.store(Fu.store),n=new Fu(0,0,go.min().toTimestamp(),0);return e.put(Fu.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Ou.store).Nt().next(function(n){t.deleteObjectStore(Ou.store),t.createObjectStore(Ou.store,{keyPath:Ou.keyPath,autoIncrement:!0}).createIndex(Ou.userMutationsIndex,Ou.userMutationsKeyPath,{unique:!0});var r=e.store(Ou.store),i=n.map(function(t){return r.put(t)});return Zu.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Uu.store,{keyPath:Uu.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Ru.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Pu.store);e.createIndex(Pu.readTimeIndex,Pu.readTimeIndexPath,{unique:!1}),e.createIndex(Pu.collectionReadTimeIndex,Pu.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(ju.store,{keyPath:ju.keyPath})}(t),function(t){t.createObjectStore(qu.store,{keyPath:qu.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Pu.store).$t(function(t,n){e+=Ac(n)}).next(function(){var n=new Ru(e);return t.store(Ru.store).put(Ru.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(Au.store),r=t.store(Ou.store);return n.Nt().next(function(n){return Zu.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Ou.userMutationsIndex,i).next(function(r){return Zu.forEach(r,function(r){so(r.userId===n.userId);var i=pc(e.R,r);return xc(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Lu.store),n=t.store(Pu.store);return t.store(Fu.store).get(Fu.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new wo(n),s=function(t){return[0,Su(t)]}(o);r.push(e.get(s).next(function(n){return n?Zu.resolve():function(n){return e.put(new Lu(0,Su(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Zu.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Vu.store,{keyPath:Vu.keyPath});var n=e.store(Vu.store),r=new Sc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Su(i)})}};return e.store(Pu.store).$t({kt:!0},function(t,e){var n=new wo(t);return i(n.popLast())}).next(function(){return e.store(ku.store).$t({kt:!0},function(t,e){var n=Tu(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Mu.store);return n.$t(function(t,r){var i=gc(r),o=mc(e.R,i);return n.put(o)})},t}();function tl(t){t.createObjectStore(Lu.store,{keyPath:Lu.keyPath}).createIndex(Lu.documentTargetsIndex,Lu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Mu.store,{keyPath:Mu.keyPath}).createIndex(Mu.queryTargetsIndexName,Mu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Fu.store)}var el="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nl=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Yi(Wi.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hc(this,i),this.Le=n+"main",this.R=new ac(u),this.Be=new Ku(this.Le,11,new Xc(this.R)),this.qe=new Mc(this.referenceDelegate,this.R),this.Ut=new Cc,this.Ue=function(t,e){return new Kc(t,e)}(this.R,this.Ut),this.Ke=new vc,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&no("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Yi(Wi.FAILED_PRECONDITION,el);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Ji(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Ut.mG)(e,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Ut.mG)(e,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Ut.mG)(e,void 0,void 0,function(){return(0,Ut.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return il(e).put(new Uu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Wu(e))return eo("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return eo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return rl(t).get(xu.key).next(function(t){return Zu.resolve(e.tn(t))})},t.prototype.en=function(t){return il(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Ut.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Ut.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=rc(t,Uu.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Zu.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Zu.resolve(!0):rl(t).get(xu.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Yi(Wi.FAILED_PRECONDITION,el);return!1}}return!(!e.networkEnabled||!e.inForeground)||il(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&eo("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Ut.mG)(this,void 0,void 0,function(){var t=this;return(0,Ut.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[xu.store,Uu.store],function(e){var n=new nc(e,Ji.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return il(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Oc.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return eo("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Gu,function(o){return r=new nc(o,i.Ne?i.Ne.next():Ji.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw no("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Yi(Wi.FAILED_PRECONDITION,Bu);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return rl(t).get(xu.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Yi(Wi.FAILED_PRECONDITION,el)})},t.prototype.Ze=function(t){var e=new xu(this.clientId,this.allowTabSynchronization,Date.now());return rl(t).put(xu.key,e)},t.yt=function(){return Ku.yt()},t.prototype.Xe=function(t){var e=this,n=rl(t);return n.get(xu.key).next(function(t){return e.tn(t)?(eo("IndexedDbPersistence","Releasing primary lease."),n.delete(xu.key)):Zu.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(no("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),(0,jt.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return eo("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return no("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){no("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function rl(t){return rc(t,xu.store)}function il(t){return rc(t,Uu.store)}function ol(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var sl=function(t,e){this.progress=t,this.wn=e},al=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Mo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Is(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Mo(e)).next(function(t){var e=xa();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=xa();return this.Ut.getCollectionParents(t,i).next(function(s){return Zu.forEach(s,function(s){var a=function(t,e){return new bs(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Yo.newInvalidDocument(c),r=r.insert(c,l)),ra(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Ps(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Na(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ua&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),ul=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Na(),i=Na(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),cl=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(go.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Ss(e)||Cs(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(to()<=qt.in.DEBUG&&eo("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ds(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Sa(Rs(t));return e.forEach(function(e,r){Ps(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return to()<=qt.in.DEBUG&&eo("QueryEngine","Using full collection scan to execute query:",Ds(e)),this.Sn.getDocumentsMatchingQuery(t,e,go.min())},t}(),ll=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new ba(lo),this.kn=new Zc(function(t){return es(t)},ns),this.$n=go.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new al(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function hl(t,e,n,r){return new ll(t,e,n,r)}function fl(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Ut.Jh)(this,function(s){switch(s.label){case 0:return n=ao(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new al(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Na(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function dl(t,e){var n=ao(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Zu.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);so(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function pl(t){var e=ao(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function gl(t,e){var n=ao(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return so(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=Ta();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(ml(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(go.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Zu.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function ml(t,e,n,r,i){var o=Na();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Ta();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(go.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):eo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function yl(t,e){var n=ao(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function vl(t,e){var n=ao(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Zu.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new sc(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function bl(t,e,n){return(0,Ut.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ut.Jh)(this,function(a){switch(a.label){case 0:r=ao(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Wu(s=a.sent()))throw s;return eo("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function wl(t,e,n){var r=ao(t),i=go.min(),o=Na();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=ao(t),i=r.kn.get(n);return void 0!==i?Zu.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,As(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:go.min(),n?o:Na())}).next(function(t){return{documents:t,Bn:o}})})}function _l(t,e){var n=ao(t),r=ao(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Sl(t){var e=ao(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=ao(t),i=Ta(),o=lc(n),s=Wc(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:Pu.readTimeIndex,range:a},function(t,e){var n=uc(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:hc(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function Cl(t){return(0,Ut.mG)(this,void 0,void 0,function(){var e;return(0,Ut.Jh)(this,function(n){return[2,(e=ao(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Wc(t),n=go.min();return e.$t({index:Pu.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=hc(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function El(t,e,n,r){return(0,Ut.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return(0,Ut.Jh)(this,function(p){switch(p.label){case 0:for(i=ao(t),o=Na(),s=Ta(),a=Oa(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,vl(i,function(t){return As(_s(wo.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return ml(t,f,s,go.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function Tl(t,e,n){return void 0===n&&(n=Na()),(0,Ut.mG)(this,void 0,void 0,function(){var r,i;return(0,Ut.Jh)(this,function(o){switch(o.label){case 0:return[4,vl(t,As(yc(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ao(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Qa(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(Eo.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var Il=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Zu.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Qa(n.createTime)}),Zu.resolve()},t.prototype.getNamedQuery=function(t,e){return Zu.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:yc(t.bundledQuery),readTime:Qa(t.readTime)}}(e)),Zu.resolve()},t}(),xl=function(){function t(){this.Wn=new Sa(Al.Gn),this.zn=new Sa(Al.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Al(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Al(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Mo(new wo([])),r=new Al(n,t),i=new Al(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Mo(new wo([])),n=new Al(e,t),r=new Al(e,t+1),i=Na();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Al(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Al=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Mo.comparator(t.key,e.key)||lo(t.ns,e.ns)},t.Hn=function(t,e){return lo(t.ns,e.ns)||Mo.comparator(t.key,e.key)},t}(),Ol=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Sa(Al.Gn)}return t.prototype.checkEmpty=function(t){return Zu.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new ic(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Al(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Zu.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Zu.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Zu.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Zu.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Zu.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Al(e,0),i=new Al(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Zu.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Sa(lo);return e.forEach(function(t){var e=new Al(t,0),i=new Al(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Zu.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Mo.isDocumentKey(i)||(i=i.child(""));var o=new Al(new Mo(i),0),s=new Sa(lo);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Zu.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;so(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Zu.forEach(e.mutations,function(i){var o=new Al(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Al(e,0),r=this.rs.firstAfterOrEqual(n);return Zu.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Zu.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),kl=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new ba(Mo.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Zu.resolve(n?n.document.clone():Yo.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Ta();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Yo.newInvalidDocument(t))}),Zu.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Ta(),i=new Mo(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Ps(e,u)&&(r=r.insert(u.key,u.clone()))}return Zu.resolve(r)},t.prototype.fs=function(t,e){return Zu.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Nl(this)},t.prototype.getSize=function(t){return Zu.resolve(this.size)},t}(),Nl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Ut.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Zu.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}($c),Dl=function(){function t(t){this.persistence=t,this.ds=new Zc(function(t){return es(t)},ns),this.lastRemoteSnapshotVersion=go.min(),this.highestTargetId=0,this.ws=0,this._s=new xl,this.targetCount=0,this.ys=Rc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Zu.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Zu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Zu.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Zu.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Zu.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Rc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Zu.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Zu.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Zu.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Zu.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Zu.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Zu.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Zu.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Zu.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Zu.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Zu.resolve(n)},t.prototype.containsKey=function(t,e){return Zu.resolve(this._s.containsKey(e))},t}(),Pl=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Ji(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Dl(this),this.Ut=new _c,this.Ue=function(t,e){return new kl(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new ac(e),this.Ke=new Il(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Ol(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;eo("MemoryPersistence","Starting transaction:",t);var i=new Rl(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Zu.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Rl=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Ut.ZT)(e,t),e}(Hu),Ml=function(){function t(t){this.persistence=t,this.As=new xl,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw oo()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Zu.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Zu.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Zu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Zu.forEach(this.vs,function(r){var i=Mo.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Zu.or([function(){return Zu.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Ll=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Fl(t,e){return"firestore_clients_"+t+"_"+e}function Vl(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Ul(t,e){return"firestore_targets_"+t+"_"+e}Ll.UNAUTHENTICATED=new Ll(null),Ll.GOOGLE_CREDENTIALS=new Ll("google-credentials-uid"),Ll.FIRST_PARTY=new Ll("first-party-uid");var jl=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Yi(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(no("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ql=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Yi(i.error.code,i.error.message)),o?new t(e,i.state,r):(no("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Gl=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Pa(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ro(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(no("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Bl=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(no("SharedClientState","Failed to parse online state: "+e),null)},t}(),Hl=function(){function t(){this.activeTargetIds=Pa()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),zl=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new ba(lo),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Fl(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Hl),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Ut.mG)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return(0,Ut.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Fl(this.persistenceKey,r)))&&(o=Gl.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Ul(this.persistenceKey,t));if(n){var r=ql.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Ul(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return eo("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){eo("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){eo("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(eo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void no("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Ut.mG)(e,void 0,void 0,function(){var t,e,r,i,o,s;return(0,Ut.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Ji.o;if(null!=t)try{var n=JSON.parse(t);so("number"==typeof n),e=n}catch(t){no("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ji.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new jl(this.currentUser,t,e,n),i=Vl(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Vl(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Ul(this.persistenceKey,t),i=new ql(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Gl.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return jl.Vs(new Ll(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return ql.Vs(r,e)},t.prototype.js=function(t){return Bl.Vs(t)},t.prototype.ii=function(t){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(eo("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Pa();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Zl=function(){function t(){this.li=new Hl,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Hl,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),$l=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Kl=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){eo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){eo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ql={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Jl=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Wl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,Ut.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Qi;s.listenOnce(zi.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Hi.NO_ERROR:var e=s.getResponseJson();eo("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Hi.TIMEOUT:eo("Connection",'RPC "'+t+'" timed out'),o(new Yi(Wi.DEADLINE_EXCEEDED,"Request time out"));break;case Hi.HTTP_ERROR:var n=s.getStatus();if(eo("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Wi).indexOf(e)>=0?e:Wi.UNKNOWN}(r.status);o(new Yi(a,r.message))}else o(new Yi(Wi.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Yi(Wi.UNAVAILABLE,"Connection failed."));break;default:oo()}}finally{eo("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Ui,i=Pn(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new $i({})),this.Fi(o.initMessageHeaders,e),(0,jt.uI)()||(0,jt.b$)()||(0,jt.d)()||(0,jt.w1)()||(0,jt.Mn)()||(0,jt.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");eo("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Jl({Ei:function(t){c?eo("Connection","Not sending because WebChannel is closed:",t):(u||(eo("Connection","Opening WebChannel transport."),a.open(),u=!0),eo("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Ki.EventType.OPEN,function(){c||eo("Connection","WebChannel transport opened.")}),h(a,Ki.EventType.CLOSE,function(){c||(c=!0,eo("Connection","WebChannel transport closed"),l.Vi())}),h(a,Ki.EventType.ERROR,function(t){c||(c=!0,ro("Connection","WebChannel transport errored:",t),l.Vi(new Yi(Wi.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ki.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];so(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){eo("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=fa[t];if(void 0!==e)return va(e)}(i),s=r.message;void 0===o&&(o=Wi.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Yi(o,s)),a.close()}else eo("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Zi.STAT_EVENT,function(t){10===t.stat?eo("Connection","Detected buffering proxy"):11===t.stat&&eo("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);eo("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return eo("RestConnection","Received: ",t),t},function(e){throw ro("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Ql[t]},t}());function Yl(){return"undefined"!=typeof window?window:null}function Xl(){return"undefined"!=typeof document?document:null}function th(t){return new za(t,!0)}var eh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&eo("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),nh=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new eh(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Wi.RESOURCE_EXHAUSTED?(no(e.toString()),no("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Wi.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Yi(Wi.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Ut.mG)(t,void 0,void 0,function(){return(0,Ut.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return eo("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(eo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),rh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,Ut.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:oo()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(so(void 0===e||"string"==typeof e),Eo.fromBase64String(e||"")):(so(void 0===e||e instanceof Uint8Array),Eo.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Wi.UNKNOWN:va(t.code);return new Yi(e,t.message||"")}(a);n=new Va(r,i,o,s||null)}else if("documentChange"in e){i=Xa(t,(r=e.documentChange).document.name),o=Qa(r.document.updateTime);var a=new Jo({mapValue:{fields:r.document.fields}}),u=(s=Yo.newFoundDocument(i,o,a),r.targetIds||[]);n=new La(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Xa(t,(r=e.documentDelete).document),o=r.readTime?Qa(r.readTime):go.min(),a=Yo.newNoDocument(i,o),n=new La([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Xa(t,(r=e.documentRemove).document),n=new La([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return oo();var c=e.filter;i=new ma(r=c.count||0),n=new Fa(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return go.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?go.min():e.readTime?Qa(e.readTime):go.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=nu(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=rs(r)?{documents:uu(t,r)}:{query:cu(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=$a(t,e.resumeToken):e.snapshotVersion.compareTo(go.min())>0&&(n.readTime=Za(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return oo()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=nu(this.R),e.removeTarget=t,this.cr(e)},e}(nh),ih=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,Ut.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(so(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(so(void 0!==e),t.map(function(t){return function(t,e){var n=Qa(t.updateTime?t.updateTime:e);return n.isEqual(go.min())&&(n=Qa(e)),new Ys(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Qa(t.commitTime);return this.listener.Tr(n,e)}return so(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=nu(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return su(e.R,t)})};this.cr(n)},e}(nh),oh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Ut.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Yi(Wi.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Wi.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Yi(Wi.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Wi.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Yi(Wi.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),sh=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(no(e),this.Vr=!1):eo("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),ah=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Ut.mG)(o,void 0,void 0,function(){return(0,Ut.Jh)(this,function(t){switch(t.label){case 0:return mh(this)?(eo("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Ut.mG)(this,void 0,void 0,function(){var e;return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:return(e=ao(t)).Or.add(4),[4,ch(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,uh(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new sh(n,r)};function uh(t){return(0,Ut.mG)(this,void 0,void 0,function(){var e,n;return(0,Ut.Jh)(this,function(r){switch(r.label){case 0:if(!mh(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ch(t){return(0,Ut.mG)(this,void 0,void 0,function(){var e,n;return(0,Ut.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function lh(t,e){var n=ao(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),gh(n)?ph(n):Nh(n).er()&&fh(n,e))}function hh(t,e){var n=ao(t),r=Nh(n);n.$r.delete(e),r.er()&&dh(n,e),0===n.$r.size&&(r.er()?r.ir():mh(n)&&n.Br.set("Unknown"))}function fh(t,e){t.qr.U(e.targetId),Nh(t).mr(e)}function dh(t,e){t.qr.U(e),Nh(t).yr(e)}function ph(t){t.qr=new ja({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Nh(t).start(),t.Br.Sr()}function gh(t){return mh(t)&&!Nh(t).tr()&&t.$r.size>0}function mh(t){return 0===ao(t).Or.size}function yh(t){t.qr=void 0}function vh(t){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){return t.$r.forEach(function(e,n){fh(t,e)}),[2]})})}function bh(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(n){return yh(t),gh(t)?(t.Br.Nr(e),ph(t)):t.Br.set("Unknown"),[2]})})}function wh(t,e,n){return(0,Ut.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Ut.Jh)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Va&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Ut.Jh)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),eo("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,_h(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof La?t.qr.X(e):e instanceof Fa?t.qr.rt(e):t.qr.et(e),n.isEqual(go.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,pl(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Eo.EMPTY_BYTE_STRING,n.snapshotVersion)),dh(t,e);var r=new sc(n.target,e,1,n.sequenceNumber);fh(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return eo("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,_h(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function _h(t,e,n){return(0,Ut.mG)(this,void 0,void 0,function(){var r=this;return(0,Ut.Jh)(this,function(i){switch(i.label){case 0:if(!Wu(e))throw e;return t.Or.add(1),[4,ch(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return pl(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Ut.mG)(r,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){switch(e.label){case 0:return eo("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,uh(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Sh(t,e){return e().catch(function(n){return _h(t,n,e)})}function Ch(t){return(0,Ut.mG)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Ut.Jh)(this,function(s){switch(s.label){case 0:e=ao(t),n=Dh(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return mh(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,yl(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Dh(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,_h(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Eh(e)&&Th(e),[2]}})})}function Eh(t){return mh(t)&&!Dh(t).tr()&&t.kr.length>0}function Th(t){Dh(t).start()}function Ih(t){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){return Dh(t).Ar(),[2]})})}function xh(t){return(0,Ut.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Ut.Jh)(this,function(i){for(e=Dh(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Ah(t,e,n){return(0,Ut.mG)(this,void 0,void 0,function(){var r,i;return(0,Ut.Jh)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=oc.from(r,e,n),[4,Sh(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Ch(t)];case 2:return o.sent(),[2]}})})}function Oh(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:return e&&Dh(t).pr?[4,function(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r;return(0,Ut.Jh)(this,function(i){switch(i.label){case 0:return ya(r=e.code)&&r!==Wi.ABORTED?(n=t.kr.shift(),Dh(t).sr(),[4,Sh(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Ch(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Eh(t)&&Th(t),[2]}})})}function kh(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n;return(0,Ut.Jh)(this,function(r){switch(r.label){case 0:return n=ao(t),e?(n.Or.delete(2),[4,uh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,ch(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Nh(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=ao(t);return r.br(),new rh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:vh.bind(null,t),Ri:bh.bind(null,t),_r:wh.bind(null,t)}),t.Mr.push(function(n){return(0,Ut.mG)(e,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),gh(t)?ph(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),yh(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Dh(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=ao(t);return r.br(),new ih(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Ih.bind(null,t),Ri:Oh.bind(null,t),Ir:xh.bind(null,t),Tr:Ah.bind(null,t)}),t.Mr.push(function(n){return(0,Ut.mG)(e,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Ch(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(eo("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var Ph=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new zu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Yi(Wi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Rh(t,e){if(no("AsyncQueue",e+": "+t),Wu(t))return new Yi(Wi.UNAVAILABLE,e+": "+t);throw t}var Mh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Mo.comparator(e.key,n.key)}:function(t,e){return Mo.comparator(t.key,e.key)},this.keyedMap=xa(),this.sortedSet=new ba(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Lh=function(){function t(){this.Qr=new ba(Mo.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):oo():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Fh=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Mh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ks(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Vh=function(){this.Wr=void 0,this.listeners=[]},Uh=function(){this.queries=new Zc(function(t){return Ns(t)},ks),this.onlineState="Unknown",this.Gr=new Set};function jh(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Ut.Jh)(this,function(c){switch(c.label){case 0:if(n=ao(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Vh),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Rh(a,"Initialization of query '"+Ds(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Hh(n),[2]}})})}function qh(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ut.Jh)(this,function(a){return n=ao(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Gh(t,e){for(var n=ao(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Hh(n)}function Bh(t,e,n){var r=ao(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Hh(t){t.Gr.forEach(function(t){t.next()})}var zh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Fh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Fh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Zh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),$h=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Xa(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?ou(this.R,t.document,!1):Yo.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Qa(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new $h(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Na()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Ut.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Ut.Jh)(this,function(o){switch(o.label){case 0:return[4,El(this.localStore,new $h(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Tl(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new sl(Object.assign({},this.progress),t))]}})})}}();var Kh=function(t){this.key=t},Qh=function(t){this.key=t},Jh=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Na(),this.mutatedKeys=Na(),this.lo=Rs(t),this.fo=new Mh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Lh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Ss(this.query)&&i.size===this.query.limit?i.last():null,c=Cs(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Ps(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Ss(this.query)||Cs(this.query))for(;s.size>this.query.limit;){var l=Ss(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oo()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Fh(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Lh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Na(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Qh(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Kh(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Na();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Fh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Wh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Yh=function(t){this.key=t,this.bo=!1},Xh=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Zc(function(t){return Ns(t)},ks),this.Vo=new Map,this.So=new Set,this.Do=new ba(Mo.comparator),this.Co=new Map,this.No=new xl,this.xo={},this.Fo=new Map,this.ko=Rc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function tf(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ut.Jh)(this,function(a){switch(a.label){case 0:return n=kf(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,vl(n.localStore,As(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,ef(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&lh(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function ef(t,e,n,r){return(0,Ut.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,Ut.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,Ut.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Ut.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,wl(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(gf(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,wl(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Jh(e,i.Bn),s=o._o(i.documents),a=Ma.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),gf(t,n,u.To),c=new Wh(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function nf(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Ut.Jh)(this,function(o){switch(o.label){case 0:return n=ao(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!ks(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,bl(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),hh(n.remoteStore,r.targetId),df(n,r.targetId)}).catch(Uc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return df(n,r.targetId),[4,bl(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function rf(t,e,n){return(0,Ut.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ut.Jh)(this,function(a){switch(a.label){case 0:r=Nf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=ao(t),i=po.now(),o=e.reduce(function(t,e){return t.add(e.key)},Na());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=ia(c,n.get(c.key));null!=l&&s.push(new ua(c.key,l,Wo(l.value.mapValue),Xs.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new ba(lo)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,vf(r,i.changes)];case 3:return a.sent(),[4,Ch(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Rh(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function of(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r;return(0,Ut.Jh)(this,function(i){switch(i.label){case 0:n=ao(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,gl(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(so(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?so(r.bo):t.removedDocuments.size>0&&(so(r.bo),r.bo=!1))}),[4,vf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Uc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function sf(t,e,n){var r=ao(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=ao(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Hh(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function af(t,e,n){return(0,Ut.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Ut.Jh)(this,function(c){switch(c.label){case 0:return(r=ao(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new ba(Mo.comparator)).insert(o,Yo.newNoDocument(o,go.min())),a=Na().add(o),u=new Ra(go.min(),new Map,new Sa(lo),s,a),[4,of(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),yf(r),[3,4];case 2:return[4,bl(r.localStore,e,!1).then(function(){return df(r,e,n)}).catch(Uc)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function uf(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Ut.Jh)(this,function(o){switch(o.label){case 0:n=ao(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,dl(n.localStore,e)];case 2:return i=o.sent(),ff(n,r,null),hf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,vf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Uc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function cf(t,e,n){return(0,Ut.mG)(this,void 0,void 0,function(){var r,i;return(0,Ut.Jh)(this,function(o){switch(o.label){case 0:r=ao(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ao(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return so(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),ff(r,e,n),hf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,vf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Uc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function lf(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ut.Jh)(this,function(a){switch(a.label){case 0:mh((n=ao(t)).remoteStore)||eo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=ao(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Rh(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function hf(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function ff(t,e,n){var r=ao(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function df(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||pf(t,e)})}function pf(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(hh(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),yf(t))}function gf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Kh?(t.No.addReference(o.key,e),mf(t,o)):o instanceof Qh?(eo("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||pf(t,o.key)):oo()}}function mf(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(eo("SyncEngine","New document in limbo: "+n),t.So.add(r),yf(t))}function yf(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Mo(wo.fromString(e)),r=t.ko.next();t.Co.set(r,new Yh(n)),t.Do=t.Do.insert(n,r),lh(t.remoteStore,new sc(As(_s(n.path)),r,2,Ji.o))}}function vf(t,e,n){return(0,Ut.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ut.Jh)(this,function(a){switch(a.label){case 0:return r=ao(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=ul.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,Ut.Jh)(this,function(l){switch(l.label){case 0:n=ao(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Zu.forEach(e,function(e){return Zu.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Zu.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Wu(r=l.sent()))throw r;return eo("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function bf(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r;return(0,Ut.Jh)(this,function(i){switch(i.label){case 0:return(n=ao(t)).currentUser.isEqual(e)?[3,3]:(eo("SyncEngine","User change. New user:",e.toKey()),[4,fl(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Yi(Wi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,vf(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function wf(t,e){var n=ao(t),r=n.Co.get(e);if(r&&r.bo)return Na().add(r.key);var i=Na(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function _f(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Ut.Jh)(this,function(o){switch(o.label){case 0:return[4,wl((n=ao(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&gf(n,e.targetId,i.To),i)]}})})}function Sf(t){return(0,Ut.mG)(this,void 0,void 0,function(){var e;return(0,Ut.Jh)(this,function(n){return[2,Sl((e=ao(t)).localStore).then(function(t){return vf(e,t)})]})})}function Cf(t,e,n,r){return(0,Ut.mG)(this,void 0,void 0,function(){var i,o;return(0,Ut.Jh)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=ao(t),r=ao(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Zu.resolve(null)})})}((i=ao(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Ch(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(ff(i,e,r||null),hf(i,e),function(t,e){ao(ao(t)._n).Gt(e)}(i.localStore,e)):oo(),s.label=4;case 4:return[4,vf(i,o)];case 5:return s.sent(),[3,7];case 6:eo("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Ef(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Ut.Jh)(this,function(c){switch(c.label){case 0:return kf(n=ao(t)),Nf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Tf(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,kh(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)lh(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return df(n,e),bl(n.localStore,e,!0)}),hh(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Tf(n,a)];case 5:return c.sent(),function(t){var e=ao(t);e.Co.forEach(function(t,n){hh(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new ba(Mo.comparator)}(n),n.$o=!1,[4,kh(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Tf(t,e,n){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return(0,Ut.Jh)(this,function(g){switch(g.label){case 0:n=ao(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,vl(n.localStore,As(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,_f(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,_l(n.localStore,a)];case 8:return p=g.sent(),[4,vl(n.localStore,p)];case 9:return u=g.sent(),[4,ef(n,If(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function If(t){return ws(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function xf(t){var e=ao(t);return ao(ao(e.localStore).persistence).fn()}function Af(t,e,n,r){return(0,Ut.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Ut.Jh)(this,function(a){switch(a.label){case 0:return(i=ao(t)).$o?(eo("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Sl(i.localStore)];case 3:return o=a.sent(),s=Ra.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,vf(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,bl(i.localStore,e,!0)];case 6:return a.sent(),df(i,e,r),[3,8];case 7:oo(),a.label=8;case 8:return[2]}})})}function Of(t,e,n){return(0,Ut.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,Ut.Jh)(this,function(f){switch(f.label){case 0:if(!(r=kf(t)).$o)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(eo("SyncEngine","Adding an already active target "+s),[3,5]):[4,_l(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,vl(r.localStore,a)];case 3:return u=f.sent(),[4,ef(r,If(a),u.targetId,!1)];case 4:f.sent(),lh(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Ut.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,bl(r.localStore,t,!1).then(function(){hh(r.remoteStore,t),df(r,t)}).catch(Uc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function kf(t){var e=ao(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=of.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=af.bind(null,e),e.vo._r=Gh.bind(null,e.eventManager),e.vo.Mo=Bh.bind(null,e.eventManager),e}function Nf(t){var e=ao(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cf.bind(null,e),e}var Df=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){switch(e.label){case 0:return this.R=th(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return hl(this.persistence,new cl,t.initialUser,this.R)},t.prototype.qo=function(t){return new Pl(Ml.bs,this.R)},t.prototype.Bo=function(t){return new Zl},t.prototype.terminate=function(){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Pf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Ut.ZT)(e,t),e.prototype.initialize=function(e){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Cl(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,Nf(this.Qo.syncEngine)];case 4:return n.sent(),[4,Ch(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return hl(this.persistence,new cl,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Gc(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=ol(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ic.withCacheSize(this.cacheSizeBytes):Ic.DEFAULT;return new nl(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Yl(),Xl(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Zl},e}(Df),Rf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Ut.ZT)(e,t),e.prototype.initialize=function(e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Ut.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof zl?(this.sharedClientState.syncEngine={ui:Cf.bind(null,n),ai:Af.bind(null,n),hi:Of.bind(null,n),fn:xf.bind(null,n),ci:Sf.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Ut.mG)(r,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){switch(e.label){case 0:return[4,Ef(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Yl();if(!zl.yt(e))throw new Yi(Wi.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ol(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new zl(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Pf),Mf=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n=this;return(0,Ut.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return sf(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=bf.bind(null,this.syncEngine),[4,kh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Uh},t.prototype.createDatastore=function(t){var e=th(t.databaseInfo.databaseId),n=new Wl(t.databaseInfo);return function(t,e,n){return new oh(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return sf(s.syncEngine,t,0)},o=Kl.yt()?new Kl:new $l,new ah(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Xh(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Ut.mG)(this,void 0,void 0,function(){var e;return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:return e=ao(t),eo("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,ch(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Lf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Ff=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new zu,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Ut.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Ut.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Zh(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Ut.mG)(this,void 0,void 0,function(){var t,e;return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Ut.mG)(this,void 0,void 0,function(){var e;return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Ut.mG)(this,void 0,void 0,function(){var t,e;return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Ut.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Ut.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Yi(Wi.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Ut.Jh)(this,function(u){switch(u.label){case 0:return n=ao(t),r=nu(n.R)+"/documents",i={documents:e.map(function(t){return Ya(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){so(!!e.found);var n=Xa(t,e.found.name),r=Qa(e.found.updateTime),i=new Jo({mapValue:{fields:e.found.fields}});return Yo.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){so(!!e.missing),so(!!e.readTime);var n=Xa(t,e.missing),r=Qa(e.readTime);return Yo.newNoDocument(n,r)}(t,e):oo()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());so(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new pa(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Ut.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Mo.fromPath(n);e.mutations.push(new ga(r,e.precondition(r)))}),[4,function(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Ut.Jh)(this,function(o){switch(o.label){case 0:return n=ao(t),r=nu(n.R)+"/documents",i={writes:e.map(function(t){return su(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw oo();e=go.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Yi(Wi.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Xs.updateTime(e):Xs.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(go.min()))throw new Yi(Wi.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xs.updateTime(e)}return Xs.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Vf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new eh(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Ut.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,Ut.Jh)(this,function(r){return t=new Ff(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Do(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ya(e)}return!1},t}(),Uf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Ll.UNAUTHENTICATED,this.clientId=co.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,Ut.mG)(r,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){switch(e.label){case 0:return eo("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Yi(Wi.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new zu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Ut.mG)(t,void 0,void 0,function(){var t,n;return(0,Ut.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Rh(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function jf(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,Ut.Jh)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),eo("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,Ut.mG)(i,void 0,void 0,function(){return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,fl(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function qf(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r;return(0,Ut.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Gf(t)];case 1:return n=i.sent(),eo("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,Ut.mG)(this,void 0,void 0,function(){var n,r;return(0,Ut.Jh)(this,function(i){switch(i.label){case 0:return(n=ao(t)).asyncQueue.verifyOperationInProgress(),eo("RemoteStore","RemoteStore received new credentials"),r=mh(n),n.Or.add(3),[4,ch(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,uh(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function Gf(t){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(eo("FirestoreClient","Using default OfflineComponentProvider"),[4,jf(t,new Df)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Bf(t){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(eo("FirestoreClient","Using default OnlineComponentProvider"),[4,qf(t,new Mf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Hf(t){return Gf(t).then(function(t){return t.persistence})}function zf(t){return Gf(t).then(function(t){return t.localStore})}function Zf(t){return Bf(t).then(function(t){return t.remoteStore})}function $f(t){return Bf(t).then(function(t){return t.syncEngine})}function Kf(t){return(0,Ut.mG)(this,void 0,void 0,function(){var e,n;return(0,Ut.Jh)(this,function(r){switch(r.label){case 0:return[4,Bf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=tf.bind(null,e.syncEngine),n.onUnlisten=nf.bind(null,e.syncEngine),n)]}})})}function Qf(t,e,n){var r=this;void 0===n&&(n={});var i=new zu;return t.asyncQueue.enqueueAndForget(function(){return(0,Ut.mG)(r,void 0,void 0,function(){var r;return(0,Ut.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Lf({next:function(o){e.enqueueAndForget(function(){return qh(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Yi(Wi.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Yi(Wi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new zh(_s(n.path),o,{includeMetadataChanges:!0,so:!0});return jh(t,s)},[4,Kf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Jf(t,e,n){var r=this;void 0===n&&(n={});var i=new zu;return t.asyncQueue.enqueueAndForget(function(){return(0,Ut.mG)(r,void 0,void 0,function(){var r;return(0,Ut.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Lf({next:function(n){e.enqueueAndForget(function(){return qh(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Yi(Wi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new zh(n,o,{includeMetadataChanges:!0,so:!0});return jh(t,s)},[4,Kf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Wf=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Yf=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Xf=new Map,td=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},ed=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Ll.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),nd=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),rd=function(){function t(t){var e=this;this.currentUser=Ll.UNAUTHENTICATED,this.oc=new zu,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){eo("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(eo("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(eo("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(so("string"==typeof n.accessToken),new td(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,Ut.mG)(n,void 0,void 0,function(){return(0,Ut.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return so(null===t||"string"==typeof t),new Ll(t)},t}(),id=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Ll.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),od=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new id(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Ll.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function sd(t,e,n){if(!n)throw new Yi(Wi.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function ad(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Yi(Wi.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ud(t,e,n,r){if(!0===e&&!0===r)throw new Yi(Wi.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function cd(t){if(!Mo.isDocumentKey(t))throw new Yi(Wi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function ld(t){if(Mo.isDocumentKey(t))throw new Yi(Wi.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function hd(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":oo()}function fd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Yi(Wi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=hd(t);throw new Yi(Wi.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function dd(t,e){if(e<=0)throw new Yi(Wi.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var pd=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Yi(Wi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Yi(Wi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,ud("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),gd=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pd({}),this._settingsFrozen=!1,t instanceof Yf?(this._databaseId=t,this._credentials=new ed):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Yi(Wi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yf(t.options.projectId)}(t),this._credentials=new rd(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Yi(Wi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Yi(Wi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pd(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ed;switch(t.type){case"gapi":var e=t.client;return so(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new od(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Yi(Wi.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Xf.get(this))&&(eo("ComponentProvider","Removing Datastore"),Xf.delete(this),t.terminate()),Promise.resolve();var t},t}(),md=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new vd(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),yd=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),vd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,_s(r))||this)._path=r,i.type="collection",i}return(0,Ut.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new md(this.firestore,null,new Mo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(yd);function bd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,jt.m9)(t),sd("collection","path",e),t instanceof gd)return ld(n=wo.fromString.apply(wo,(0,Ut.ev)([e],r))),new vd(t,null,n);if(!(t instanceof md||t instanceof vd))throw new Yi(Wi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ld(n=wo.fromString.apply(wo,(0,Ut.ev)([t.path],r)).child(wo.fromString(e))),new vd(t.firestore,null,n)}function wd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,jt.m9)(t),1===arguments.length&&(e=co.u()),sd("doc","path",e),t instanceof gd)return cd(n=wo.fromString.apply(wo,(0,Ut.ev)([e],r))),new md(t,null,new Mo(n));if(!(t instanceof md||t instanceof vd))throw new Yi(Wi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cd(n=t._path.child(wo.fromString.apply(wo,(0,Ut.ev)([e],r)))),new md(t.firestore,t instanceof vd?t.converter:null,new Mo(n))}function _d(t,e){return t=(0,jt.m9)(t),e=(0,jt.m9)(e),(t instanceof md||t instanceof vd)&&(e instanceof md||e instanceof vd)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Sd(t,e){return t=(0,jt.m9)(t),e=(0,jt.m9)(e),t instanceof yd&&e instanceof yd&&t.firestore===e.firestore&&ks(t._query,e._query)&&t.converter===e.converter}var Cd=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new eh(this,"async_queue_retry"),this.Ic=function(){var e=Xl();e&&eo("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Xl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Xl();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new zu;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},t.prototype.bc=function(){return(0,Ut.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Wu(t=n.sent()))throw t;return eo("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),n.label=5;case 5:return[2]}})})},t.prototype.Rc=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,no("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=Ph.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&oo()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,Ut.mG)(this,void 0,void 0,function(){var t;return(0,Ut.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()})},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Ed(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new zu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Td=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Cd,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Ut.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||xd(this),this._firestoreClient.terminate()},e}(gd);function Id(t){return t._firestoreClient||xd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function xd(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Wf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Uf(t._credentials,t._queue,r)}function Ad(t,e,n){var r=this,i=new zu;return t.asyncQueue.enqueue(function(){return(0,Ut.mG)(r,void 0,void 0,function(){var r;return(0,Ut.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,jf(t,n)];case 1:return o.sent(),[4,qf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Wi.FAILED_PRECONDITION||t.code===Wi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Od(t){if(t._initialized||t._terminated)throw new Yi(Wi.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var kd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Yi(Wi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new So(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Nd=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Eo.fromBase64String(e))}catch(e){throw new Yi(Wi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Eo.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Dd=function(t){this._methodName=t},Pd=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Yi(Wi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Yi(Wi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return lo(this._lat,t._lat)||lo(this._long,t._long)},t}(),Rd=/^__.*__$/,Md=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ua(t,this.data,this.fieldMask,e,this.fieldTransforms):new aa(t,this.data,e,this.fieldTransforms)},t}(),Ld=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ua(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Fd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oo()}}var Vd=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return ip(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(Fd(this.Nc)&&Rd.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),Ud=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||th(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Vd({Nc:t,methodName:e,qc:n,path:So.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function jd(t){var e=t._freezeSettings(),n=th(t._databaseId);return new Ud(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qd(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);tp("Data must be an object, but it was:",s,r);var a,u,c=Yd(r,s);if(o.merge)a=new Co(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=ep(e,f[h],n);if(!s.contains(d))throw new Yi(Wi.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");op(l,d)||l.push(d)}a=new Co(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Md(new Jo(c),a,u)}var Gd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ut.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Dd);function Bd(t,e,n){return new Vd({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Hd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ut.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new Ws(t.path,new Bs)},e.prototype.isEqual=function(t){return t instanceof e},e}(Dd),zd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Ut.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Bd(this,t,!0),n=this.Kc.map(function(t){return Wd(t,e)}),r=new Hs(n);return new Ws(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Dd),Zd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Ut.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Bd(this,t,!0),n=this.Kc.map(function(t){return Wd(t,e)}),r=new Zs(n);return new Ws(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Dd),$d=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,Ut.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Ks(t.R,Vs(t.R,this.Qc));return new Ws(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Dd);function Kd(t,e,n,r){var i=t.Uc(1,e,n);tp("Data must be an object, but it was:",i,r);var o=[],s=Jo.empty();yo(r,function(t,r){var a=rp(e,t,n);r=(0,jt.m9)(r);var u=i.Oc(a);if(r instanceof Gd)o.push(a);else{var c=Wd(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Co(o);return new Ld(s,a,i.fieldTransforms)}function Qd(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[ep(e,r,n)],u=[i];if(o.length%2!=0)throw new Yi(Wi.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(ep(e,o[c])),u.push(o[c+1]);for(var l=[],h=Jo.empty(),f=a.length-1;f>=0;--f)if(!op(l,a[f])){var d=a[f],p=u[f];p=(0,jt.m9)(p);var g=s.Oc(d);if(p instanceof Gd)l.push(d);else{var m=Wd(p,g);null!=m&&(l.push(d),h.set(d,m))}}var y=new Co(l);return new Ld(h,y,s.fieldTransforms)}function Jd(t,e,n,r){return void 0===r&&(r=!1),Wd(n,t.Uc(r?4:3,e))}function Wd(t,e){if(Xd(t=(0,jt.m9)(t)))return tp("Unsupported field value:",e,t),Yd(t,e);if(t instanceof Dd)return function(t,e){if(!Fd(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Wd(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,jt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Vs(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=po.fromDate(t);return{timestampValue:Za(e.R,n)}}if(t instanceof po)return n=new po(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Za(e.R,n)};if(t instanceof Pd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Nd)return{bytesValue:$a(e.R,t._byteString)};if(t instanceof md){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ja(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+hd(t))}(t,e)}function Yd(t,e){var n={};return vo(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(t,function(t,r){var i=Wd(r,e.Fc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Xd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof po||t instanceof Pd||t instanceof Nd||t instanceof md||t instanceof Dd)}function tp(t,e,n){if(!Xd(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=hd(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function ep(t,e,n){if((e=(0,jt.m9)(e))instanceof kd)return e._internalPath;if("string"==typeof e)return rp(t,e);throw ip("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var np=new RegExp("[~\\*/\\[\\]]");function rp(t,e,n){if(e.search(np)>=0)throw ip("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(kd.bind.apply(kd,(0,Ut.ev)([void 0],e.split(".")))))._internalPath}catch(ig){throw ip("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function ip(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Yi(Wi.INVALID_ARGUMENT,(a+=". ")+t+u)}function op(t,e){return t.some(function(t){return t.isEqual(e)})}var sp=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new md(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new ap(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(up("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),ap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ut.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(sp);function up(t,e){return"string"==typeof e?rp(t,e):e instanceof kd?e._internalPath:e._delegate._internalPath}var cp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),lp=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,Ut.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new hp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(up("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(sp),hp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ut.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(lp),fp=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new cp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new hp(n._firestore,n._userDataWriter,r.key,r,new cp(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Yi(Wi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new hp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new cp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new hp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new cp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:dp(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function dp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oo()}}function pp(t,e){return t instanceof lp&&e instanceof lp?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof fp&&e instanceof fp&&t._firestore===e._firestore&&Sd(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function gp(t){if(Cs(t)&&0===t.explicitOrderBy.length)throw new Yi(Wi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var mp=function(){};function yp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var vp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,Ut.ZT)(e,t),e.prototype._apply=function(t){var e=jd(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Yi(Wi.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Tp(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Ep(r,t,l[c]));a={arrayValue:{values:u}}}else a=Ep(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Tp(s,o),a=Jd(n,"where",s,"in"===o||"not-in"===o);var h=is.create(i,o,a);return function(t,e){if(e.g()){var n=Ts(t);if(null!==n&&!n.isEqual(e.field))throw new Yi(Wi.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Es(t);null!==r&&Ip(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Yi(Wi.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new yd(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(mp),bp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,Ut.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Yi(Wi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Yi(Wi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new gs(e,n);return function(t,e){if(null===Es(t)){var n=Ts(t);null!==n&&Ip(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new yd(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new bs(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(mp),wp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,Ut.ZT)(e,t),e.prototype._apply=function(t){return new yd(t.firestore,t.converter,Os(t._query,this.Hc,this.Jc))},e}(mp),_p=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,Ut.ZT)(e,t),e.prototype._apply=function(t){var e=Cp(t,this.type,this.Yc,this.Xc);return new yd(t.firestore,t.converter,function(t,e){return new bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(mp),Sp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,Ut.ZT)(e,t),e.prototype._apply=function(t){var e=Cp(t,this.type,this.Yc,this.Xc);return new yd(t.firestore,t.converter,function(t,e){return new bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(mp);function Cp(t,e,n,r){if(n[0]=(0,jt.m9)(n[0]),n[0]instanceof sp)return function(t,e,n,r,i){if(!r)throw new Yi(Wi.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=xs(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Bo(e,r.key));else{var c=r.data.field(u.field);if(Oo(c))throw new Yi(Wi.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Yi(Wi.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ds(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=jd(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Yi(Wi.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Yi(Wi.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Is(t)&&-1!==c.indexOf("/"))throw new Yi(Wi.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(wo.fromString(c));if(!Mo.isDocumentKey(l))throw new Yi(Wi.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Mo(l);a.push(Bo(e,h))}else{var f=Jd(n,r,c);a.push(f)}}return new ds(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Ep(t,e,n){if("string"==typeof(n=(0,jt.m9)(n))){if(""===n)throw new Yi(Wi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Is(e)&&-1!==n.indexOf("/"))throw new Yi(Wi.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(wo.fromString(n));if(!Mo.isDocumentKey(r))throw new Yi(Wi.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Bo(t,new Mo(r))}if(n instanceof md)return Bo(t,n._key);throw new Yi(Wi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+hd(n)+".")}function Tp(t,e){if(!Array.isArray(t)||0===t.length)throw new Yi(Wi.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Yi(Wi.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Ip(t,e,n){if(!n.isEqual(e))throw new Yi(Wi.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var xp=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Lo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return xo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ao(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw oo()}},t.prototype.convertObject=function(t,e){var n=this,r={};return yo(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Pd(xo(t.latitude),xo(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=ko(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(No(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Io(t);return new po(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=wo.fromString(t);so(_u(n));var r=new Yf(n.get(1),n.get(3)),i=new Mo(n.popFirst(5));return r.isEqual(e)||no("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Ap(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Op=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Ut.ZT)(e,t),e.prototype.convertBytes=function(t){return new Nd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new md(this.firestore,null,e)},e}(xp),kp=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=jd(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Np(t,this._firestore),i=Ap(r.converter,e,n),o=qd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Xs.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Np(t,this._firestore);return o="string"==typeof(e=(0,jt.m9)(e))||e instanceof kd?Qd(this._dataReader,"WriteBatch.update",s._key,e,n,r):Kd(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Xs.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Np(t,this._firestore);return this._mutations=this._mutations.concat(new pa(e._key,Xs.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Yi(Wi.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Np(t,e){if((t=(0,jt.m9)(t)).firestore!==e)throw new Yi(Wi.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Dp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Ut.ZT)(e,t),e.prototype.convertBytes=function(t){return new Nd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new md(this.firestore,null,e)},e}(xp);function Pp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=fd(t,md);var o=fd(t.firestore,Td),s=jd(o);return Mp(o,[("string"==typeof(e=(0,jt.m9)(e))||e instanceof kd?Qd(s,"updateDoc",t._key,e,n,r):Kd(s,"updateDoc",t._key,e)).toMutation(t._key,Xs.exists(!0))])}function Rp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,jt.m9)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Ed(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Ed(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof md)c=fd(t.firestore,Td),l=_s(t._key.path),u={next:function(e){i[a]&&i[a](Lp(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=fd(t,yd);c=fd(d.firestore,Td),l=d._query;var p=new Dp(c);u={next:function(t){i[a]&&i[a](new fp(c,p,d,t))},error:i[a+1],complete:i[a+2]},gp(t._query)}return function(t,e,n,r){var i=this,o=new Lf(r),s=new zh(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Ut.mG)(i,void 0,void 0,function(){var e;return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:return e=jh,[4,Kf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Ut.mG)(i,void 0,void 0,function(){var e;return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:return e=qh,[4,Kf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Id(c),l,h,u)}function Mp(t,e){return function(t,e){var n=this,r=new zu;return t.asyncQueue.enqueueAndForget(function(){return(0,Ut.mG)(n,void 0,void 0,function(){var n;return(0,Ut.Jh)(this,function(i){switch(i.label){case 0:return n=rf,[4,$f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Id(t),e)}function Lp(t,e,n){var r=n.docs.get(e._key),i=new Dp(t);return new lp(t,i,e._key,r,new cp(n.hasPendingWrites,n.fromCache),e.converter)}var Fp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Ut.ZT)(e,t),e.prototype.get=function(e){var n=this,r=Np(e,this._firestore),i=new Dp(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new lp(n._firestore,i,r._key,t._document,new cp(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=jd(t)}return t.prototype.get=function(t){var e=this,n=Np(t,this._firestore),r=new Op(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return oo();var i=t[0];if(i.isFoundDocument())return new sp(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new sp(e._firestore,r,n._key,null,n.converter);throw oo()})},t.prototype.set=function(t,e,n){var r=Np(t,this._firestore),i=Ap(r.converter,e,n),o=qd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Np(t,this._firestore);return o="string"==typeof(e=(0,jt.m9)(e))||e instanceof kd?Qd(this._dataReader,"Transaction.update",s._key,e,n,r):Kd(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Np(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Vp(){if("undefined"==typeof Uint8Array)throw new Yi(Wi.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Up(){if("undefined"==typeof atob)throw new Yi(Wi.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var jp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Up(),new t(Nd.fromBase64String(e))},t.fromUint8Array=function(e){return Vp(),new t(Nd.fromUint8Array(e))},t.prototype.toBase64=function(){return Up(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Vp(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),qp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Od(t=fd(t,Td));var n=Id(t),r=t._freezeSettings(),i=new Mf;return Ad(n,i,new Pf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Od(t=fd(t,Td));var e=Id(t),n=t._freezeSettings(),r=new Mf;return Ad(e,r,new Rf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Yi(Wi.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new zu;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Ut.mG)(e,void 0,void 0,function(){var e;return(0,Ut.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Ut.mG)(this,void 0,void 0,function(){return(0,Ut.Jh)(this,function(e){switch(e.label){case 0:return Ku.yt()?[4,Ku.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(ol(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Gp=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Yf||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||ro("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=fd(t,gd))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&ro("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,jt.Sg)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Yi(Wi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new nd(new td(o,new Ll(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Ut.mG)(e,void 0,void 0,function(){var e,n;return(0,Ut.Jh)(this,function(r){switch(r.label){case 0:return[4,Hf(t)];case 1:return e=r.sent(),[4,Zf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=ao(t);return e.Or.delete(0),uh(e)}(n))]}})})})}(Id(fd(this._delegate,Td)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Ut.mG)(e,void 0,void 0,function(){var e,n;return(0,Ut.Jh)(this,function(r){switch(r.label){case 0:return[4,Hf(t)];case 1:return e=r.sent(),[4,Zf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Ut.mG)(this,void 0,void 0,function(){var e;return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:return(e=ao(t)).Or.add(0),[4,ch(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Id(fd(this._delegate,Td)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ud("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new zu;return t.asyncQueue.enqueueAndForget(function(){return(0,Ut.mG)(e,void 0,void 0,function(){var e;return(0,Ut.Jh)(this,function(r){switch(r.label){case 0:return e=lf,[4,$f(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Id(fd(this._delegate,Td)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Lf(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Ut.mG)(n,void 0,void 0,function(){var e;return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){ao(t).Gr.add(e),e.next()},[4,Kf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Ut.mG)(n,void 0,void 0,function(){var e;return(0,Ut.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){ao(t).Gr.delete(e)},[4,Kf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Id(t=fd(t,Td)),Ed(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Yi(Wi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new ng(this,bd(this._delegate,t))}catch(t){throw Kp(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new $p(this,wd(this._delegate,t))}catch(t){throw Kp(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Xp(this,function(t,e){if(t=fd(t,gd),sd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Yi(Wi.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new yd(t,null,function(t){return new bs(wo.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Kp(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new zu;return t.asyncQueue.enqueueAndForget(function(){return(0,Ut.mG)(n,void 0,void 0,function(){var n;return(0,Ut.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return Bf(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Vf(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Id(t),function(n){return e(new Fp(t,n))})}(this._delegate,function(n){return t(new Hp(e,n))})},t.prototype.batch=function(){var t=this;return Id(this._delegate),new zp(new kp(this._delegate,function(e){return Mp(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Yi(Wi.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Yi(Wi.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Bp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Ut.ZT)(e,t),e.prototype.convertBytes=function(t){return new jp(new Nd(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return $p.eu(e,this.firestore,null)},e}(xp),Hp=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Bp(t)}return t.prototype.get=function(t){var e=this,n=rg(t);return this._delegate.get(n).then(function(t){return new Wp(e._firestore,new lp(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=rg(t);return n?(ad("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=rg(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Ut.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=rg(t);return this._delegate.delete(e),this},t}(),zp=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=rg(t);return n?(ad("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=rg(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Ut.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=rg(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Zp=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new hp(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Yp(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Bp(e),n),i.set(n,o)),o},t}();Zp.su=new WeakMap;var $p=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Bp(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Yi(Wi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new md(n._delegate,r,new Mo(e)))},t.eu=function(e,n,r){return new t(n,new md(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ng(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new ng(this.firestore,bd(this._delegate,t))}catch(t){throw Kp(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,jt.m9)(t))instanceof md&&_d(this._delegate,t)},t.prototype.set=function(t,e){e=ad("DocumentReference.set",e);try{return function(t,e,n){t=fd(t,md);var r=fd(t.firestore,Td),i=Ap(t.converter,e,n);return Mp(r,[qd(jd(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Xs.none())])}(this._delegate,t,e)}catch(t){throw Kp(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Pp(this._delegate,t):Pp.apply(void 0,(0,Ut.ev)([this._delegate,t,e],n))}catch(t){throw Kp(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Mp(fd((t=this._delegate).firestore,Td),[new pa(t._key,Xs.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Qp(e),i=Jp(e,function(e){return new Wp(t.firestore,new lp(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return Rp(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=fd(t,md);var e=fd(t.firestore,Td),n=Id(e),r=new Dp(e);return function(t,e){var n=this,r=new zu;return t.asyncQueue.enqueueAndForget(function(){return(0,Ut.mG)(n,void 0,void 0,function(){var n;return(0,Ut.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Ut.mG)(this,void 0,void 0,function(){var r,i;return(0,Ut.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ao(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Yi(Wi.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Rh(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,zf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new lp(e,r,t._key,n,new cp(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=fd(t,md);var e=fd(t.firestore,Td);return Qf(Id(e),t._key,{source:"server"}).then(function(n){return Lp(e,t,n)})}(this._delegate):function(t){t=fd(t,md);var e=fd(t.firestore,Td);return Qf(Id(e),t._key).then(function(n){return Lp(e,t,n)})}(this._delegate)).then(function(t){return new Wp(e.firestore,new lp(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Zp.nu(this.firestore,e):null))},t}();function Kp(t,e,n){return t.message=t.message.replace(e,n),t}function Qp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Ed(r))return r}return{}}function Jp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Ed(t[0])?t[0]:Ed(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Wp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new $p(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return pp(this._delegate,t._delegate)},t}(),Yp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ut.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Wp),Xp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Bp(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,yp(this._delegate,function(t,e,n){var r=e,i=up("where",t);return new vp(i,r,n)}(e,n,r)))}catch(e){throw Kp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,yp(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=up("orderBy",t);return new bp(r,n)}(e,n)))}catch(e){throw Kp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,yp(this._delegate,function(t){return dd("limit",t),new wp("limit",t,"F")}(e)))}catch(e){throw Kp(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,yp(this._delegate,function(t){return dd("limitToLast",t),new wp("limitToLast",t,"L")}(e)))}catch(e){throw Kp(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,yp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _p("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Kp(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,yp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _p("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Kp(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,yp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sp("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Kp(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,yp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sp("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Kp(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Sd(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=fd(t,yd);var e=fd(t.firestore,Td),n=Id(e),r=new Dp(e);return function(t,e){var n=this,r=new zu;return t.asyncQueue.enqueueAndForget(function(){return(0,Ut.mG)(n,void 0,void 0,function(){var n;return(0,Ut.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Ut.mG)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Ut.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,wl(t,e,!0)];case 1:return a=u.sent(),r=new Jh(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Rh(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,zf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new fp(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=fd(t,yd);var e=fd(t.firestore,Td),n=Id(e),r=new Dp(e);return Jf(n,t._query,{source:"server"}).then(function(n){return new fp(e,r,t,n)})}(this._delegate):function(t){t=fd(t,yd);var e=fd(t.firestore,Td),n=Id(e),r=new Dp(e);return gp(t._query),Jf(n,t._query).then(function(n){return new fp(e,r,t,n)})}(this._delegate)).then(function(t){return new eg(e.firestore,new fp(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Qp(e),i=Jp(e,function(e){return new eg(t.firestore,new fp(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Rp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Zp.nu(this.firestore,e):null))},t}(),tg=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Yp(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),eg=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Xp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Yp(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new tg(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Yp(n._firestore,r))})},t.prototype.isEqual=function(t){return pp(this._delegate,t._delegate)},t}(),ng=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Ut.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new $p(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new $p(this.firestore,void 0===t?wd(this._delegate):wd(this._delegate,t))}catch(t){throw Kp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=fd(t.firestore,Td),r=wd(t),i=Ap(t.converter,e);return Mp(n,[qd(jd(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Xs.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new $p(e.firestore,t)})},e.prototype.isEqual=function(t){return _d(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Zp.nu(this.firestore,t):null))},e}(Xp);function rg(t){return fd(t,md)}var ig,og=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(kd.bind.apply(kd,(0,Ut.ev)([void 0],t)))}return t.documentId=function(){return new t(So.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,jt.m9)(t))instanceof kd&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),sg=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Hd("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Gd("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zd("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zd("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new $d("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),ag=n(6034),ug={Firestore:Gp,GeoPoint:Pd,Timestamp:po,Blob:jp,Transaction:Hp,WriteBatch:zp,DocumentReference:$p,DocumentSnapshot:Wp,Query:Xp,QueryDocumentSnapshot:Yp,QuerySnapshot:eg,CollectionReference:ng,FieldPath:og,FieldValue:sg,setLogLevel:function(t){Xi.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new ag.wA("firestore",function(t){return function(t,e){return new Gp(t,new Td(t,e),new qp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},ug)))})(ig=Vt.Z),ig.registerVersion("@firebase/firestore","2.3.9");var cg=n(9765),lg=(n(6682),n(5345));function hg(t,e){return"function"==typeof e?n=>n.pipe(hg((n,r)=>(0,yt.D)(t(n,r)).pipe((0,xt.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new fg(t))}class fg{constructor(t){this.project=t}call(t,e){return e.subscribe(new dg(t,this.project))}}class dg extends lg.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new lg.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,lg.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}n(7771);var pg=n(5319),gg=n(7971);n(8858);const mg=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),yg=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var vg=n(9193);function bg(t){return e=>0===t?(0,vg.c)():e.lift(new wg(t))}class wg{constructor(t){if(this.total=t,this.total<0)throw new yg}call(t,e){return e.subscribe(new _g(t,this.total))}}class _g extends Ct.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Sg(t=null){return e=>e.lift(new Cg(t))}class Cg{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Eg(t,this.defaultValue))}}class Eg extends Ct.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Tg(t=Ag){return e=>e.lift(new Ig(t))}class Ig{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new xg(t,this.errorFactory))}}class xg extends Ct.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(ig){t=ig}this.destination.error(t)}}}function Ag(){return new mg}var Og=n(4487);function kg(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Pt((e,n)=>t(e,n,r)):Og.y,bg(1),n?Sg(e):Tg(()=>new mg))}n(3101);const Ng=new r.OlP("angularfire2.auth.use-emulator");function Dg(t,e){return function(t,e=gt.z){return new mt.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Pg(t,e){return Dg(t,e).pipe((0,xt.U)(t=>({payload:t,type:"query"})))}function Rg(t,e){return Pg(t,e).pipe(St(void 0),Et(),(0,xt.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Mg(t,e,n){return Rg(t,n).pipe(At((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Lg(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Lg(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Lg(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new Nt(void 0,void 0)),(0,xt.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function Lg(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Fg(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class Vg{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Rg(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,xt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(St(void 0),Et(),Pt(([t,e])=>e.length>0||!t),(0,xt.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(At((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Fg(t);return Mg(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Pg(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,yt.D)(this.query.get(t)).pipe((0,Lt.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Ug(this.ref.doc(t),this.afs)}}class Ug{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=zg(n,e);return new Vg(r,i,this.afs)}snapshotChanges(){return Dg(this.ref,this.afs.schedulers.outsideAngular).pipe(St(void 0),Et(),(0,xt.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,xt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,yt.D)(this.ref.get(t)).pipe((0,Lt.QV)(this.afs.schedulers.insideAngular))}}class jg{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Rg(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Pt(t=>t.length>0),this.afs.keepUnstableUntilFirst):Rg(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(At((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Fg(t);return Mg(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Pg(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,yt.D)(this.query.get(t)).pipe((0,Lt.QV)(this.afs.schedulers.insideAngular))}}const qg=new r.OlP("angularfire2.enableFirestorePersistence"),Gg=new r.OlP("angularfire2.firestore.persistenceSettings"),Bg=new r.OlP("angularfire2.firestore.settings"),Hg=new r.OlP("angularfire2.firestore.use-emulator");function zg(t,e=(t=>t)){return{query:e(t),ref:t}}let Zg=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new pt.HU(o),this.keepUnstableUntilFirst=(0,pt.ss)(this.schedulers);const c=(0,pt.on)(t,o,e);!Ft.Z.auth&&u&&(0,pt.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,pt.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!function(t){return"server"===t}(i)){const e=()=>{try{return(0,yt.D)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(ig){return"undefined"!=typeof console&&console.warn(ig),(0,vt.of)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,(0,vt.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=zg(n,e),o=this.schedulers.ngZone.run(()=>r);return new Vg(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new jg(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Ug(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(pt.Dh),r.LFG(pt.xv,8),r.LFG(qg,8),r.LFG(Bg,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Gg,8),r.LFG(Hg,8),r.LFG(Ng,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(pt.Dh),r.LFG(pt.xv,8),r.LFG(qg,8),r.LFG(Bg,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Gg,8),r.LFG(Hg,8),r.LFG(Ng,8))},token:t,providedIn:"any"}),t})(),$g=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:qg,useValue:!0},{provide:Gg,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Zg]}),t})();class Kg extends cg.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new gg.N;return this._value}next(t){super.next(this._value=t)}}var Qg=n(9796);class Jg extends Ct.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Wg extends Ct.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Yg=n(7444);function Xg(t,e,n,r,i=new Wg(t,n,r)){if(!i.closed)return e instanceof mt.y?e.subscribe(i):(0,Yg.s)(e)(i)}var tm=n(6693);const em={};class nm{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new rm(t,this.resultSelector))}}class rm extends Jg{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(em),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Xg(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===em?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function im(t){return new mt.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,yt.D)(n):(0,vg.c)()).subscribe(e)})}var om=n(2441);function sm(t){return function(e){const n=new am(t),r=e.lift(n);return n.caught=r}}class am{constructor(t){this.selector=t}call(t,e){return e.subscribe(new um(t,this.selector,this.caught))}}class um extends lg.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new lg.IY(this);this.add(r);const i=(0,lg.ft)(n,r);i!==r&&this.add(i)}}}var cm=n(9773);function lm(t,e){return(0,cm.zg)(t,e,1)}function hm(t){return function(e){return 0===t?(0,vg.c)():e.lift(new fm(t))}}class fm{constructor(t){if(this.total=t,this.total<0)throw new yg}call(t,e){return e.subscribe(new dm(t,this.total))}}class dm extends Ct.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var pm=n(3342),gm=n(1307);class mm{constructor(t){this.callback=t}call(t,e){return e.subscribe(new ym(t,this.callback))}}class ym extends Ct.L{constructor(t,e){super(t),this.add(new pg.w(e))}}class vm{constructor(t,e){this.id=t,this.url=e}}class bm extends vm{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wm extends vm{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _m extends vm{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Sm extends vm{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Cm extends vm{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Em extends vm{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tm extends vm{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Im extends vm{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xm extends vm{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Am{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Om{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class km{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nm{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dm{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pm{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rm{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Mm="primary";class Lm{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Fm(t){return new Lm(t)}function Vm(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Um(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function jm(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!qm(t[i],e[i]))return!1;return!0}function qm(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Gm(t){return Array.prototype.concat.apply([],t)}function Bm(t){return t.length>0?t[t.length-1]:null}function Hm(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function zm(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,yt.D)(Promise.resolve(t)):(0,vt.of)(t)}const Zm={exact:function t(e,n,r){if(!ey(e.segments,n.segments))return!1;if(!Wm(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:Qm},$m={exact:function(t,e){return jm(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qm(t[n],e[n]))},ignored:()=>!0};function Km(t,e,n){return Zm[n.paths](t.root,e.root,n.matrixParams)&&$m[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Qm(t,e,n){return Jm(t,e,e.segments,n)}function Jm(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!ey(i,n)&&!e.hasChildren()&&!!Wm(i,n,r)}if(t.segments.length===n.length){if(!ey(t.segments,n))return!1;if(!Wm(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Qm(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!ey(t.segments,i)&&!!Wm(t.segments,i,r)&&!!t.children.primary&&Jm(t.children.primary,e,o,r)}}function Wm(t,e,n){return e.every((e,r)=>$m[n](t[r].parameters,e.parameters))}class Ym{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fm(this.queryParams)),this._queryParamMap}toString(){return iy.serialize(this)}}class Xm{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Hm(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return oy(this)}}class ty{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Fm(this.parameters)),this._parameterMap}toString(){return fy(this)}}function ey(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class ny{}class ry{parse(t){const e=new yy(t);return new Ym(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${sy(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${uy(e)}=${uy(t)}`).join("&"):`${uy(e)}=${uy(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const iy=new ry;function oy(t){return t.segments.map(t=>fy(t)).join("/")}function sy(t,e){if(!t.hasChildren())return oy(t);if(e){const e=t.children.primary?sy(t.children.primary,!1):"",n=[];return Hm(t.children,(t,e)=>{e!==Mm&&n.push(`${e}:${sy(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Hm(t.children,(t,r)=>{r===Mm&&(n=n.concat(e(t,r)))}),Hm(t.children,(t,r)=>{r!==Mm&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Mm?[sy(t.children.primary,!1)]:[`${n}:${sy(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${oy(t)}/${e[0]}`:`${oy(t)}/(${e.join("//")})`}}function ay(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uy(t){return ay(t).replace(/%3B/gi,";")}function cy(t){return ay(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ly(t){return decodeURIComponent(t)}function hy(t){return ly(t.replace(/\+/g,"%20"))}function fy(t){return`${cy(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${cy(t)}=${cy(e[t])}`).join("")}`;var e}const dy=/^[^\/()?;=#]+/;function py(t){const e=t.match(dy);return e?e[0]:""}const gy=/^[^=?&#]+/,my=/^[^?&#]+/;class yy{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xm([],{}):new Xm([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Xm(t,e)),n}parseSegment(){const t=py(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new ty(ly(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=py(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=py(this.remaining);t&&(n=t,this.capture(n))}t[ly(e)]=ly(n)}parseQueryParam(t){const e=function(t){const e=t.match(gy);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(my);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=hy(e),i=hy(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=py(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Mm);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Xm([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class vy{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=by(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=by(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=wy(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return wy(t,this._root).map(t=>t.value)}}function by(t,e){if(t===e.value)return e;for(const n of e.children){const e=by(t,n);if(e)return e}return null}function wy(t,e){if(t===e.value)return[e];for(const n of e.children){const r=wy(t,n);if(r.length)return r.unshift(e),r}return[]}class _y{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Sy(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Cy extends vy{constructor(t,e){super(t),this.snapshot=e,Oy(this,t)}toString(){return this.snapshot.toString()}}function Ey(t,e){const n=function(t,e){const n=new xy([],{},{},"",{},Mm,e,null,t.root,-1,{});return new Ay("",new _y(n,[]))}(t,e),r=new Kg([new ty("",{})]),i=new Kg({}),o=new Kg({}),s=new Kg({}),a=new Kg(""),u=new Ty(r,i,s,a,o,Mm,e,n.root);return u.snapshot=n.root,new Cy(new _y(u,[]),n)}class Ty{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,xt.U)(t=>Fm(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,xt.U)(t=>Fm(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Iy(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class xy{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ay extends vy{constructor(t,e){super(e),this.url=t,Oy(this,e)}toString(){return ky(this._root)}}function Oy(t,e){e.value._routerState=t,e.children.forEach(e=>Oy(t,e))}function ky(t){const e=t.children.length>0?` { ${t.children.map(ky).join(", ")} } `:"";return`${t.value}${e}`}function Ny(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,jm(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),jm(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!jm(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),jm(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Dy(t,e){return jm(t.params,e.params)&&function(t,e){return ey(t,e)&&t.every((t,n)=>jm(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Dy(t.parent,e.parent))}function Py(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Py(t,e,r);return Py(t,e)})}(t,e,n);return new _y(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Ry(e,t),t}}const n=new Ty(new Kg((r=e.value).url),new Kg(r.params),new Kg(r.queryParams),new Kg(r.fragment),new Kg(r.data),r.outlet,r.component,r),i=e.children.map(e=>Py(t,e));return new _y(n,i)}var r}function Ry(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Ry(t.children[n],e.children[n])}function My(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ly(t){return"object"==typeof t&&null!=t&&t.outlets}function Fy(t,e,n,r,i){let o={};return r&&Hm(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Ym(n.root===t?e:Vy(n.root,t,e),o,i)}function Vy(t,e,n){const r={};return Hm(t.children,(t,i)=>{r[i]=t===e?n:Vy(t,e,n)}),new Xm(t.segments,r)}class Uy{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&My(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Ly);if(r&&r!==Bm(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class jy{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function qy(t,e,n){if(t||(t=new Xm([],{})),0===t.segments.length&&t.hasChildren())return Gy(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Ly(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Zy(a,u,e))return o;r+=2}else{if(!Zy(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Xm(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Xm(t.segments.slice(r.pathIndex),t.children),Gy(e,0,i)}return r.match&&0===i.length?new Xm(t.segments,{}):r.match&&!t.hasChildren()?By(t,e,n):r.match?Gy(t,0,i):By(t,e,n)}function Gy(t,e,n){if(0===n.length)return new Xm(t.segments,{});{const r=function(t){return Ly(t[0])?t[0].outlets:{[Mm]:t}}(n),i={};return Hm(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=qy(t.children[r],e,n))}),Hm(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Xm(t.segments,i)}}function By(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Ly(o)){const t=Hy(o.outlets);return new Xm(r,t)}if(0===i&&My(n[0])){r.push(new ty(t.segments[e].path,zy(n[0]))),i++;continue}const s=Ly(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&My(a)?(r.push(new ty(s,zy(a))),i+=2):(r.push(new ty(s,{})),i++)}return new Xm(r,{})}function Hy(t){const e={};return Hm(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=By(new Xm([],{}),0,t))}),e}function zy(t){const e={};return Hm(t,(t,n)=>e[n]=`${t}`),e}function Zy(t,e,n){return t==n.path&&jm(e,n.parameters)}class $y{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ny(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Sy(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Hm(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Sy(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Sy(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Pm(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Nm(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Ny(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Ky(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Ky(t){Ny(t.value),t.children.forEach(Ky)}class Qy{constructor(t,e){this.routes=t,this.module=e}}function Jy(t){return"function"==typeof t}function Wy(t){return t instanceof Ym}const Yy=Symbol("INITIAL_VALUE");function Xy(){return hg(t=>function(...t){let e,n;return(0,_t.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Qg.k)(t[0])&&(t=t[0]),(0,tm.n)(t,n).lift(new nm(e))}(t.map(t=>t.pipe(bg(1),St(Yy)))).pipe(At((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Yy)return t;if(r===Yy&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Wy(r))return r}return t},t)},Yy),Pt(t=>t!==Yy),(0,xt.U)(t=>Wy(t)?t:!0===t),bg(1)))}let tv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[Jv]},encapsulation:2}),t})();function ev(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];nv(r,rv(e,r))}}function nv(t,e){t.children&&ev(t.children,e)}function rv(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function iv(t){const e=t.children&&t.children.map(iv),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Mm&&(n.component=tv),n}function ov(t){return t.outlet||Mm}function sv(t,e){const n=t.filter(t=>ov(t)===e);return n.push(...t.filter(t=>ov(t)!==e)),n}const av={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function uv(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},av):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Um)(n,t,e);if(!i)return Object.assign({},av);const o={};Hm(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function cv(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>lv(t,e,n)&&ov(n)!==Mm)}(t,n,r)){const i=new Xm(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&ov(o)!==Mm){const n=new Xm([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[ov(o)]=n}return i}(t,e,r,new Xm(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>lv(t,e,n))}(t,n,r)){const o=new Xm(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(lv(t,n,a)&&!i[ov(a)]){const n=new Xm([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[ov(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Xm(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function lv(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function hv(t,e,n,r){return!!(ov(t)===r||r!==Mm&&lv(e,n,t))&&("**"===t.path||uv(e,t,n).matched)}function fv(t,e,n){return 0===e.length&&!t.children[n]}class dv{constructor(t){this.segmentGroup=t||null}}class pv{constructor(t){this.urlTree=t}}function gv(t){return new mt.y(e=>e.error(new dv(t)))}function mv(t){return new mt.y(e=>e.error(new pv(t)))}function yv(t){return new mt.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class vv{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=cv(this.urlTree.root,[],[],this.config).segmentGroup,e=new Xm(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Mm).pipe((0,xt.U)(t=>this.createUrlTree(bv(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(sm(t=>{if(t instanceof pv)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof dv)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Mm).pipe((0,xt.U)(e=>this.createUrlTree(bv(e),t.queryParams,t.fragment))).pipe(sm(t=>{if(t instanceof dv)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Xm([],{[Mm]:t}):t;return new Ym(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,xt.U)(t=>new Xm([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,yt.D)(r).pipe(lm(r=>{const i=n.children[r],o=sv(e,r);return this.expandSegmentGroup(t,o,i,r).pipe((0,xt.U)(t=>({segment:t,outlet:r})))}),At((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Pt((e,n)=>t(e,n,r)):Og.y,hm(1),n?Sg(e):Tg(()=>new mg))}())}expandSegment(t,e,n,r,i,o){return(0,yt.D)(n).pipe(lm(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(sm(t=>{if(t instanceof dv)return(0,vt.of)(null);throw t}))),kg(t=>!!t),sm((t,n)=>{if(t instanceof mg||"EmptyError"===t.name){if(fv(e,r,i))return(0,vt.of)(new Xm([],{}));throw new dv(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return hv(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):gv(e):gv(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?mv(i):this.lineralizeSegments(n,i).pipe((0,cm.zg)(n=>{const i=new Xm(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=uv(e,r,i);if(!s)return gv(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?mv(l):this.lineralizeSegments(r,l).pipe((0,cm.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,vt.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,xt.U)(t=>(n._loadedConfig=t,new Xm(r,{})))):(0,vt.of)(new Xm(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=uv(e,n,r);if(!o)return gv(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,cm.zg)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=cv(e,s,u,o),l=new Xm(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe((0,xt.U)(t=>new Xm(s,t)));if(0===o.length&&0===c.length)return(0,vt.of)(new Xm(s,{}));const h=ov(n)===i;return this.expandSegment(r,l,o,c,h?Mm:i,!0).pipe((0,xt.U)(t=>new Xm(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,vt.of)(new Qy(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,vt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,cm.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,xt.U)(t=>(e._loadedConfig=t,t))):function(t){return new mt.y(e=>e.error(Vm(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,vt.of)(new Qy([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,vt.of)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Jy(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Jy(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return zm(o)});return(0,vt.of)(i).pipe(Xy(),(0,pm.b)(t=>{if(!Wy(t))return;const e=Vm(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,xt.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,vt.of)(n);if(r.numberOfChildren>1||!r.children.primary)return yv(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Ym(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Hm(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Hm(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Xm(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function bv(t){const e={};for(const n of Object.keys(t.children)){const r=bv(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Xm(t.segments.concat(e.segments),e.children)}return t}(new Xm(t.segments,e))}class wv{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class _v{constructor(t,e){this.component=t,this.route=e}}function Sv(t,e,n){const r=t._root;return Ev(r,e?e._root:null,n,[r.value])}function Cv(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ev(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Sy(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!ey(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ey(t.url,e.url)||!jm(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dy(t,e)||!jm(t.queryParams,e.queryParams);case"paramsChange":default:return!Dy(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new wv(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ev(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new _v(a.outlet.component,s))}else s&&Tv(e,a,i),i.canActivateChecks.push(new wv(r)),Ev(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Hm(o,(t,e)=>Tv(t,n.getContext(e),i)),i}function Tv(t,e,n){const r=Sy(t),i=t.value;Hm(r,(t,r)=>{Tv(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new _v(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Iv{}function xv(t){return new mt.y(e=>e.error(t))}class Av{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=cv(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Mm);if(null===e)return null;const n=new xy([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Mm,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new _y(n,e),i=new Ay(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Iy(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=sv(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=kv(n);return r.sort((t,e)=>t.value.outlet===Mm?-1:e.value.outlet===Mm?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return fv(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!hv(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Bm(n).parameters:{};i=new xy(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Pv(t),ov(t),t.component,t,Nv(e),Dv(e)+n.length,Rv(t))}else{const r=uv(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new xy(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Pv(t),ov(t),t.component,t,Nv(e),Dv(e)+o.length,Rv(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=cv(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new _y(i,t)]}if(0===a.length&&0===c.length)return[new _y(i,[])];const l=ov(t)===r,h=this.processSegment(a,u,c,l?Mm:r);return null===h?null:[new _y(i,h)]}}function Ov(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function kv(t){const e=[],n=new Set;for(const r of t){if(!Ov(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=kv(r.children);e.push(new _y(r.value,t))}return e.filter(t=>!n.has(t))}function Nv(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Dv(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Pv(t){return t.data||{}}function Rv(t){return t.resolve||{}}function Mv(t){return hg(e=>{const n=t(e);return n?(0,yt.D)(n).pipe((0,xt.U)(()=>e)):(0,vt.of)(e)})}class Lv extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Fv=new r.OlP("ROUTES");class Vv{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,xt.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Qy(Gm(i.injector.get(Fv,void 0,r.XFs.Self|r.XFs.Optional)).map(iv),i)}),sm(t=>{throw e._loader$=void 0,t}));return e._loader$=new om.c(n,()=>new cg.xQ).pipe((0,gm.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,yt.D)(this.loader.load(t)):zm(t()).pipe((0,cm.zg)(t=>t instanceof r.YKP?(0,vt.of)(t):(0,yt.D)(this.compiler.compileModuleAsync(t))))}}class Uv{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new jv,this.attachRef=null}}class jv{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Uv,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class qv{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Gv(t){throw t}function Bv(t,e,n){return e.parse("/")}function Hv(t,e){return(0,vt.of)(null)}const zv={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Zv={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $v=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new cg.xQ,this.errorHandler=Gv,this.malformedUriErrorHandler=Bv,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Hv,afterPreactivation:Hv},this.urlHandlingStrategy=new qv,this.routeReuseStrategy=new Lv,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(r.h0i),this.console=o.get(r.c2e);const c=o.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Ym(new Xm([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Vv(s,a,t=>this.triggerEvent(new Am(t)),t=>this.triggerEvent(new Om(t))),this.routerState=Ey(this.currentUrlTree,this.rootComponentType),this.transitions=new Kg({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const e=this.events;return t.pipe(Pt(t=>0!==t.id),(0,xt.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),hg(t=>{let n=!1,r=!1;return(0,vt.of)(t).pipe((0,pm.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),hg(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,vt.of)(t).pipe(hg(t=>{const n=this.transitions.getValue();return e.next(new bm(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?vg.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,hg(t=>function(t,e,n,r,i){return new vv(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe((0,xt.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,pm.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,cm.zg)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Av(t,e,n,r,i,o).recognize();return null===s?xv(new Iv):(0,vt.of)(s)}catch(ig){return xv(ig)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe((0,xt.U)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,pm.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Cm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new bm(n,this.serializeUrl(r),i,o);e.next(a);const u=Ey(r,this.rootComponentType).snapshot;return(0,vt.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),vg.E}),Mv(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,pm.b)(t=>{const e=new Em(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,xt.U)(t=>Object.assign(Object.assign({},t),{guards:Sv(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,cm.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?(0,vt.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,yt.D)(t).pipe((0,cm.zg)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,vt.of)(!0);const s=o.map(o=>{const s=Cv(o,e,i);let a;if(function(t){return t&&Jy(t.canDeactivate)}(s))a=zm(s.canDeactivate(t,e,n,r));else{if(!Jy(s))throw new Error("Invalid CanDeactivate guard");a=zm(s(t,e,n,r))}return a.pipe(kg())});return(0,vt.of)(s).pipe(Xy())}(t.component,t.route,n,e,r)),kg(t=>!0!==t,!0))}(s,r,i,t).pipe((0,cm.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,yt.D)(e).pipe(lm(e=>wt(function(t,e){return null!==t&&e&&e(new km(t)),(0,vt.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Dm(t)),(0,vt.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>im(()=>{const i=e.guards.map(i=>{const o=Cv(i,e.node,n);let s;if(function(t){return t&&Jy(t.canActivateChild)}(o))s=zm(o.canActivateChild(r,t));else{if(!Jy(o))throw new Error("Invalid CanActivateChild guard");s=zm(o(r,t))}return s.pipe(kg())});return(0,vt.of)(i).pipe(Xy())}));return(0,vt.of)(i).pipe(Xy())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,vt.of)(!0);const i=r.map(r=>im(()=>{const i=Cv(r,e,n);let o;if(function(t){return t&&Jy(t.canActivate)}(i))o=zm(i.canActivate(e,t));else{if(!Jy(i))throw new Error("Invalid CanActivate guard");o=zm(i(e,t))}return o.pipe(kg())}));return(0,vt.of)(i).pipe(Xy())}(t,e.route,n))),kg(t=>!0!==t,!0))}(r,o,t,e):(0,vt.of)(n)),(0,xt.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,pm.b)(t=>{if(Wy(t.guardsResult)){const e=Vm(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Tm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Pt(t=>!!t.guardsResult||(this.cancelNavigationTransitionRestoreHistory(t,""),!1)),Mv(t=>{if(t.guards.canActivateChecks.length)return(0,vt.of)(t).pipe((0,pm.b)(t=>{const e=new Im(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),hg(t=>{let e=!1;return(0,vt.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,cm.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,vt.of)(t);let o=0;return(0,yt.D)(i).pipe(lm(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,vt.of)({});const o={};return(0,yt.D)(i).pipe((0,cm.zg)(i=>function(t,e,n,r){const i=Cv(t,e,r);return zm(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,pm.b)(t=>{o[i]=t}))),hm(1),(0,cm.zg)(()=>Object.keys(o).length===i.length?(0,vt.of)(o):vg.E))}(t._resolve,t,e,r).pipe((0,xt.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Iy(t,n).resolve),null)))}(t.route,e,n,r)),(0,pm.b)(()=>o++),hm(1),(0,cm.zg)(e=>o===i.length?(0,vt.of)(t):vg.E))})),(0,pm.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransitionRestoreHistory(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,pm.b)(t=>{const e=new xm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Mv(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,xt.U)(t=>{const e=function(t,e,n){const r=Py(t,e._root,n?n._root:void 0);return new Cy(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,pm.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,xt.U)(t=>(new $y(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),(0,pm.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){const e=`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?this.cancelNavigationTransitionRestoreHistory(t,e):this.cancelNavigationTransition(t,e)}this.currentNavigation=null},t=>t.lift(new mm(i))),sm(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Wy(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new _m(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Sm(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(xs){t.reject(xs)}}var i;return vg.E}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ev(t),this.config=t.map(iv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Fy(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Uy(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Hm(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Uy(n,e,r)}(n);if(o.toRoot())return Fy(e.root,new Xm([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new jy(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new jy(t,t===e.root,0)}const r=My(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new jy(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Gy(s.segmentGroup,s.index,o.commands):qy(s.segmentGroup,s.index,o.commands);return Fy(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Wy(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(ig){e=this.malformedUriErrorHandler(ig,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},zv):!1===e?Object.assign({},Zv):e,Wy(t))return Km(this.currentUrlTree,t,n);const r=this.parseUrl(t);return Km(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new wm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){var o,s;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),u="imperative"!==e&&"imperative"===(null==a?void 0:a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===t.toString();if(u&&c)return Promise.resolve(!0);let l,h,f;i?(l=i.resolve,h=i.reject,f=i.promise):f=new Promise((t,e)=>{l=t,h=e});const d=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(o=this.browserPageId)&&void 0!==o?o:0:(null!==(s=this.browserPageId)&&void 0!==s?s:0)+1):p=0,this.setTransition({id:d,targetPageId:p,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:h,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransitionRestoreHistory(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree(),this.cancelNavigationTransition(t,e)}cancelNavigationTransition(t,e){const n=new _m(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(ny),r.LFG(jv),r.LFG(_),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Kv=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new cg.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Qv(this.skipLocationChange),replaceUrl:Qv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Qv(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36($v),r.Y36(Ty),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})();function Qv(t){return""===t||!!t}let Jv=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||Mm,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Wv(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(jv),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Wv{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Ty?this.route:t===jv?this.childContexts:this.parent.get(t,e)}}class Yv{}class Xv{preload(t,e){return(0,vt.of)(null)}}let tb=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Vv(e,n,e=>t.triggerEvent(new Am(e)),e=>t.triggerEvent(new Om(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Pt(t=>t instanceof wm),lm(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,yt.D)(n).pipe((0,bt.J)(),(0,xt.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,vt.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,cm.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG($v),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(Yv))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),eb=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof bm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wm&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Rm&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Rm(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG($v),r.LFG(M),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const nb=new r.OlP("ROUTER_CONFIGURATION"),rb=new r.OlP("ROUTER_FORROOT_GUARD"),ib=[_,{provide:ny,useClass:ry},{provide:$v,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new $v(null,t,e,n,r,i,o,Gm(s));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[ny,jv,_,r.zs3,r.v3s,r.Sil,Fv,nb,[class{},new r.FiY],[class{},new r.FiY]]},jv,{provide:Ty,useFactory:function(t){return t.routerState.root},deps:[$v]},{provide:r.v3s,useClass:r.EAV},tb,Xv,class{preload(t,e){return e().pipe(sm(()=>(0,vt.of)(null)))}},{provide:nb,useValue:{enableTracing:!1}}];function ob(){return new r.PXZ("Router",$v)}let sb=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[ib,lb(e),{provide:rb,useFactory:cb,deps:[[$v,new r.FiY,new r.tp0]]},{provide:nb,useValue:n||{}},{provide:m,useFactory:ub,deps:[a,[new r.tBr(v),new r.FiY],nb]},{provide:eb,useFactory:ab,deps:[$v,M,nb]},{provide:Yv,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Xv},{provide:r.PXZ,multi:!0,useFactory:ob},[hb,{provide:r.ip1,multi:!0,useFactory:fb,deps:[hb]},{provide:pb,useFactory:db,deps:[hb]},{provide:r.tb,multi:!0,useExisting:pb}]]}}static forChild(e){return{ngModule:t,providers:[lb(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(rb,8),r.LFG($v,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function ab(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new eb(t,e,n)}function ub(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function cb(t){return"guarded"}function lb(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:Fv,multi:!0,useValue:t}]}let hb=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new cg.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get($v),r=this.injector.get(nb);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,vt.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(nb),n=this.injector.get(tb),i=this.injector.get(eb),o=this.injector.get($v),s=this.injector.get(r.z2F);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function fb(t){return t.appInitializer.bind(t)}function db(t){return t.bootstrapListener.bind(t)}const pb=new r.OlP("Router Initializer");let gb=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-home"]],decls:24,vars:0,consts:[[1,"products"],[1,"card"],["src","tacticsphy.jpg","alt","Tactics Of Physics","srcset",""],[1,"name"],[1,"for","class"],["routerLink","/checkoutTOP",1,"get"],["src","onker.png","alt","Onker Apadmostok","srcset",""],[1,"forClass"],[1,"price"],["href","\u0985\u0999\u09cd\u0995\u09c7\u09b0-\u0986\u09aa\u09be\u09a6\u09ae\u09b8\u09cd\u09a4\u0995.pdf","download",""],[1,"get"]],template:function(t,e){1&t&&(r.TgZ(0,"section",0),r.TgZ(1,"div",1),r._UZ(2,"img",2),r.TgZ(3,"span",3),r._uU(4,"\u099f\u09c7\u0995\u099f\u09bf\u0995\u09b8 \u0985\u09ac \u09ab\u09bf\u099c\u09bf\u0995\u09cd\u09b8 "),r.TgZ(5,"p"),r._uU(6,"( Part 1 )"),r.qZA(),r.qZA(),r.TgZ(7,"span",4),r._uU(8,"For Class 11 & 12"),r.qZA(),r.TgZ(9,"span"),r._uU(10,"Price: 70 \u09f3"),r.qZA(),r.TgZ(11,"button",5),r._uU(12,"Order Now!"),r.qZA(),r.qZA(),r.TgZ(13,"div",1),r._UZ(14,"img",6),r.TgZ(15,"span",3),r._uU(16,"\u0985\u0999\u09cd\u0995\u09c7\u09b0 \u0986\u09aa\u09be\u09a6\u09ae\u09b8\u09cd\u09a4\u0995"),r.qZA(),r.TgZ(17,"span",7),r._uU(18,"\u09ae\u09cd\u09af\u09be\u0997\u09be\u099c\u09bf\u09a8"),r.qZA(),r.TgZ(19,"span",8),r._uU(20,"Price: 0\u09f3"),r.qZA(),r.TgZ(21,"a",9),r.TgZ(22,"button",10),r._uU(23,"Get Now!"),r.qZA(),r.qZA(),r.qZA(),r.qZA())},directives:[Kv],styles:["section.products[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-around;align-items:center;margin-bottom:25px;flex-wrap:wrap}section.products[_ngcontent-%COMP%]   div.card[_ngcontent-%COMP%]{flex-basis:400px;padding:30px;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#182a30;border-radius:20px;box-shadow:6px 6px 12px #b8b9be,-6px -6px 12px #fff;margin-bottom:20px}section.products[_ngcontent-%COMP%]   div.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px;height:300px;border-radius:16px;margin-bottom:20px}section.products[_ngcontent-%COMP%]   div.card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Hind Siliguri,sans-serif;margin-bottom:12px;color:#54defe}section.products[_ngcontent-%COMP%]   div.card[_ngcontent-%COMP%]   span.name[_ngcontent-%COMP%]{font-size:25px;line-height:1.1}section.products[_ngcontent-%COMP%]   div.card[_ngcontent-%COMP%]   span.name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}section.products[_ngcontent-%COMP%]   div.card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#54defe;color:#182a30;padding:10px;outline:0;border:none;border-radius:6px;cursor:pointer}"]}),t})();class mb{constructor(t,e,n,r,i,o){this.name=t,this.email=e,this.pmethod=n,this.number=r,this.trx=i,this.institution=o}}var yb=n(1555);function vb(t,e){return new mt.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=(0,yt.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let bb=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),wb=(()=>{class t extends bb{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const _b=new r.OlP("NgValueAccessor"),Sb={provide:_b,useExisting:(0,r.Gpc)(()=>Eb),multi:!0},Cb=new r.OlP("CompositionEventMode");let Eb=(()=>{class t extends bb{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(Cb,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r._Bn([Sb]),r.qOj]}),t})();const Tb=new r.OlP("NgValidators"),Ib=new r.OlP("NgAsyncValidators");function xb(t){return null!=t}function Ab(t){const e=(0,r.QGY)(t)?(0,yt.D)(t):t;return(0,r.CqO)(e),e}function Ob(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function kb(t,e){return e.map(e=>e(t))}function Nb(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Db(t){return null!=t?function(t){if(!t)return null;const e=t.filter(xb);return 0==e.length?null:function(t){return Ob(kb(t,e))}}(Nb(t)):null}function Pb(t){return null!=t?function(t){if(!t)return null;const e=t.filter(xb);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,Qg.k)(e))return vb(e,null);if((0,yb.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return vb(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return vb(t=1===t.length&&(0,Qg.k)(t[0])?t[0]:t,null).pipe((0,xt.U)(t=>e(...t)))}return vb(t,null)}(kb(t,e).map(Ab)).pipe((0,xt.U)(Ob))}}(Nb(t)):null}function Rb(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let Mb=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Db(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Pb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),Lb=(()=>{class t extends Mb{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class Fb extends Mb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Vb{constructor(t){this._cd=t}is(t){var e,n,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[t])}}let Ub=(()=>{class t extends Vb{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Fb,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})(),jb=(()=>{class t extends Vb{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Lb,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))("ng-submitted",e.is("submitted"))},features:[r.qOj]}),t})();function qb(t,e){Bb(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Hb(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Hb(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Gb(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Bb(t,e){const n=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Rb(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Rb(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Gb(e._rawValidators,i),Gb(e._rawAsyncValidators,i)}function Hb(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function zb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Zb="VALID",$b="INVALID",Kb="PENDING",Qb="DISABLED";function Jb(t){return(tw(t)?t.validators:t)||null}function Wb(t){return Array.isArray(t)?Db(t):t||null}function Yb(t,e){return(tw(e)?e.asyncValidators:t)||null}function Xb(t){return Array.isArray(t)?Pb(t):t||null}function tw(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class ew{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Wb(this._rawValidators),this._composedAsyncValidatorFn=Xb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Zb}get invalid(){return this.status===$b}get pending(){return this.status==Kb}get disabled(){return this.status===Qb}get enabled(){return this.status!==Qb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Wb(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Xb(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Kb,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Qb,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Zb,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Zb&&this.status!==Kb||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qb:Zb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Kb,this._hasOwnPendingAsyncValidator=!0;const e=Ab(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof rw?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof iw&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?Qb:this.errors?$b:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Kb)?Kb:this._anyControlsHaveStatus($b)?$b:Zb}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){tw(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class nw extends ew{constructor(t=null,e,n){super(Jb(e),Yb(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){zb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){zb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class rw extends ew{constructor(t,e,n){super(Jb(e),Yb(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof nw?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class iw extends ew{constructor(t,e,n){super(Jb(e),Yb(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof nw?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const ow={provide:Lb,useExisting:(0,r.Gpc)(()=>aw)},sw=(()=>Promise.resolve(null))();let aw=(()=>{class t extends Lb{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.vpe,this.form=new rw({},Db(t),Pb(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){sw.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),qb(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){sw.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),zb(this._directives,t)})}addFormGroup(t){sw.then(()=>{const e=this._findContainer(t.path),n=new rw({});(function(t,e){Bb(t,e)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){sw.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){sw.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Tb,10),r.Y36(Ib,10))},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([ow]),r.qOj]}),t})();const uw={provide:Fb,useExisting:(0,r.Gpc)(()=>lw)},cw=(()=>Promise.resolve(null))();let lw=(()=>{class t extends Fb{constructor(t,e,n,i){super(),this.control=new nw,this._registered=!1,this.update=new r.vpe,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Eb?n=t:Object.getPrototypeOf(t.constructor)===wb?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qb(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){cw.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;cw.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Lb,9),r.Y36(Tb,10),r.Y36(Ib,10),r.Y36(_b,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([uw]),r.qOj,r.TTD]}),t})(),hw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),fw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const dw={provide:_b,useExisting:(0,r.Gpc)(()=>gw),multi:!0};function pw(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let gw=(()=>{class t extends wb{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this.setProperty("selectedIndex",-1);const n=pw(e,t);this.setProperty("value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.NdJ("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([dw]),r.qOj]}),t})(),mw=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(pw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(gw,9))},t.\u0275dir=r.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const yw={provide:_b,useExisting:(0,r.Gpc)(()=>bw),multi:!0};function vw(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let bw=(()=>{class t extends wb{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.NdJ("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([yw]),r.qOj]}),t})(),ww=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(vw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(vw(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(bw,9))},t.\u0275dir=r.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const _w={provide:Tb,useExisting:(0,r.Gpc)(()=>Sw),multi:!0};let Sw=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function(t){return null==(e=t.value)||0===e.length?{required:!0}:null;var e}(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.uIk("required",e.required?"":null)},inputs:{required:"required"},features:[r._Bn([_w])]}),t})(),Cw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[fw]]}),t})(),Ew=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Cw]}),t})();function Tw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",4),r.TgZ(1,"h1"),r._uU(2,"Payment Procedure"),r.qZA(),r.TgZ(3,"p",5),r._uU(4," \u09e7. \u09a8\u09bf\u099a\u09c7\u09b0 \u09af\u09c7\u0995\u09cb\u09a8 \u09a8\u09be\u09ae\u09cd\u09ac\u09be\u09b0\u09c7 \u09ec\u09e6 \u099f\u09be\u0995\u09be (\u09b6\u09c1\u09a7\u09c1\u09ae\u09be\u09a4\u09cd\u09b0 \u09aa\u09cd\u09b0\u09bf-\u0985\u09b0\u09cd\u09a1\u09be\u09b0\u09c7\u09b0 \u099c\u09a8\u09cd\u09af) \u09aa\u09be\u09a0\u09bf\u09df\u09c7 Continue \u09ac\u09be\u099f\u09a8 \u099a\u09be\u09aa\u09ac\u09c7\u0964 \u099f\u09be\u0995\u09be \u09aa\u09be\u09a0\u09be\u09a8\u09cb\u09b0 \u09aa\u09b0 \u09a4\u09c1\u09ae\u09bf \u09af\u09c7\u0987 \u09a8\u09be\u09ae\u09cd\u09ac\u09be\u09b0 \u09a5\u09c7\u0995\u09c7 \u099f\u09be\u0995\u09be \u09aa\u09be\u09a0\u09bf\u09df\u09c7\u099b\u09cb \u09b8\u09c7\u0987 \u09a8\u09be\u09ae\u09cd\u09ac\u09be\u09b0\u09c7 \u09ab\u09bf\u09b0\u09a4\u09bf \u098f\u09b8\u098f\u09ae\u098f\u09b8\u09c7 Transaction ID \u09af\u09be\u09ac\u09c7\u0964Transaction ID \u0985\u09ac\u09b6\u09cd\u09af\u0987 \u09b8\u0982\u09b0\u0995\u09cd\u09b7\u09a8 \u0995\u09b0\u09ac\u09c7\u0964 "),r._UZ(5,"br"),r._uU(6," \u09e8. \u09a4\u09cb\u09ae\u09be\u09b0 \u09a8\u09be\u09ae, \u09aa\u09cd\u09b0\u09a4\u09bf\u09b7\u09cd\u09a0\u09be\u09a8,\u09ae\u09c7\u0987\u09b2, \u09a8\u09be\u09ae\u09cd\u09ac\u09be\u09b0,Transaction ID \u0987\u09a4\u09cd\u09af\u09be\u09a6\u09bf \u09aa\u09cd\u09b0\u09df\u09cb\u099c\u09a8\u09c0\u09df \u09a4\u09a5\u09cd\u09af \u09a6\u09bf\u09df\u09c7 \u09ab\u09b0\u09cd\u09ae\u099f\u09bf \u09aa\u09c2\u09b0\u09a8 \u0995\u09b0\u09ac\u09c7\u0964 \u0985\u09ac\u09b6\u09cd\u09af\u0987 Transaction ID \u0995\u09df\u09c7\u0995\u09ac\u09be\u09b0 \u09ae\u09bf\u09b2\u09bf\u09df\u09c7 \u09a8\u09bf\u09ac\u09c7\u0964"),r._UZ(7,"br"),r._uU(8," \u09e9. \u099a\u09c7\u0995\u0986\u0989\u099f \u09ab\u09b0\u09cd\u09ae \u09aa\u09c2\u09b0\u09a8 \u0995\u09b0\u09be\u09b0 \u09aa\u09b0 \u09a4\u09cb\u09ae\u09be\u09b0 \u0985\u09b0\u09cd\u09a1\u09be\u09b0\u099f\u09bf \u09aa\u09c7\u09a8\u09cd\u09a1\u09bf\u0982 \u098f \u099a\u09b2\u09c7 \u09af\u09be\u09ac\u09c7\u0964 \u09ee\u0987 \u0986\u0997\u09b8\u09cd\u099f,\u09e8\u09e6\u09e8\u09e7 \u09aa\u09b0\u09cd\u09af\u09a8\u09cd\u09a4 \u09aa\u09cd\u09b0\u09bf-\u0985\u09b0\u09cd\u09a1\u09be\u09b0 \u09aa\u09cd\u09b0\u0995\u09cd\u09b0\u09bf\u09df\u09be \u099a\u09b2\u09ae\u09be\u09a8 \u09a5\u09be\u0995\u09ac\u09c7\u0964 \u09aa\u09cd\u09b0\u09bf-\u0985\u09b0\u09cd\u09a1\u09be\u09b0 \u09aa\u09cd\u09b0\u0995\u09cd\u09b0\u09bf\u09df\u09be \u09b6\u09c7\u09b7 \u09b9\u0993\u09df\u09be\u09b0 \u09aa\u09b0 \u09a4\u09cb\u09ae\u09be\u09b0 \u0985\u09b0\u09cd\u09a1\u09be\u09b0\u099f\u09bf \u098f\u09aa\u09cd\u09b0\u09c1\u09ad \u09b9\u09df\u09c7 \u09af\u09be\u09ac\u09c7\u0964 \u09a4\u09cb\u09ae\u09be\u09b0 \u0985\u09b0\u09cd\u09a1\u09be\u09b0\u099f\u09bf \u098f\u09aa\u09cd\u09b0\u09c1\u09ad\u09be\u09b2 \u09aa\u09be\u0993\u09df\u09be\u09b0 \u09b8\u09be\u09a5\u09c7 \u09b8\u09be\u09a5\u09c7 \u09a4\u09c1\u09ae\u09bf \u09ac\u0987\u099f\u09bf \u09a1\u09be\u0989\u09a8\u09b2\u09c7\u09be\u09a1 \u0995\u09b0\u09a4\u09c7 \u09aa\u09be\u09b0\u09ac\u09c7\u0964 (\u098f\u09aa\u09cd\u09b0\u09c1\u09ad\u09be\u09b2 \u09aa\u09c7\u09a4\u09c7 \u09b8\u09b0\u09cd\u09ac\u09cb\u099a\u09cd\u099a \u09e8\u09ea \u0998\u09a8\u09cd\u099f\u09be \u09b8\u09ae\u09df \u09b2\u09be\u0997\u09a4\u09c7 \u09aa\u09be\u09b0\u09c7) "),r._UZ(9,"br"),r._uU(10," \u09ea. \u09a4\u09cb\u09ae\u09be\u09b0 \u0985\u09b0\u09cd\u09a1\u09be\u09b0 \u098f\u09aa\u09cd\u09b0\u09c1\u09ad\u09be\u09b2 \u09b9\u09df\u09c7\u099b\u09c7 \u0995\u09bf\u09a8\u09be \u099c\u09be\u09a8\u09a4\u09c7 \u0989\u09aa\u09b0\u09c7\u09b0 Login \u09ac\u09be\u099f\u09a8\u09c7 \u0995\u09cd\u09b2\u09bf\u0995 \u0995\u09b0\u09c7 Transaction ID(Case Sensitive) \u09b8\u09be\u09ac\u09ae\u09bf\u099f \u0995\u09b0\u09ac\u09c7\u0964 \u0987\u09a4\u09bf\u09ae\u09a7\u09cd\u09af\u09c7 \u098f\u09aa\u09cd\u09b0\u09c1\u09ad\u09be\u09b2 \u09a8\u09be \u09aa\u09c7\u09b2\u09c7 \u09a1\u09be\u0993\u09a8\u09b2\u09c7\u09be\u09a1 \u09ac\u09be\u099f\u09a8 \u09a4\u09cb\u09ae\u09be\u09b0 \u099c\u09a8\u09cd\u09af \u09a1\u09bf\u099c\u09c7\u09ac\u09b2 \u09a5\u09be\u0995\u09ac\u09c7\u0964 "),r._UZ(11,"br"),r._uU(12," \u09eb. \u09aa\u09c1\u09b0\u09cb \u09a7\u09be\u09aa\u09c7 \u0995\u09cb\u09a8 \u09a7\u09b0\u09a8\u09c7\u09b0 \u09b8\u09ae\u09b8\u09cd\u09af\u09be \u09b9\u09b2\u09c7 \u0986\u09ae\u09be\u09a6\u09c7\u09b0 \u09b8\u09be\u09a5\u09c7 \u09af\u09cb\u0997\u09be\u09af\u09cb\u0997 \u0995\u09b0\u09a4\u09c7 \u09aa\u09be\u09b0\u09cb\u0964 "),r._UZ(13,"br"),r._uU(14," \u09aa\u09c7\u0987\u099c - "),r.TgZ(15,"a",6),r._uU(16,"Sulphuric Bench"),r.qZA(),r._UZ(17,"br"),r._uU(18," \u099f\u09c7\u09b2\u09bf\u0997\u09cd\u09b0\u09be\u09ae- "),r.TgZ(19,"a",7),r._uU(20,"@Bench.Sulphuric"),r.qZA(),r._UZ(21,"br"),r.qZA(),r._UZ(22,"br"),r._UZ(23,"br"),r.TgZ(24,"h2"),r._uU(25,"\u099f\u09be\u0995\u09be \u09aa\u09be\u09a0\u09be\u09a8\u09cb\u09b0 \u09a8\u09be\u09ae\u09cd\u09ac\u09be\u09b0 \u09b8\u09ae\u09c2\u09b9\u0983"),r.qZA(),r.TgZ(26,"p",8),r._uU(27," Bkash: 01854701005 "),r._UZ(28,"br"),r._uU(29," Nagad: 01854701005 "),r._UZ(30,"br"),r._uU(31," Rocket: 01977258296"),r._UZ(32,"br"),r.qZA(),r.TgZ(33,"button",9),r.NdJ("click",function(){r.CHM(t);const e=r.oxw();return e.Acontinue=!e.Acontinue}),r._uU(34,"Continue"),r.qZA(),r.qZA()}}function Iw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"form",10,11),r.NdJ("ngSubmit",function(){return r.CHM(t),r.oxw().login()}),r.TgZ(2,"label",12),r._uU(3,"Your Full Name"),r.qZA(),r.TgZ(4,"input",13,14),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().newUser.name=e}),r.qZA(),r.TgZ(6,"label",12),r._uU(7,"Your Email (Check Twice Please)"),r.qZA(),r.TgZ(8,"input",15,16),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().newUser.email=e}),r.qZA(),r.TgZ(10,"label",12),r._uU(11,"Your Institution"),r.qZA(),r.TgZ(12,"input",17,18),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().newUser.institution=e}),r.qZA(),r.TgZ(14,"label",12),r._uU(15,"Payment Method"),r.qZA(),r.TgZ(16,"select",19,20),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().newUser.pmethod=e}),r.TgZ(18,"option",21),r._uU(19,"Select a Payment Method"),r.qZA(),r.TgZ(20,"option",22),r._uU(21,"bKash"),r.qZA(),r.TgZ(22,"option",23),r._uU(23,"Nagad"),r.qZA(),r.TgZ(24,"option",24),r._uU(25,"Rocket"),r.qZA(),r.qZA(),r.TgZ(26,"label",12),r._uU(27),r.qZA(),r.TgZ(28,"input",25,26),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().newUser.number=e}),r.qZA(),r.TgZ(30,"label",12),r._uU(31,"Transaction ID (Check Twice Please)"),r.qZA(),r.TgZ(32,"input",27,28),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().newUser.trx=e}),r.qZA(),r.TgZ(34,"button",29),r._uU(35,"Submit"),r.qZA(),r.qZA()}if(2&t){const t=r.MAs(1),e=r.MAs(5),n=r.MAs(9),i=r.MAs(13),o=r.MAs(17),s=r.MAs(29),a=r.MAs(33),u=r.oxw();r.xp6(4),r.ekj("invalidinput",e.invalid&&e.touched||!u.vName),r.Q6J("ngModel",u.newUser.name),r.xp6(4),r.ekj("invalidinput",n.invalid&&n.touched||!u.vEmail),r.Q6J("ngModel",u.newUser.email),r.xp6(4),r.ekj("invalidinput",i.invalid&&i.touched||!u.vInst),r.Q6J("ngModel",u.newUser.institution),r.xp6(4),r.ekj("invalidinput",o.invalid&&o.touched||!u.vMethod),r.Q6J("ngModel",u.newUser.pmethod),r.xp6(11),r.hij("Your ","Select a Payment Method"===u.newUser.pmethod?"":u.newUser.pmethod," Number"),r.xp6(1),r.ekj("invalidinput",s.invalid&&s.touched||!u.vPhone),r.Q6J("ngModel",u.newUser.number),r.xp6(4),r.ekj("invalidinput",a.invalid&&a.touched),r.Q6J("ngModel",u.newUser.trx),r.xp6(2),r.Q6J("disabled",t.invalid)}}function xw(t,e){if(1&t&&(r.TgZ(0,"div",30),r.TgZ(1,"p"),r._uU(2,"Thanks for your order. Your order is currently pending."),r.qZA(),r.TgZ(3,"p"),r._uU(4),r.qZA(),r.TgZ(5,"p"),r._uU(6,"After Approvement, Please login with this ID and download the PDF."),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(4),r.hij("Your Transaction ID is: ",t.newUser.trx,"")}}function Aw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"form",2,3),r.NdJ("ngSubmit",function(){return r.CHM(t),r.oxw().check()}),r.TgZ(2,"label",4),r._uU(3,"Transaction ID "),r.qZA(),r.TgZ(4,"input",5,6),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().traxID=e}),r.qZA(),r.TgZ(6,"button",7),r._uU(7),r.qZA(),r.qZA()}if(2&t){const t=r.MAs(1),e=r.MAs(5),n=r.oxw();r.xp6(4),r.ekj("invalidinput",e.invalid&&e.touched),r.Q6J("ngModel",n.traxID),r.xp6(2),r.Q6J("disabled",t.invalid),r.xp6(1),r.Oqu(n.checking)}}function Ow(t,e){if(1&t&&(r.TgZ(0,"div",12),r.TgZ(1,"p"),r._uU(2),r.qZA(),r.TgZ(3,"p"),r._uU(4),r.qZA(),r.TgZ(5,"p"),r._uU(6),r.qZA(),r.TgZ(7,"a",13),r.TgZ(8,"button",14),r._uU(9," Download "),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(2),r.hij("Name: ",t.payload.doc.data().name,""),r.xp6(2),r.hij("Email: ",t.payload.doc.data().email,""),r.xp6(2),r.hij(" Approval Status: ",t.payload.doc.data().approved?"Approved":"Pending"," "),r.xp6(1),r.Q6J("href",!1===t.payload.doc.data().approved?"#":"Tactics of Physics part 1.pdf",r.LSH),r.xp6(1),r.Q6J("disabled",!1===t.payload.doc.data().approved)}}function kw(t,e){if(1&t&&(r.TgZ(0,"div",10),r.YNc(1,Ow,10,5,"div",11),r.qZA()),2&t){const t=e.$implicit,n=r.oxw(2);r.xp6(1),r.Q6J("ngIf",t.payload.doc.data().trx===n.traxID)}}function Nw(t,e){if(1&t&&(r.TgZ(0,"div",8),r.YNc(1,kw,2,1,"div",9),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.data)}}const Dw=[{path:"",component:gb},{path:"checkoutTOP",component:(()=>{class t{constructor(t){this.db=t,this.Acontinue=!0,this.isSubmitted=!1,this.newUser=new mb("","","Select a Payment Method","+880","",""),this.vName=!0,this.vEmail=!0,this.vPhone=!0,this.vMethod=!0,this.vInst=!0}login(){if(this.vName=!(this.newUser.name.length<4),this.vInst=!(this.newUser.institution.length<4),this.vEmail=!!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.newUser.email),this.vPhone=!!/(^(\+88|0088)?(01){1}[3456789]{1}(\d){8})$/.test(this.newUser.number),this.vMethod="Select a Payment Method"!==this.newUser.pmethod,!0===this.vName&&!0===this.vEmail&&!0===this.vPhone&&!0===this.vMethod&&!0===this.vInst){let t={name:this.newUser.name,email:this.newUser.email,number:this.newUser.number,pmethod:this.newUser.pmethod,institution:this.newUser.institution,trx:this.newUser.trx,approved:!1};this.db.collection("waitingForApprovement").add(t),this.isSubmitted=!this.isSubmitted}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Zg))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-tactics"]],decls:4,vars:3,consts:[[1,"pproc"],["class","wrapper",4,"ngIf"],["method","post","autocomplete","off",3,"ngSubmit",4,"ngIf"],["class","thanks",4,"ngIf"],[1,"wrapper"],[1,"niyom"],["href","https://www.facebook.com/sulphuric.bench/"],["href","https://t.me/SulphuricBench"],[1,"numbers"],[1,"cont",3,"click"],["method","post","autocomplete","off",3,"ngSubmit"],["formData","ngForm"],["for","name"],["name","name","type","text","required","",3,"ngModel","ngModelChange"],["name","ngModel"],["name","email","type","text","required","",3,"ngModel","ngModelChange"],["email","ngModel"],["name","inst","type","text","required","",3,"ngModel","ngModelChange"],["inst","ngModel"],["name","pmethod","type","text","required","",3,"ngModel","ngModelChange"],["pmethod","ngModel"],["selected",""],["value","bKash"],["value","Nagad"],["value","Rocket"],["name","number","type","text","required","",3,"ngModel","ngModelChange"],["number","ngModel"],["name","trx","type","text","required","",3,"ngModel","ngModelChange"],["trx","ngModel"],["type","submit",3,"disabled"],[1,"thanks"]],template:function(t,e){1&t&&(r.TgZ(0,"section",0),r.YNc(1,Tw,35,0,"div",1),r.YNc(2,Iw,36,20,"form",2),r.YNc(3,xw,7,1,"div",3),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngIf",e.Acontinue),r.xp6(1),r.Q6J("ngIf",!e.Acontinue&&!e.isSubmitted),r.xp6(1),r.Q6J("ngIf",e.isSubmitted))},directives:[N,hw,jb,aw,Eb,Sw,Ub,lw,gw,mw,ww],styles:["section.pproc[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}section.pproc[_ngcontent-%COMP%], section.pproc[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}section.pproc[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{width:80%;padding:30px;background:#182a30;border-radius:20px;box-shadow:6px 6px 12px #b8b9be,-6px -6px 12px #fff;color:#54defe;font-family:Hind Siliguri,sans-serif}section.pproc[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:33px;margin-bottom:16px}section.pproc[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:25px;display:flex;width:100%}section.pproc[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}section.pproc[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   p.numbers[_ngcontent-%COMP%]{display:flex;width:100%}section.pproc[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   button.cont[_ngcontent-%COMP%]{background:#54defe;color:#182a30;padding:10px;outline:0;border:none;border-radius:6px;cursor:pointer;text-align:center;font-family:PT Sans;font-size:20px;margin-top:20px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background:#182a30;padding:20px;margin-bottom:25px;border-radius:15px;width:40%}h2[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;text-align:center}h2[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{font-family:PT Sans;color:#54defe}label[_ngcontent-%COMP%]{line-height:34px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background:#fff;border-radius:10px;border:none;outline:none;padding:7px 10px;color:#182a30;font-family:PT Sans,sans-serif;font-size:16px;font-weight:700;width:90%}input.invalidinput[_ngcontent-%COMP%], select.invalidinput[_ngcontent-%COMP%]{border:1px solid #db3131;box-shadow:0 0 17px #db3131}button[_ngcontent-%COMP%]{color:#182a30;border-radius:5px;background:#54defe;padding:10px 20px;text-align:center;font-weight:700;font-family:PT Sans,sans-serif;margin-top:25px;-webkit-user-select:none;user-select:none;outline:none;border:none;cursor:pointer;transition:.2s}a[_ngcontent-%COMP%]{text-decoration:none;color:#54defe}button[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px #54defe,0 0 13px #54defe,0 0 26px #54defe}button[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:default}button[_ngcontent-%COMP%]:disabled:hover{box-shadow:none}@media (max-width: 980px){section.pproc[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:50%}}@media (max-width: 600px){section.pproc[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:65%}}@media (max-width: 450px){section.pproc[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:90%}}.thanks[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:50vh}.thanks[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:PT Sans,sans-serif;font-size:25px}@media (max-width: 768px){.thanks[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 620px){.thanks[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 460px){.thanks[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px}}@media (max-width: 295px){.thanks[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:8px}}@media (max-width: 500px){section.pproc[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{width:100%}section.pproc[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section.pproc[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}section.pproc[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 320px){section.pproc[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section.pproc[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}section.pproc[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}section.pproc[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;font-size:12px}}"]}),t})()},{path:"download-Tactics-Of-Physics",component:(()=>{class t{constructor(t){this.db=t,this.traxID="",this.clicked=!1,this.checking="Submit",t.collection("waitingForApprovement").snapshotChanges().subscribe(t=>this.data=t)}check(){this.checking="Checking...",setTimeout(()=>{this.checking="Submit",this.clicked=!0},2e3)}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Zg))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-login"]],decls:3,vars:2,consts:[["method","post","autocomplete","off",3,"ngSubmit",4,"ngIf"],["class","div",4,"ngIf"],["method","post","autocomplete","off",3,"ngSubmit"],["checkTRX","ngForm"],["for","name"],["name","trxID","type","text","required","",3,"ngModel","ngModelChange"],["tran","ngModel"],["type","submit",3,"disabled"],[1,"div"],["class","asd",4,"ngFor","ngForOf"],[1,"asd"],["class","int",4,"ngIf"],[1,"int"],["download","",3,"href"],[3,"disabled"]],template:function(t,e){1&t&&(r.TgZ(0,"section"),r.YNc(1,Aw,8,5,"form",0),r.YNc(2,Nw,2,1,"div",1),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngIf",!e.clicked),r.xp6(1),r.Q6J("ngIf",e.clicked))},directives:[N,hw,jb,aw,Eb,Sw,Ub,lw,O],styles:["section[_ngcontent-%COMP%]{margin-bottom:20px;height:50vh}form[_ngcontent-%COMP%], section[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}form[_ngcontent-%COMP%]{background:#182a30;padding:20px;margin-bottom:25px;border-radius:15px;width:40%}h2[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;text-align:center}h2[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{font-family:PT Sans;color:#54defe}label[_ngcontent-%COMP%]{line-height:34px}input[_ngcontent-%COMP%]{background:#fff;border-radius:10px;border:none;outline:none;padding:7px 10px;color:#182a30;font-family:PT Sans,sans-serif;font-size:16px;font-weight:700;width:90%}input.invalidinput[_ngcontent-%COMP%]{border:1px solid #db3131;box-shadow:0 0 17px #db3131}button[_ngcontent-%COMP%]{color:#182a30;border-radius:5px;background:#54defe;padding:10px 20px;text-align:center;font-weight:700;font-family:PT Sans,sans-serif;margin-top:25px;-webkit-user-select:none;user-select:none;outline:none;border:none;cursor:pointer;transition:.2s}button[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px #54defe,0 0 13px #54defe,0 0 26px #54defe}button[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:default}button[_ngcontent-%COMP%]:disabled:hover{box-shadow:none}@media (max-width: 980px){section.pproc[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:50%}}@media (max-width: 600px){section.pproc[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:65%}}@media (max-width: 450px){section.pproc[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:90%}}.div[_ngcontent-%COMP%]{width:50%;font-family:PT Sans,sans-serif;font-size:20px;background:#182a30;color:#54defe;padding:50px;border-radius:16px}p.error[_ngcontent-%COMP%]{text-align:center}@media (max-width: 650px){form[_ngcontent-%COMP%]{width:70%}.div[_ngcontent-%COMP%]{width:100%;padding:30px 20px;font-size:15px}}"]}),t})()}];let Pw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[sb.forRoot(Dw)],sb]}),t})(),Rw=(()=>{class t{constructor(){this.title="webshop"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"navbar"],["routerLink","/"],["src","logo.png","alt","Sulphuric Bench","srcset","",1,"logo"],["routerLink","/download-Tactics-Of-Physics"]],template:function(t,e){1&t&&(r.TgZ(0,"header",0),r.TgZ(1,"div",1),r._UZ(2,"img",2),r.TgZ(3,"p"),r._uU(4,"Sulphuric Bench Shop"),r.qZA(),r.qZA(),r.TgZ(5,"span",3),r._uU(6,"Login"),r.qZA(),r.qZA(),r._UZ(7,"router-outlet"))},directives:[Kv,Jv],styles:["header.navbar[_ngcontent-%COMP%]{background-color:#182a30;display:flex;justify-content:space-between;align-items:center;flex-basis:100%;padding:20px;box-shadow:6px 6px 12px #b8b9be,-6px -6px 12px #fff;margin-bottom:25px}header.navbar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:22px;color:#54defe;font-weight:bolder;font-family:PT Sans,sans-serif;cursor:pointer;margin-right:5%}header.navbar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;cursor:pointer}header.navbar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.logo[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;outline:none;cursor:pointer;margin-right:15px}header.navbar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;color:#54defe;font-weight:bolder;font-family:PT Sans,sans-serif}@media (max-width: 510px){header.navbar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.logo[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:8px}header.navbar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], header.navbar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}}"]}),t})();const Mw={apiKey:"AIzaSyBR36piXKbbiot9fL4YdH6s1ge3ewnXyt0",authDomain:"sulphur-shop.firebaseapp.com",projectId:"sulphur-shop",storageBucket:"sulphur-shop.appspot.com",messagingSenderId:"333335396754",appId:"1:333335396754:web:15540c122cbcf82fc1414b"};let Lw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[Rw]}),t.\u0275inj=r.cJS({providers:[],imports:[[dt,Pw,Ew,pt.hO.initializeApp(Mw),$g]]}),t})();(0,r.G48)(),ht().bootstrapModule(Lw).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,mG:()=>s,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=2236)}]);
